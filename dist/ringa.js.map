{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 66b7e58f11f470fdcfd5","webpack:///./src/ExecutorAbstract.js","webpack:///./src/util/executors.js","webpack:///./src/RingaObject.js","webpack:///./src/util/type.js","webpack:///./src/util/function.js","webpack:///./src/ExecutorFactory.js","webpack:///./src/Bus.js","webpack:///./src/RingaEvent.js","webpack:///./src/debug/InspectorController.js","webpack:///./~/hasharray/index.js","webpack:///./src/Model.js","webpack:///./src/util/debug.js","webpack:///./src/Controller.js","webpack:///./src/ModelWatcher.js","webpack:///./src/RingaEventFactory.js","webpack:///./src/ThreadFactory.js","webpack:///./src/debug/InspectorModel.js","webpack:///./src/executors/SleepExecutor.js","webpack:///./src/RingaHashArray.js","webpack:///./src/util/ringaEvent.js","webpack:///./src/executors/Command.js","webpack:///./src/executors/ForEachExecutor.js","webpack:///./src/executors/IifExecutor.js","webpack:///./src/executors/IntervalExecutor.js","webpack:///./src/executors/SpawnExecutor.js","webpack:///./src/factories/AssignFactory.js","webpack:///./~/camelcase/index.js","webpack:///./~/dateformat/lib/dateformat.js","webpack:///./~/error-stack-parser/error-stack-parser.js","webpack:///./~/error-stack-parser/~/stackframe/stackframe.js","webpack:///./~/hasharray/~/jclass/index.js","webpack:///./~/hasharray/src/HashArray.js","webpack:///./~/snake-case/~/lower-case/lower-case.js","webpack:///./~/snake-case/~/no-case/no-case.js","webpack:///./~/snake-case/~/no-case/vendor/camel-case-regexp.js","webpack:///./~/snake-case/~/no-case/vendor/camel-case-upper-regexp.js","webpack:///./~/snake-case/~/no-case/vendor/non-word-regexp.js","webpack:///./~/snake-case/snake-case.js","webpack:///./~/trie-search/index.js","webpack:///./~/trie-search/src/TrieSearch.js","webpack:///./src/Thread.js","webpack:///./src/executors/EventExecutor.js","webpack:///./src/executors/FunctionExecutor.js","webpack:///./src/executors/ParallelExecutor.js","webpack:///./src/executors/PromiseExecutor.js","webpack:///./src/index.js"],"names":["executorCounts","map","Map","ExecutorAbstract","thread","hasBeenRun","__DEV__","controller","Error","i","constructor","id","name","startTime","endTime","undefined","done","bind","fail","stop","resume","timeout","_timeoutToken","setTimeout","_timeoutHandler","clearTimeout","doneHandler","failHandler","__blockRingaEvents","executor","startTimeoutCheck","promise","ringaEvent","detail","_promise","then","lastPromiseResult","_result","catch","lastPromiseError","error","options","killOnErrorHandler","toString","console","killed","_done","endTimeoutCheck","throttle","doneThrottled","elapsed","Date","getTime","min","max","isNaN","millis","Math","random","warn","kill","message","timeoutHandler","_threadTimedOut","childExecutor","destroy","_timeout","injectionInfo","byName","getInjections","mergeControllerInjections","injections","key","_i","_injections","$controller","$thread","$ringaEvent","event","$lastEvent","lastEvent","$customEvent","customEvent","$target","target","$detail","$lastPromiseResult","$lastPromiseError","_customInjections","Object","assign","_controllers","forEach","re","events","push","reverse","buildArgumentsFromRingaEvent","expectedArguments","args","Array","argName","hasOwnProperty","startsWith","s","dispatchStack","str","debugHistory","join","keys","sort","ids","__hardReset","debug","log","_map","_list","concat","obj","counts","WeakMap","constructorNames","length","ignoreDuplicates","RingaObject","generateId","_name","warnOnDuplicateId","unsafeDestroy","destroyed","get","remove","value","_id","JSON","stringify","add","isPromise","isDOMNode","wrapIfNotInstance","o","Node","nodeType","nodeName","object","getArgNames","func","substring","indexOf","replace","split","sleep","milliseconds","Promise","resolve","ExecutorFactory","executee","executeeOptions","ringaEventFactory","prototype","instance","cache","cacheable","busses","count","Bus","_captureMap","children","parent","bus","ix","child","splice","index","type","handler","isCapture","pStack","unshift","p","_dispatch","capturePhase","requireCatch","ringaGlobalBus","eventIx","RingaEvent","bubbles","cancelable","_type","_bubbles","_cancelable","dispatched","_errors","listeners","dispatchedEvents","catchers","_catchers","__caught","_threads","document","parse","err","shift","search","CustomEvent","createEvent","initCustomEvent","addDebug","dispatchEvent","caught","pushError","_uncatch","_dispatchEvent","FAIL","errors","DONE","listener","eventType","_dispatched","addListener","argNames","apply","reject","addDoneListener","addFailListener","level","timestamp","stack","$debug","controllers","_target","currentTarget","threads","reduce","a","_lastPromiseResult","_lastPromiseError","eventController","lastEventInfo","PREHOOK","inspectorDispatch","dispatch","InspectorController","addModel","inspectorModel","addThread","removeThread","addExecutor","removeExecutor","module","exports","require","window","$ModelNotifications","watchers","modelWatchers","$ModelNameToConstructorMap","_serialize","model","pojo","props","serializeProperties","properties","filter","propertyOptions","prop","serialize","preSerialize","newArr","item","Model","postSerialize","values","_values","_modelWatchers","childIdToRef","$version","useRingaDefaults","serializeId","$Model","version","$name","serializeName","modelWatcher","signal","signaler","descriptor","mi","notify","condition","autoUnwatch","fn","unwatch","watch","propertyName","oldValue","newValue","defaultValue","subScriptName","defaultGet","defaultSet","parentModel","removeModelChild","addModelChild","po","onChange","doNotNotify","skipNotify","propertyChange","deserializing","getChangeDescriptor","defineProperty","set","indexProperties","setParentModel","autoWatch","watchHandler","ref","addProperty","cloneId","newInstance","_clone","propName","childModel","clone","newObj","recurse","trieSearchOptions","trieSearch","keepAll","keepAllKey","visitedById","_add","indexValue","_recurse","deserialize","ignore$Model","idPath","isDeserializable","modelMapper","getModelClassByName","construct","ModelClass","_deserializePOJOValue","parentKey","Clazz","PossibleModel","t","v","$deserializedObject","postDeserialize","className","propertyArray","clazz","d","default","$ringaClassName","now","format","ringaEventToDebugString","injectionNames","uglifyWhitelist","date","out","command","Controller","addEventListener","throwKillsThread","consoleLogFails","warnOnDetailOverwrite","eventTypeToThreadFactory","eventTypeToWatchers","watcherToArgNames","_eventHandler","injectionId","removeModel","types","TYPE_SNAKE_CASE","toUpperCase","useCapture","threadFactory","arguments","addEventTypeStatics","_attachListenerToBus","_eventType","removeListener","removeEventListener","hasListener","getThreadFactoryFor","build","run","threadDoneHandler","threadFailHandler","__eventHandler","cancellable","_caught","abort","preInvokeHandler","_fail","invoke","postInvokeHandler","has","_threadFinalized","THREAD_FAIL_ERROR","details","watcher","eventTypes","injectableCallback","_bus","detachAllListeners","attachAllListeners","busMounted","objPath","path","pathAll","propertyPath","Watchees","watchees","watchedModel","signalPath","signalModel","signalValue","watchee","watcheeObj","arg","watchedPath","watchedValue","__watchees","w","clear","call","globalWatchee","timeoutToken","ModelWatcher","idNameToWatchees","classToWatchees","models","idToModel","nameToModel","classToModel","__proto__","addInjector","classOrIdOrName","group","defaultGroup","all","byPath","paths","groupByPath","foundAtLeastOneWatchee","n","byPathFor","addWatchee","watcheeGroup","watcheesByPath","watchPathKey","endsWith","globalPath","substr","RingaEventFactory","domNode","detailOrig","newDetail","_executor","ThreadFactory","executorFactories","synchronous","addOne","_hashArray","addAll","threadId","commandThread","InspectorModel","executors","ringaObjects","SleepExecutor","RingaHashArray","changeHandler","addMap","getAll","getAsArray","sample","removeByKey","removeAll","intersection","complement","hasMultiple","collides","forEachDeep","sum","average","objectAt","mergeRingaEventDetails","warnOnOverwrite","assignToRingEvent","nextDetail","prevDetail","Command","donePassedAsArg","execute","waitForPromise","_cache","ForEachExecutor","arrayProperty","property","sequential","executorFactory","array","_next","_execute","killChildExecutor","_fin","IifExecutor","trueExecutor","falseExecutor","conditionResult","executorInst","IntervalExecutor","maxLoops","loops","_interval","_hasExceededMaxLoops","resetTimeout","_intervalDone","_intervalFail","SpawnExecutor","_dummyDone","_dummyFail","AssignFactory","preserveCamelCase","isLastCharLower","isLastCharUpper","isLastLastCharUpper","c","test","toLowerCase","from","x","trim","hasUpperCase","m","p1","global","dateFormat","token","timezone","timezoneClip","mask","utc","gmt","kindOf","TypeError","String","masks","maskSlice","slice","_","D","y","H","M","L","getTimezoneOffset","W","getWeek","N","getDayOfWeek","flags","dd","pad","ddd","i18n","dayNames","dddd","mm","mmm","monthNames","mmmm","yy","yyyy","h","hh","HH","MM","ss","l","round","tt","T","TT","Z","match","pop","floor","abs","S","val","len","targetThursday","getFullYear","getMonth","getDate","setDate","getDay","firstThursday","ds","setHours","getHours","weekDiff","dow","isArray","define","root","factory","ErrorStackParser","StackFrame","FIREFOX_SAFARI_STACK_REGEXP","CHROME_IE_STACK_REGEXP","SAFARI_NATIVE_CODE_REGEXP","ErrorStackParser$$parse","stacktrace","parseOpera","parseV8OrIE","parseFFOrSafari","extractLocation","ErrorStackParser$$extractLocation","urlLike","regExp","parts","exec","ErrorStackParser$$parseV8OrIE","filtered","line","tokens","locationParts","functionName","fileName","lineNumber","columnNumber","source","ErrorStackParser$$parseFFOrSafari","ErrorStackParser$$parseOpera","e","parseOpera9","parseOpera10","parseOpera11","ErrorStackParser$$parseOpera9","lineRE","lines","result","ErrorStackParser$$parseOpera10","ErrorStackParser$$parseOpera11","functionCall","argsRaw","_isNumber","parseFloat","isFinite","_capitalize","charAt","_getter","booleanProps","numericProps","stringProps","arrayProps","getArgs","setArgs","getEvalOrigin","evalOrigin","setEvalOrigin","getFunctionName","getFileName","getLineNumber","getColumnNumber","Boolean","j","Number","k","JClass","Function","isFn","extend","sources","defaultOptions","_isClassObject","initializing","BaseClass","_subClasses","init","_extend","instanceMembers","classMembers","_class","SuperClass","superPrototype","_superClass","_extends","getOwnPropertyDescriptor","member","superMember","_super","ClassMembersSuperClass","_members","opts","ClassMembersClass","_instanceClass","_convert","cls","origin","_origin","_construct","Class","_superDescriptor","HashArray","keyFields","callback","isHashArray","needsDupCheck","inst","arr","other","self","ret","allItems","res","getUniqueRandomIntegers","r","image","ixs","rand","removed","items","key2","old","dup","objs","ignoreItems","weightKey","tot","weightsTotal","callbackOrKey","defaultCallback","ha","LANGUAGES","tr","regexp","az","lt","locale","lang","lowerCase","NON_WORD_REGEXP","CAMEL_CASE_REGEXP","CAMEL_CASE_UPPER_REGEXP","replacement","noCase","MAX_CACHE_SIZE","TrieSearch","ignoreCase","maxCacheSize","splitOnRegEx","size","getCache","deepLookup","customKeys","clearCache","isKeyArr","reset","cleanCache","addFromObject","valueField","_key_","phrases","indexed","keyArr","keyToArr","insert","node","findNode","f","_get","phrase","haKeyFields","indexField","words","temp","aggregate","Thread","running","buildExecutors","executeNext","previousExecutor","_executorDoneHandler","_executorFailHandler","_finCouldNotFindError","EventExecutor","dispatchedRingaEvent","dispatchedRingaEventDoneHandler","dispatchedRingaEventFailHandler","FunctionExecutor","ParallelExecutor","executorArray","executorFactoryArray","awaitingExecutors","_parallelDone","_parallelFail","PromiseExecutor","forEachParallel","iif","interval","loop","spawn","debugStyle","funcName","debugDisplay","ringaDebug","Event"],"mappings":"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","file":"ringa.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Ringa\"] = factory();\n\telse\n\t\troot[\"Ringa\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 45);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 66b7e58f11f470fdcfd5","import RingaObject from './RingaObject';\nimport {inspectorDispatch} from './debug/InspectorController';\nimport {now} from './util/debug';\nimport {isPromise} from './util/type';\n\nexport const executorCounts = {\n  map: new Map()\n};\n\n/**\n * Command is the base class for all command objects that are run in a Ringa application or module.\n */\nclass ExecutorAbstract extends RingaObject {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructor for a new Command. This *must* be called via super() from a subclass constructor.\n   *\n   * @param thread The parent thread that owns this command.\n   */\n  constructor(thread) {\n    super();\n\n    this.hasBeenRun = false;\n\n    if (__DEV__ && !thread.controller) {\n      throw Error('ExecutorAbstract(): attempting to build an executor connected to a Thread without a controller.');\n    }\n\n    let i = executorCounts.map[this.constructor] = (executorCounts.map[this.constructor] ? executorCounts.map[this.constructor] + 1 : 1);\n    this.id = thread.controller.id + '_' + this.constructor.name + i;\n\n    this.thread = thread;\n\n    this.startTime = this.endTime = undefined;\n\n    this.done = this.done.bind(this);\n    this.fail = this.fail.bind(this);\n    this.stop = this.stop.bind(this);\n    this.resume = this.resume.bind(this);\n  }\n\n  //-----------------------------------\n  // Properties\n  //-----------------------------------\n  get ringaEvent() {\n    return this.thread.ringaEvent;\n  }\n\n  get controller() {\n    return this.thread.controller;\n  }\n\n  get timeout() {\n    if (!this._timeout && !this.controller.options.timeout) {\n      return -1;\n    }\n\n    return this._timeout !== undefined ? this.timeout : this.controller.options.timeout;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  startTimeoutCheck() {\n    if (this.timeout !== -1) {\n      this._timeoutToken = setTimeout(this._timeoutHandler.bind(this), this.timeout);\n    }\n  }\n\n  endTimeoutCheck() {\n    if (this._timeoutToken !== undefined) {\n      clearTimeout(this._timeoutToken);\n    }\n\n    this._timeoutToken = undefined;\n  }\n\n  /**\n   * Internal execution method called by Thread only. This must be overridden in a\n   * subclass to provide the appropriate functionality.\n   *\n   * @param doneHandler The handler to call when done() is called.\n   * @param failHandler The handler to call when fail() is called;\n   * @private\n   */\n  _execute(doneHandler, failHandler) {\n    if (this.hasBeenRun) {\n      throw new Error('ExecutorAbstract::_execute(): an executor has been run twice!');\n    }\n\n    if (__DEV__ && !this.controller.__blockRingaEvents) {\n      inspectorDispatch('ringaExecutorStart', {\n        executor: this\n      });\n    }\n\n    this.hasBeenRun = true;\n\n    this.doneHandler = doneHandler;\n    this.failHandler = failHandler;\n\n    this.startTime = now();\n\n    this.startTimeoutCheck();\n  }\n\n  /**\n   * Tells this executor to suspend its normal timeout operation and done/fail handler and wait for a promise instead.\n   * @param promise\n   */\n  waitForPromise(promise) {\n    if (isPromise(promise)) {\n      this.ringaEvent.detail._promise = promise;\n\n      promise.then(_result => {\n        this.ringaEvent.lastPromiseResult = _result;\n\n        this.done();\n      });\n      promise.catch(error => {\n        this.ringaEvent.lastPromiseError = error;\n\n        this.fail(error, this.controller.options.killOnErrorHandler(this.ringaEvent, error));\n      });\n    } else if (__DEV__) {\n      throw Error(`ExecutorAbstract::waitForPromise(): command ${this.toString()} returned something that is not a promise, ${promise}`);\n    }\n  }\n\n  /**\n   * Call this method when the Command is ready to hand off control back to the parent Thread.\n   */\n  done() {\n    if (__DEV__ && this.error) {\n      console.error('ExecutorAbstract::done(): called done on a executor that has already failed! Original error:', this.error);\n    }\n\n    if (this.ringaEvent.killed) {\n      return;\n    }\n\n    let _done = () => {\n      this.endTimeoutCheck();\n\n      this.endTime = now();\n\n      this.doneHandler(true);\n    };\n\n    if (__DEV__ && this.controller.options.throttle) {\n      this.doneThrottled(_done);\n    } else {\n      _done();\n    }\n  }\n\n  doneThrottled(done) {\n    let elapsed = new Date().getTime() - this.startTime;\n    let { min, max } = this.controller.options.throttle;\n\n    if (min && max && !isNaN(min) && !isNaN(max) && max > min) {\n      let millis = (Math.random() * (max - min)) + min - elapsed;\n\n      // Make sure in a state of extra zeal we don't throttle ourselves into a timeout\n      if (millis < 5) {\n        done();\n      } else {\n        setTimeout(done, millis);\n      }\n    } else {\n      if (__DEV__ && min && max && !isNaN(min) && !isNaN(max)) {\n        console.warn(`${this} invalid throttle settings! ${min} - ${max} ${typeof min} ${typeof max}`);\n      }\n      done();\n    }\n  }\n\n  /**\n   * Call this method if an error occurred during the processing of a command.\n   *\n   * @param error The error that has occurred.\n   * @param kill True if you want the thread to die immediately.\n   */\n  fail(error, kill = false) {\n    this.endTimeoutCheck();\n\n    this.endTime = now();\n\n    this.error = error;\n\n    this.ringaEvent.killed = this.ringaEvent.killed || kill;\n\n    this.failHandler(error, kill);\n  }\n\n  /**\n   * Stops the timeout check.\n   */\n  stop() {\n    this.endTimeoutCheck();\n  }\n\n  /**\n   * Resumes the timeout check.\n   */\n  resume() {\n    this.startTimeoutCheck();\n  }\n\n  /**\n   * By default is this executors id.\n   *\n   * @returns {string|*}\n   */\n  toString() {\n    return this.id;\n  }\n\n  _timeoutHandler() {\n    let message;\n\n    if (this.controller.options.timeoutHandler) {\n      this.controller.options.timeoutHandler(this.ringaEvent, this);\n    } else {\n      if (__DEV__) {\n        message = `ExecutorAbstract::_timeoutHandler(): the timeout (${this.timeout} ms) for this executor was exceeded:\\n\\t${this.toString()}`;\n      }\n\n      if (!__DEV__) {\n        message = `Ringa: executor timeout (${this.timeout} ms) exceeded:\\n\\t${this.toString()}`;\n      }\n\n      this.ringaEvent._threadTimedOut = true;\n\n      this.error = new Error(message);\n\n      this.failHandler(this.error, true);\n    }\n  }\n\n  /**\n   * This method is used to destroy a child executor that is *not* attached to the original thread. For example,\n   * the IifExecutor runs a child executor and manages its done and fail.\n   *\n   * @param childExecutor\n   */\n  killChildExecutor(childExecutor) {\n    if (__DEV__ && !this.controller.__blockRingaEvents) {\n      inspectorDispatch('ringaExecutorEnd', {\n        executor: childExecutor\n      });\n    }\n    childExecutor.destroy(true);\n  }\n}\n\nexport default ExecutorAbstract;\n\n\n// WEBPACK FOOTER //\n// ./src/ExecutorAbstract.js","export const injectionInfo = {\n  byName: {}\n};\n\nexport const getInjections = function(ringaEvent, executor = undefined) {\n  let mergeControllerInjections = function(injections, controller) {\n    // Merge controller.options.injections into our injector\n    let i = controller.options.injections;\n    for (let key in i) {\n      let _i = i[key];\n      if (typeof i[key] === 'function') {\n        _i = i[key]();\n      }\n\n      injections[key] = _i;\n    }\n  }\n\n  let injections;\n\n  // In the RingaEvent.then() resolve callback, we don't have a currently running executor so we have to\n  // check for that here and then pass undefined if we don't have one.\n  if (executor) {\n    injections = executor._injections = executor._injections || {\n        $controller: executor.controller,\n        $thread: executor.thread,\n        $ringaEvent: ringaEvent,\n        event: ringaEvent.event, // Used for DOM events that trigger a Ringa action\n        $lastEvent: ringaEvent.lastEvent,\n        $customEvent: ringaEvent.customEvent,\n        $target: ringaEvent.target,\n        $detail: ringaEvent.detail,\n        done: executor.done,\n        fail: executor.fail,\n        stop: executor.stop,\n        resume: executor.resume,\n        $lastPromiseResult: ringaEvent.lastPromiseResult,\n        $lastPromiseError: ringaEvent.lastPromiseError\n      };\n\n    if (executor._customInjections) {\n      injections = Object.assign(injections, executor._customInjections);\n    }\n\n    // Merge only injections for the controller that is the current context for the executor.\n    mergeControllerInjections(injections, executor.controller);\n  } else {\n    injections = {};\n\n    // We loop through all the controllers that caught and handled the event and combine all of their injections\n    // together... this probably needs to be thought through some more, but it will work for 99% of cases.\n    // Note that this means the if Controllers A and B both handled the event in order (A, B) and they both\n    // have an injection named 'model', then only the 'model' injection from A will be available.\n    ringaEvent._controllers.forEach(controller => {\n      mergeControllerInjections(injections, controller);\n    });\n\n    injections = Object.assign(injections, {\n      $ringaEvent: ringaEvent,\n      $lastEvent: ringaEvent.lastEvent,\n      $customEvent: ringaEvent.customEvent,\n      $target: ringaEvent.target,\n      $detail: ringaEvent.detail,\n      $lastPromiseResult: ringaEvent.lastPromiseResult,\n      $lastPromiseError: ringaEvent.lastPromiseError\n    });\n  }\n\n  let re = ringaEvent;\n  let events = [];\n\n  while (re) {\n    events.push(re);\n    re = re.lastEvent;\n  }\n\n  // TODO write units tests to verify this is working okay.\n  events.reverse().forEach(event => {\n    if (event.detail) {\n      for (let key in event.detail) {\n        if (key === 'ringaEvent')\n          continue;\n        injections[key] = event.detail[key];\n      }\n    }\n  });\n\n  if (__DEV__) {\n    for (var key in injections) {\n      injectionInfo.byName[key] = key;\n    }\n  }\n\n  return injections;\n}\n\n/**\n * This method is used for injecting RingaEvent.detail properties into a function owned by a Executor. It uses the data\n * gathered from introspecting a provided function to determine a set of arguments to\n * call the function with. It maps everything on ringaEvent.detail to arguments on the function.\n *\n * If our function is:\n *\n *    execute(user, filter) {...}\n *\n *  Then expectedArguments should be ['user', 'filter']\n *\n *  To generate the expected arguments, see util/function.js::getArgNames.\n *\n * We want to find ringaEvent.detail['user'] and ringaEvent.detail['filter']\n * and pass those through and error if one of them is missing.\n *\n * Note that there are other properties that can be requested in the arguments list of execute:\n *\n * $controller: the Controller object that is handling this thread\n * $thread: the Thread object that built this Command\n * $ringaEvent: the ringaEvent itself (instead of one of its detail properties)\n * $customEvent: the customEvent that is wrapped by the ringaEvent that was used to bubble up the DOM\n * $target: the target DOMNode that triggered the customEvent was dispatched on.\n * done: the parent Executor::done(). CommandFunction is an example of where this is needed.\n * fail: the parent Executor::fail(). CommandFunction is an example of where this is needed.\n * $lastPromiseResult: the last Promise result from a previous executor.\n * $lastPromiseError: the last Promise error from a previous executor.\n *\n * @param executor The Executor subclass instance.\n * @param expectedArguments An array of argument names that the target function expects.\n * @param ringaEvent An instance of RingaEvent that has been dispatched and contains a details Object with properties to be injected.\n *\n * @returns {Array}\n */\nexport const buildArgumentsFromRingaEvent = function(executor, expectedArguments, ringaEvent) {\n  let args = [];\n\n  if (!(expectedArguments instanceof Array)) {\n    throw Error('buildArgumentsFromRingaEvent(): An internal error has occurred in that expectedArguments is not an Array!');\n  }\n\n  let injections = getInjections(ringaEvent, executor);\n\n  expectedArguments.forEach((argName) => {\n    if (injections.hasOwnProperty(argName)) {\n      args.push(injections[argName]);\n    } else if (argName.startsWith('_')) {\n      // We make an exception and don't try to inject for arguments that begin with _ and do not warn either.\n    } else {\n      let s = ringaEvent.dispatchStack ? ringaEvent.dispatchStack[0] : 'unknown stack.';\n\n      let str = `Ringa Injection Warning:\\n` +\n                `\\t` + ringaEvent.debugHistory + `\\n` +\n                (executor ? `\\tExecutor: '${executor.toString()}' of type ${executor.constructor.name}\\n` : `No active Executor\\n`) +\n                `\\tMissing: ${argName}\\n` +\n                `\\tRequired: ${expectedArguments.join(', ')}\\n` +\n                `\\tAvailable: ${Object.keys(injections).sort().join(', ')}\\n` +\n                `\\tIf you are minifying JS, make sure you add the original, unmangled property name to the UglifyJSPlugin mangle exceptions.\\n` +\n                `\\tDispatched from: ${s}`;\n      console.warn(str);\n\n      args.push(undefined);\n    }\n  });\n\n  return args;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/executors.js","import camelCase from 'camelcase';\nimport HashArray from 'hasharray';\n\nexport const ids = {\n  __hardReset: (debug) => {\n    if (__DEV__ && debug) {\n      console.log(`RINGA HARD RESET START (__hardReset(true)) DESTROYING:\\n\\t${Object.keys(ids.map._map).sort().join('\\n\\t')}`);\n    }\n    ids.map._list.concat().forEach(obj => {\n      obj.destroy();\n    });\n    ids.counts = new WeakMap();\n    ids.constructorNames = {};\n    if (__DEV__ && debug) {\n      console.log(`RINGA HARD FINISHED (${Object.keys(ids.map._map).length} objects still in tact):\\n\\t${Object.keys(ids.map._map).sort().join('\\n\\t')}`);\n    }\n  },\n  map: new HashArray('id', undefined, {ignoreDuplicates: true}),\n  counts: new WeakMap(),\n  constructorNames: {}\n};\n\nexport default class RingaObject {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  constructor(name, id) {\n    ids.counts[this.constructor.name] = ids.counts[this.constructor.name] || 1;\n\n    if (id) {\n      this.id = id;\n    } else {\n      this.id = this.generateId();\n      ids.counts[this.constructor.name]++;\n    }\n\n    this._name = name || camelCase(this.constructor.name);\n\n    if (__DEV__) {\n      ids.constructorNames[this.constructor.name] = this.constructor.name;\n    }\n\n    this.warnOnDuplicateId = false;\n  }\n\n  //-----------------------------------\n  // Properties\n  //-----------------------------------\n  set id(value) {\n    value = value.toString();\n\n    if (value === this._id) {\n      return;\n    }\n\n    if (this.warnOnDuplicateId && ids.map.get(value)) {\n      console.warn(`Duplicate Ringa id discovered: ${JSON.stringify(value)} of type '${this.constructor.name}'. Call RingaObject::destroy() to clear up the id.`);\n    }\n\n    if (ids.map.get(this._id)) {\n      try {\n        ids.map.remove(this);\n      } catch (error) {\n        console.error(error);\n      }\n    }\n\n    this._id = value;\n\n    ids.map.add(this);\n  }\n\n  get id() {\n    return this._id;\n  }\n\n  set name(value) {\n    this._name = value;\n  }\n\n  get name() {\n    return this._name;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  generateId() {\n    return this.constructor.name + ids.counts[this.constructor.name];\n  }\n\n  destroy(unsafeDestroy = false) {\n    this.destroyed = true;\n\n    if (unsafeDestroy) {\n      /**\n       * There is the possibility that destroy() was called on an object, the id is cleared, and then another\n       * object takes that id in the interim. While this is highly unusual, it probably means developer error\n       * of some sort (e.g. a developer calls destroy() and then continues to use an object and then calls destroy()\n       * again).\n       */\n      let obj = ids.map.get(this.id);\n      if (obj && obj === this) {\n        ids.map.remove(this);\n      }\n\n      return this;\n    }\n\n    if (!ids.map.get(this.id)) {\n      console.error(`RingaObject::destroy(): attempting to destroy a RingaObject that Ringa does not think exists: '${this.id}'! Perhaps destroy() is called twice?`);\n      return this;\n    }\n\n    ids.map.remove(this);\n\n    return this;\n  }\n\n  toString(value) {\n    return this.name + '_' + (value || '');\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/RingaObject.js","export function isPromise(obj) {\n  return !!obj && (typeof obj === 'object' || typeof obj === 'function') && typeof obj.then === 'function';\n}\n\n// Returns true if it is a DOM node\n// http://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object\nexport function isDOMNode(o){\n  return (\n    typeof Node === \"object\" ? o instanceof Node : \n    o && typeof o === \"object\" && typeof o.nodeType === \"number\" && typeof o.nodeName===\"string\"\n  );\n}\n\n// If constructor is not in object's prototype chain,\n// return object wrapped in constructor\nexport function wrapIfNotInstance(object, constructor) {\n  if (!(object instanceof constructor)) {\n    object = new constructor(object);\n  }\n\n  return object;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/type.js","/**\n * This function returns the arguments for another method as an array.\n *\n * TODO: this should give some indication in its return on which arguments are optional (e.g. func(a=1,b=2,c='whatever'))\n *\n * @param func\n * @returns {Array}\n */\nexport const getArgNames = function (func) {\n  var s = func.toString();\n  s = s.substring(s.indexOf('(')+1, s.indexOf(')'));\n  s = s.replace(/[\\r\\n\\s]*/g, '');\n  s = s.replace(/\\\\+['\"]/g, '').replace(/=\\s*([\"']).*?\\1/g, '').replace(/=.*?(,|$)/g, '');\n  return s.length !== 0 ? s.split(',') : [];\n};\n\n/**\n * This function returns a resolved promise after `milliseconds` has elapsed\n *\n * @param milliseconds\n * @returns {Promise}\n */\nexport const sleep = function (milliseconds) {\n  return new Promise((resolve) => setTimeout(resolve, milliseconds));\n};\n\n\n// WEBPACK FOOTER //\n// ./src/util/function.js","import ExecutorAbstract from './ExecutorAbstract';\nimport FunctionExecutor from './executors/FunctionExecutor';\nimport PromiseExecutor from './executors/PromiseExecutor';\nimport EventExecutor from './executors/EventExecutor';\nimport ParallelExecutor from './executors/ParallelExecutor';\nimport SleepExecutor from './executors/SleepExecutor';\nimport RingaEventFactory from './RingaEventFactory';\nimport {getArgNames} from './util/function';\n\nclass ExecutorFactory {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructs a ExecutorFactory.\n   *\n   * @param executee This can be a Class, a instance, a function... we determine what type of\n   *   ExecutorAbstract to build based on what is passed in. This makes things extensible.\n   */\n  constructor(executee, executeeOptions) {\n    if (!executee) {\n      throw new Error('ExecutorFactory::build(): an internal error occurred and an executee was undefined!');\n    }\n\n    this.executee = executee;\n    this.executeeOptions = executeeOptions;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n\n  build(thread) {\n    if (typeof this.executee === 'string') {\n      let ringaEventFactory = new RingaEventFactory(this.executee);\n      return new EventExecutor(thread, ringaEventFactory);\n    } else if (typeof this.executee === 'number') {\n      return new SleepExecutor(thread, this.executee);\n    } else if (typeof this.executee.then === 'function') {\n      return new PromiseExecutor(thread, this.executee);\n    } else if (typeof this.executee === 'function') {\n      if (this.executee.prototype instanceof ExecutorAbstract) {\n        let instance = new this.executee(thread, this.executeeOptions);\n\n        if (!this.cache && instance.cacheable) {\n          this.cache = instance.cache;\n        }\n        \n        instance.cache = this.cache;\n\n        return instance;\n      } else {\n        return new FunctionExecutor(thread, this.executee);\n      }\n    } else if (this.executee instanceof Array) {\n      // This might be a group of ExecutorAbstracts that should be run synchronously\n      return new ParallelExecutor(thread, this.executee);\n    } else if (typeof this.executee === 'object' && this.executee instanceof RingaEventFactory) {\n      return new EventExecutor(thread, this.executee);\n    }\n\n    if (__DEV__) {\n      throw Error('ExecutorFactory::build(): the type of executee you provided is not supported by Ringa: ' + typeof this.executee + ': ' + this.executee);\n    }\n  }\n}\n\nexport default ExecutorFactory;\n\n\n// WEBPACK FOOTER //\n// ./src/ExecutorFactory.js","import RingaObject from './RingaObject';\nimport RingaEvent from './RingaEvent';\n\n/**\n * Used to auto-generate non-conflicting Bus ids as the application runs.\n *\n * @type {{count: number}}\n */\nexport const busses = {\n  count: 0\n};\n\n/**\n * Basic event bus implementation that works with Ringa.\n *\n * Due to the ability to structure Busses in a tree, this can handle bubbling and capture phases.\n *\n * Note: the methods of this Class are designed to match the spec for EventTarget in the DOM.\n */\nclass Bus extends RingaObject {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  constructor(name, id) {\n    super(name, id);\n\n    this._map = {};\n    this._captureMap = {};\n\n    this.children = [];\n    this.parent = undefined;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  /**\n   * Adds a child to this Bus.\n   *\n   * @param bus The bus to add as a child.\n   */\n  addChild(bus) {\n    if (bus.parent) {\n      throw new Error(`Cannot add a Bus that has a child that already has a parent: '${bus.id}'`);\n    }\n\n    bus.parent = this;\n    this.children.push(bus);\n  }\n\n  removeChild(bus) {\n    let ix;\n    if ((ix = this.children.indexOf(bus)) !== -1) {\n      let child = this.children[ix];\n      this.children.splice(ix, 1);\n      child.parent = undefined;\n    }\n  }\n\n  getChildAt(index) {\n    return this.children[index];\n  }\n\n  /**\n   * Adds an event listener handler for a particular event type.\n   *\n   * @param type The type of event\n   * @param handler The handling function\n   */\n  addEventListener(type, handler, isCapture = false) {\n    let map = isCapture ? this._captureMap : this._map;\n\n    map[type] = map[type] || [];\n    map[type].push(handler);\n  }\n\n  /**\n   * Returns true if there is at least one handler for the provided type.\n   *\n   * @param type Event type.\n   * @returns {*} True if the event type has an associated handler.\n   */\n  hasListener(type) {\n    return !!this._map[type];\n  }\n\n  /**\n   * Removes the specific handler associated with the provided event type.\n   *\n   * @param type Event type.\n   * @param handler The handling function to remove.\n   */\n  removeEventListener(type, handler) {\n    if (this._map[type]) {\n      let ix = this._map[type].indexOf(handler);\n      if (ix !== -1) {\n        this._map[type].splice(ix, 1);\n      }\n    }\n  }\n\n  /**\n   * Dispatches an event on this bus.\n   *\n   * @param event A RingaEvent or similar.\n   */\n  dispatchEvent(event) {\n    event.target = this;\n\n    // Capture Phase\n    if (this.parent) {\n      let pStack = [this.parent];\n\n      while (pStack[0].parent) {\n        pStack.unshift(pStack[0].parent);\n      }\n\n      pStack.forEach(p => {\n        p._dispatch(event ,true);\n      });\n    }\n\n    // Local\n    this._dispatch(event);\n\n    // Bubble Phase\n    let p = this.parent;\n\n    while (p) {\n      p._dispatch(event);\n      p = p.parent;\n    }\n  }\n\n  /**\n   * Internal dispatch that handles propagating an event to this Bus's immediate listeners.\n   *\n   * @param event The event to dispatch\n   * @private\n   */\n  _dispatch(event, capturePhase) {\n    let map = capturePhase ? this._captureMap : this._map;\n\n    if (map[event.type]) {\n      map[event.type].forEach(handler => {\n        handler(event);\n      });\n    }\n  }\n\n  dispatch(type, detail, requireCatch) {\n    this._dispatch(new RingaEvent(type, detail, true, true, undefined, requireCatch));\n  }\n}\n\nexport let ringaGlobalBus = new Bus('GLOBALBUS', 'GLOBALBUS');\n\nexport default Bus;\n\n\n// WEBPACK FOOTER //\n// ./src/Bus.js","import RingaObject from './RingaObject';\nimport ErrorStackParser from 'error-stack-parser';\nimport {ringaEventToDebugString} from './util/debug';\nimport {isDOMNode} from './util/type';\nimport {getArgNames} from './util/function';\nimport {buildArgumentsFromRingaEvent} from './util/executors';\n\nexport let eventIx = {\n  count: 0\n};\n\n/**\n * RingaEvent is a generic event type for Ringa that, when dispatched on the DOM, wraps a CustomEvent:\n *\n *   let event = new RingaEvent('change', {\n *     property: 'index',\n *     newValue: 1\n *   });\n *\n *   event.dispatch(...add a bus or DOM node here...);\n *\n * If no bus is provided and document is defined, the event will be dispatched on the document object, but you can provide\n * a custom DOMNode or bus to dispatch from:\n *\n *   event.dispatch(myDiv);\n *\n * OR\n *\n *   let b = new Ringa.Bus();\n *   event.dispatch(b);\n *\n * All RingaEvents bubble and are cancelable by default but this can be customized.\n */\nclass RingaEvent extends RingaObject {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Build a RingaEvent that wraps a CustomEvent internally.\n   *\n   * @param type The event type.\n   * @param detail Event details object. Note that properties on the RingaEvent in the details object are injected by name\n   *               into any executors this triggers, making passing values super controller.\n   * @param bubbles True if you want the event to bubble (default is true).\n   * @param cancelable True if you want the event to be cancellable (default is true).\n   * @param event If an event triggered this one, then this will be set (e.g. a DOM Event like 'click' or 'resize')\n   */\n  constructor(type, detail = {}, bubbles = true, cancelable = true, event = undefined, requireCatch = true) {\n    // TODO add cancel support and unit tests!\n    super(`RingaEvent[${type}, ${eventIx.count++}]`);\n\n    if (__DEV__ && !type) {\n      throw new Error('RingaEvent: attempting to dispatch an event with an undefined type! This normally happens because the Controller static property you are using is being used before the Controller has been instantiated.');\n    }\n\n    this.detail = detail;\n    detail.ringaEvent = this;\n\n    this._type = type;\n    this._bubbles = bubbles;\n    this._cancelable = cancelable;\n\n    this.dispatched = false;\n    this.controller = undefined;\n\n    this._errors = undefined;\n\n    this.requireCatch = requireCatch;\n\n    this.event = event;\n\n    this.listeners = {};\n    this.dispatchedEvents = [];\n\n    // Controllers that are currently handling the event\n    this.catchers = [];\n    // Controllers that are done handling the event\n    this._catchers = [];\n    // Was this event caught at all?\n    this.__caught = false;\n\n    this._threads = [];\n\n    this.killed = false;\n\n    // We keep track of when an Event triggered a thread that timed out because if one event triggers another triggers\n    // another and the deepest one times out, we don't really need to get a timeout for all the parent ones that are\n    // waiting as well.\n    this._threadTimedOut = false;\n  }\n\n  //-----------------------------------\n  // Properties\n  //-----------------------------------\n  get type() {\n    return this._type;\n  }\n\n  get bubbles() {\n    return this._bubbles;\n  }\n\n  get cancelable() {\n    return this._cancelable;\n  }\n\n  get target() {\n    if (this._target) {\n      return this._target;\n    }\n\n    return this.customEvent ? this.customEvent.target : undefined;\n  }\n\n  set target(value) {\n    this._target = value;\n  }\n\n  get currentTarget() {\n    return this.customEvent ? this.customEvent.currentTarget : undefined;\n  }\n\n  get errors() {\n    return this._errors;\n  }\n\n  get caught() {\n    return this.__caught;\n  }\n\n  /**\n   * Returns an Array of every Controller that ran as a result of this event.\n   * @private\n   */\n  get _controllers() {\n    return this._catchers.concat(this.catchers);\n  }\n\n  /**\n   * Returns an Array of every single executor that ran (or will ran) as a result of this event, in order of execution.\n   * @private\n   */\n  get _executors() {\n    this.threads.reduce((a, thread) => {\n      a = a.concat()\n    }, []);\n  }\n\n  /**\n   * When debug is true (or a number) this outputs verbose information about the event that was dispatched both\n   * to the console AND to detail.$debug Object.\n   *\n   * @returns {{}|*|boolean}\n   */\n  get debug() {\n    return this.detail && this.detail.debug;\n  }\n\n  /**\n   * Sets the last promise result of this particular event.\n   *\n   * @param value\n   */\n  set lastPromiseResult(value) {\n    this._lastPromiseResult = value;\n  }\n\n  /**\n   * Gets the last promise result of this event. If this event triggered another event, then returns that events\n   * lastPromiseResult. Hence this method is recursive.\n   *\n   * @returns {*} A Promise result.\n   */\n  get lastPromiseResult() {\n    if (this._lastPromiseResult) {\n      return this._lastPromiseResult;\n    }\n\n    if (this.lastEvent) {\n      return this.lastEvent.lastPromiseResult;\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Sets the last promise error of this particular event.\n   *\n   * @param value\n   */\n  set lastPromiseError(value) {\n    this._lastPromiseError = value;\n  }\n\n  /**\n   * Gets the last promise error of this event. If this event triggered another event, then returns that events\n   * lastPromiseError. Hence this method is recursive.\n   *\n   * @returns {*} A Promise error.\n   */\n  get lastPromiseError() {\n    if (this._lastPromiseError) {\n      return this._lastPromiseError;\n    }\n\n    if (this.lastEvent) {\n      return this.lastEvent.lastPromiseError;\n    }\n\n    return undefined;\n  }\n\n  get debugHistory() {\n    let eventController = this.controllers && this.controllers.length ? this.controllers[0].name : 'Uncaught event';\n    let lastEventInfo = this.detail && this.detail.lastEvent ? ' <- ' + this.detail.lastEvent.debugHistory : '';\n\n    return eventController + ':' + this.type + lastEventInfo;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  /**\n   * Dispatch the event on the provided bus.\n   *\n   * @param bus\n   */\n  dispatch(bus = document) {\n    if (__DEV__ && this.dispatched) {\n      throw Error('RingaEvent::dispatch(): events should only be dispatched once!', this);\n    }\n\n    if (__DEV__ || this.detail.debug) {\n\n      // The current version of error-stack-parser throws an error if it\n      // fails to parse the given Error object. We don't really want this to\n      // cause a fatal error, so we'll just wrap it in a try/catch.\n      // TODO: might want to console.warn() about this.\n\n      try { this.dispatchStack = ErrorStackParser.parse(new Error()); }\n      catch(err) { this.dispatchStack = []; }\n\n      this.dispatchStack.shift(); // Remove a reference to RingaEvent.dispatch()\n\n      if (this.dispatchStack.length && this.dispatchStack[0].toString().search('Object.dispatch') !== -1) {\n        this.dispatchStack.shift(); // Remove a reference to Object.dispatch()\n      }\n\n    } else {\n      this.dispatchStack = 'To turn on stack traces, build Ringa in development mode. See documentation.';\n    }\n\n    if (isDOMNode(bus)) {\n      try {\n        this.customEvent = new CustomEvent(this.type, {\n          detail: this.detail,\n          bubbles: this.bubbles,\n          cancelable: this.cancelable\n        });\n      }\n      catch(err) {\n\n        // 'new CustomEvent()' will throw an error on IE <= 11.\n        // See http://caniuse.com/#search=customevent for more info.\n        // The code below ensures compatibility with IE >= 9.\n\n        this.customEvent = document.createEvent('CustomEvent');\n        this.customEvent.initCustomEvent(this.type, this.bubbles, this.cancelable, this.detail);\n      }\n    }\n\n    this.dispatched = true;\n\n    this.addDebug(`Dispatching on ${bus} ${this.customEvent ? 'as custom event.' : 'as RingaEvent.'} (${this.bubbles ? 'bubbling' : 'does not bubble'})`);\n\n    bus.dispatchEvent(this.customEvent ? this.customEvent : this);\n\n    if ((__DEV__ || this.detail.debug) && this.requireCatch && !this.caught) {\n      console.warn(`RingaEvent::dispatch(): the RingaEvent '${this.type}' was never caught! Did you dispatch on the proper bus or DOM node? Was dispatched on: `, bus, `and the event was: `, this);\n    }\n\n    return this;\n  }\n\n  /**\n   * Called by each Controller when the event is caught. Note that a single RingaEvent can be caught by 0 or more Controllers.\n   *\n   * @param controller The Ringa.Controller that is announcing it caught the event.\n   * @private\n   */\n  _caught(controller) {\n    if (__DEV__ && !controller) {\n      throw new Error('RingaEvent::_caught(): controller was not defined!');\n    }\n\n    this.__caught = true;\n    this.catchers.push(controller);\n\n    this.addDebug(`Caught by ${controller}`);\n  }\n\n  /**\n   * Called by a particular controller when the Thread(s) this event triggered in that controller have been completed.\n   *\n   * @param controller The Ringa.Controller that is announcing it is uncatching the event.\n   * @private\n   */\n  _uncatch(controller) {\n    let ix = this.catchers.indexOf(controller);\n\n    if (__DEV__ && ix === -1) {\n      throw new Error('RingaEvent::_uncatch(): controller that is uncatching could not be found. Was done called twice?');\n    }\n\n    this._catchers.push(this.catchers.splice(ix, 1)[0]);\n\n    this.addDebug(`Uncaught by ${controller}`);\n  }\n\n  /**\n   * Completely kills the current Ringa thread, keeping any subsequent executors from running. To be called by user code like so:\n   *\n   *   let event = Ringa.dispatch('someEvent');\n   *   ...\n   *   event.fail();\n   */\n  fail(error) {\n    // TODO this should have a kill property passed in, and when true should kill *every* associated thread this event triggered (DISCUSS)\n    this.pushError(error);\n  }\n\n  /**\n   * Internal fail to be called by a catching Ringa.Controller when an executor has failed for any reason.\n   *\n   * @param controller The Controller who is responsible for the Thread that just failed.\n   * @param error Most likely an Error object but could be a string or anything a user manually passed.\n   * @private\n   */\n  _fail(controller, error, killed) {\n    if (killed) {\n      this._uncatch(controller);\n    }\n\n    this.addDebug('Fail');\n\n    this._dispatchEvent(RingaEvent.FAIL, undefined, error, killed);\n  }\n\n  /**\n   * Add an error to this event.\n   *\n   * @param error Any type of error (string, Error, etc.)\n   */\n  pushError(error) {\n    // TODO we need to add tests for this.\n    this._errors = this._errors || [];\n    this.errors.push(error);\n  }\n\n  /**\n   * Internal done called by a handling Ringa.Controller. Note that since multiple Controllers can handle a single\n   * event we have to listen for when all the handling Controllers have been completed before announcing we are, indeed,\n   * done.\n   *\n   * @param controller The Controller that is announcing it is done.\n   * @private\n   */\n  _done(controller) {\n    if (__DEV__ && !controller) {\n      throw new Error('RingaEvent::_done(): controller is not defined!');\n    }\n\n    this._uncatch(controller);\n\n    this.addDebug('Done');\n\n    // TODO add unit tests for multiple handling controllers and make sure all possible combinations work (e.g. like\n    // one controller fails and another succeeds.\n    if (this.catchers.length === 0) {\n      if (this.errors && this.errors.length) {\n        this._dispatchEvent(RingaEvent.FAIL, undefined, error);\n      } else {\n        this._dispatchEvent(RingaEvent.DONE);\n      }\n    }\n  }\n\n  /**\n   * Each RingaEvent is itself a dispatcher. This is the internal method that should be called to announce an event to\n   * things that are listening to this event. Note this is not to be confused with dispatch() which dispatches this event\n   * on a bus.\n   *\n   * @param type Event type.\n   * @param detail Details.\n   * @param error And error, if there is one.\n   * @private\n   */\n  _dispatchEvent(type, detail, error, kill) {\n    let listeners = this.listeners[type];\n\n    this.dispatchedEvents.push({\n      type,\n      detail,\n      error\n    });\n\n    if (listeners) {\n      listeners.forEach((listener) => {\n        listener({\n          type,\n          detail,\n          error,\n          kill\n        });\n      });\n    }\n  }\n\n  /**\n   * Add a listener for either RingaEvent.DONE or RingaEvent.FAIL for when the CommandThread that\n   * was triggered by this event has completed.\n   *\n   * @param eventType\n   * @param handler\n   */\n  addListener(eventType, handler) {\n    if (__DEV__ && typeof eventType !== 'string') {\n      throw Error('RingaEvent::addListener(): invalid eventType provided!' + eventType);\n    }\n\n    this.listeners[eventType] = this.listeners[eventType] || [];\n\n    if (this.listeners[eventType].indexOf(handler) !== -1) {\n      throw Error('RingaEvent::addListener(): the same function was added as a listener twice');\n    }\n\n    this.listeners[eventType].push(handler);\n\n    this.dispatchedEvents.forEach(_dispatched => {\n      if (_dispatched.type === eventType) {\n        handler(_dispatched);\n      }\n    });\n\n    return this;\n  }\n\n  /**\n   * Listen for when every single Thread that is triggered by this event is done.\n   *\n   * @param handler A function callback.\n   * @returns {*}\n   */\n  addDoneListener(handler) {\n    // TODO add unit tests for multiple controllers handling a thread\n    return this.addListener(RingaEvent.DONE, () => {\n      let argNames = getArgNames(handler);\n      let args = buildArgumentsFromRingaEvent(undefined, argNames, this);\n      handler.apply(undefined, args);\n    });\n  }\n\n  /**\n   * Listen for when any thread triggered by this event has a failure.\n   *\n   * @param handler A function callback.\n   *\n   * @returns {*}\n   */\n  addFailListener(handler) {\n    // TODO add unit tests for multiple controllers handling a thread\n    return this.addListener(RingaEvent.FAIL, handler);\n  }\n\n  /**\n   * Treat this event like a Promise, in that when it has completed all its triggered threads, it will call resolve or\n   * when any thread has a failure, it will call reject.\n   *\n   * @param resolve A function to call when all triggered threads have completed.\n   * @param reject A function to call when any triggered thread has a failure.\n   */\n  then(resolve, reject) {\n    // TODO need to add resolution if then is added AFTER the event has already completed!\n    if (resolve) {\n      this.addDoneListener(resolve);\n    }\n\n    if (reject) this.addFailListener(reject);\n\n    return this;\n  }\n\n  /**\n   * Treat this event like a Promise. Catch is called when any triggered thread has a failure.\n   *\n   * @param reject A function to call when any triggered thread has a failure.\n   */\n  catch(reject) {\n    // TODO need to add resolution if then is added AFTER the event has already completed!\n\n    this.addFailListener(reject);\n\n    return this;\n  }\n\n  /**\n   * Outputs a pretty-printed outline of the entire state of all threads this event has triggered, every executor and its\n   * current state (NOT STARTED, RUNNING, DONE, or FAILED).\n   *\n   * @returns {string} A string of all the data, pretty printed.\n   */\n  toDebugString() {\n    return ringaEventToDebugString(this);\n  }\n\n  /**\n   * Converts this event to a pretty string with basic information about the event.\n   *\n   * @returns {string}\n   */\n  toString() {\n    return `${this.id}['${this.type}' caught by ${this._controllers ? this._controllers.toString() : 'nothing yet.'} ] `;\n  }\n\n  /**\n   * Add a debugging message to this RingaEvent for when a user sets RingaEvent::detail.debug to true OR\n   * a numeric level value.\n   *\n   * @param message The message to output.\n   * @param level The numeric level of the message. Default is 0.\n   */\n  addDebug(message, level = 0) {\n    if (this.debug === undefined) {\n      return;\n    }\n\n    if (typeof this.debug === 'number') {\n      if (level <= this.debug) {\n        return;\n      }\n    }\n\n    let obj = {\n      timestamp: new Date(),\n      stack: ErrorStackParser.parse(new Error()),\n      message: message\n    };\n\n    console.log(`[RingaEvent '${this.type}' Debug] ${message}`, obj);\n\n    this.detail.$debug = this.detail.$debug || [];\n    this.detail.$debug.push(message);\n  }\n\n  /**\n   * A controller output of the most relevant features of this RingaEvent. Useful for console display.\n   *\n   * @returns {{type: *, detail: ({}|*), controllers: Array, bubbles: *, dispatchStack: (*|string), fullEvent: RingaEvent}}\n   */\n  debugDisplay() {\n    return {\n      type: this.type,\n      detail: this.detail,\n      controllers: this.catchers,\n      bubbles: this.bubbles\n    };\n  }\n}\n\nRingaEvent.DONE = 'done';\nRingaEvent.FAIL = 'fail';\nRingaEvent.PREHOOK = 'prehook';\n\nexport default RingaEvent;\n\n\n\n// WEBPACK FOOTER //\n// ./src/RingaEvent.js","import Controller from '../Controller';\nimport InspectorModel from './InspectorModel';\nimport {ringaGlobalBus} from '../Bus';\n\nexport function inspectorDispatch(eventType, detail) {\n  /**\n   * do NOT require catch, in case the user is not using the Inspector\n   */\n  ringaGlobalBus.dispatch(eventType, detail, false);\n}\n\nexport default class InspectorController extends Controller {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  constructor(name) {\n    super(name, ringaGlobalBus);\n\n    console.log('Ringa Inspector is turned on because you have attached the InspectorController in your application. THIS WILL GREATLY REDUCE PERFORMANCE. Make sure to remove the InspectorController in your final production build! Using the global bus: ', this.bus);\n\n    if (__DEV__) {\n      /**\n       * We don't want this controller to also dispatch the events or else we will end up with an infinite loop of dispatches\n       * which will entirely crash the browser. This MUST be set to true in the InspectorController!\n       */\n      this.__blockRingaEvents = true;\n\n      this.addModel(new InspectorModel());\n\n      this.addListener('ringaThreadStart', (inspectorModel, thread) => {\n        inspectorModel.addThread(thread);\n      });\n\n      this.addListener('ringaThreadKill', (inspectorModel, thread) => {\n        inspectorModel.removeThread(thread);\n      });\n\n      this.addListener('ringaExecutorStart', (inspectorModel, executor) => {\n        inspectorModel.addExecutor(executor);\n      });\n\n      this.addListener('ringaExecutorEnd', (inspectorModel, executor) => {\n        inspectorModel.removeExecutor(executor);\n      });\n    }\n  }\n\n  get bus() {\n    return super.bus;\n  }\n\n  set bus(value) {\n    if (value !== ringaGlobalBus) {\n      return;\n    }\n\n    super.bus = value;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/debug/InspectorController.js","module.exports = require('./src/HashArray.js');\n\n\n// WEBPACK FOOTER //\n// ./~/hasharray/index.js","import Bus from './Bus';\nimport TrieSearch from 'trie-search';\n\nwindow.$ModelNotifications = {\n  watchers: 0,\n  modelWatchers: 0\n};\n\nwindow.$ModelNameToConstructorMap = {};\n\n/**\n * Serialize a Ringa Model object to a POJO by iterating over properties recursively on any\n * descendent Model instances.\n *\n * @param model\n * @param pojo\n * @returns {*|{}}\n * @private\n */\nlet _serialize = function (model, pojo, options) {\n  pojo = pojo || {};\n\n  let props = model.serializeProperties || model.properties;\n\n  props = props.filter(prop => (!model.propertyOptions[prop] || model.propertyOptions[prop].serialize !== false));\n\n  props.forEach(key => {\n    let obj;\n\n    let o = model.propertyOptions[key];\n\n    if (o && o.preSerialize) {\n      obj = o.preSerialize(options);\n    } else {\n      obj = model[key];\n    }\n\n    if (obj instanceof Array) {\n      let newArr = [];\n\n      obj.forEach(item => {\n        newArr.push(item instanceof Model ? item.serialize() : item);\n      });\n\n      pojo[key] = newArr;\n    } else if (obj instanceof Model) {\n      pojo[key] = obj.serialize(options);\n    } else {\n      pojo[key] = obj;\n    }\n\n    if (o && o.postSerialize) {\n      o.postSerialize(options);\n    }\n  });\n\n  if (model.postSerialize) {\n    model.postSerialize(pojo, options);\n  }\n\n  return pojo;\n};\n\n/**\n * A Ringa Model provides functionality to watch lightweight event signals (just strings) and notify listeners when those events occur.\n * The event signals are designed by default to be correlated with properties changing, but technically could be used for anything.\n */\nclass Model extends Bus {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructs a new model.\n   *\n   * @param name The name of this model for injection.\n   * @param values A POJO of default values to assign to the properties in this Model.\n   */\n  constructor(name, values) {\n    if (typeof name !== 'string' && values === undefined) {\n      values = name;\n      name = undefined;\n    }\n\n    super(name, (values && values.id) ? values.id : undefined);\n\n    this.properties = [];\n    this.propertyOptions = {};\n    this._values = values;\n    this._modelWatchers = [];\n    this.watchers = [];\n    this.childIdToRef = {};\n    this.$version = undefined; // Used when something is deserialized\n\n    window.$ModelNameToConstructorMap[this.constructor.name] = this.constructor;\n  }\n\n  //-----------------------------------\n  // Properties\n  //-----------------------------------\n  get idPath() {\n    return this.parentModel ? `${this.parentModel.idPath}.${this.id}` : this.id;\n  }\n\n  set serializeId(value) {\n    this.id = value;\n  }\n\n  get serializeId() {\n    return this._id;\n  }\n\n  set serializeName(value) {\n    this.name = value;\n  }\n\n  get serializeName() {\n    return this._name;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  /**\n   * Serialize this model object for each property\n   */\n  serialize(options = {useRingaDefaults: false}) {\n    let pojo = !options.useRingaDefaults ? {\n        id: this.serializeId\n      } : {\n        $Model: this.constructor.name,\n        $version: this.constructor.version,\n        $name: this.serializeName,\n        id: this.serializeId\n      };\n\n    _serialize(this, pojo, options);\n\n    return pojo;\n  }\n\n  /**\n   * Add a ModelWatcher as a parent watcher of this Model. Each Model can be watched by any number of ModelWatchers.\n   *\n   * @param modelWatcher The ModelWatcher to add.\n   */\n  addInjector(modelWatcher) {\n    if (__DEV__ && this._modelWatchers.indexOf(modelWatcher) !== -1) {\n      throw new Error(`Model::addInjector(): tried to add the same injector to a model twice! ${this.id}`)\n    }\n\n    this._modelWatchers.push(modelWatcher);\n  }\n\n  /**\n   * Send a signal to all watchers.\n   *\n   * @param signal Generally a path to a property that has changed in the model.\n   */\n  notify(signal, signaler, value, descriptor) {\n    // If item isn't specified someone might just be triggering a signal themselves manually. So\n    // we try to figure out what the property is ourselves.\n    if (!signaler) {\n      value = this[signal];\n      descriptor = descriptor || (this.propertyOptions[signal] ? this.propertyOptions[signal].descriptor : undefined);\n      signaler = this;\n    }\n\n    // Notify all view objects through all injectors\n    this._modelWatchers.forEach(mi => {\n      mi.notify(this, signal, signaler, value, descriptor);\n      window.$ModelNotifications.modelWatchers++;\n    });\n\n    this.watchers.forEach(handler => {\n      handler(signal, signaler, value, descriptor);\n      window.$ModelNotifications.watchers++;\n    });\n  }\n\n  /**\n   * Watch this model for any notify signals.\n   *\n   * @param handler The function to call when a notify signal is sent.\n   */\n  watch(handler) {\n    // TODO add ability to watch specific signals\n    if (this.watchers.indexOf(handler) === -1) {\n      this.watchers.push(handler);\n    }\n  }\n\n  /**\n   * Watch this model and wait for a condition to be a true, then call the handler.\n   *\n   * @param condition\n   * @param handler\n   * @param autoUnwatch\n   */\n  watchUntil(condition, handler, autoUnwatch = true) {\n    let fn = (signal, signaler, value, descriptor) => {\n      if (condition(this, signal, signaler, value, descriptor)) {\n        if (autoUnwatch) {\n          this.unwatch(fn);\n        }\n\n        handler(this, signal, signaler, value, descriptor);\n\n        return true;\n      }\n\n      return false;\n    };\n\n    if (condition(this)) {\n      handler(this);\n\n      if (autoUnwatch) {\n        return;\n      }\n    }\n\n    this.watch(fn);\n  }\n\n  /**\n   * Unwatch from the specified handler\n   *\n   * @param handler\n   */\n  unwatch(handler) {\n    let ix = this.watchers.indexOf(handler);\n\n    if (ix !== -1) {\n      this.watchers.splice(ix, 1);\n    }\n  }\n\n  getChangeDescriptor(propertyName, oldValue, newValue) {\n    if (this.propertyOptions[propertyName].descriptor) {\n      if (typeof this.propertyOptions[propertyName].descriptor === 'function') {\n        return this.propertyOptions[propertyName].descriptor(oldValue, newValue);\n      }\n\n      return this.propertyOptions[propertyName].descriptor;\n    }\n\n    return undefined;\n  }\n\n  /**\n   * Add a property to this model that by default does its own notifications to ModelWatcher and verifies that if the\n   * value has not changed (strict reference compare A === B) then it won't notify and spam the ModelWatcher.\n   *\n   * If you want to do a custom shallow or deep compare on changes, you should provide your own custom setter.\n   *\n   * For reference, the default setter template is:\n   *\n   *  set ${name} (value) {\n   *    if (this._${name} === value) {\n   *      return;\n   *    }\n   *\n   *    this._${name} = value;\n   *\n   *    this.notify('${name}');\n   *  }\n   *\n   * @param name The name of the property. By default, a \"private\" property with a prefixed underscore is created to hold the data.\n   * @param defaultValue The default value of the property.\n   * @param options Options can be:\n   *\n   *   -get: a getter function\n   *   -set: a setter function\n   *\n   *   Anything else will be saved as metadata to the value `_${name}Options`.\n   */\n  addProperty(name, defaultValue, options = {}) {\n    let subScriptName = `_${name}`;\n\n    let defaultGet = function() {\n      return this[subScriptName];\n    };\n\n    //-----------------------------------\n    // defaultSet\n    //-----------------------------------\n    let defaultSet = function(value) {\n      const oldValue = this[subScriptName];\n\n      // TODO: add custom comparison options function\n      if (oldValue === value) {\n        return;\n      }\n\n      // Clear old child model\n      if (oldValue && oldValue instanceof Model && oldValue.parentModel === this) {\n        this.removeModelChild(oldValue);\n      }\n\n      this[subScriptName] = value;\n\n      // Update new child model\n      if (value && value instanceof Model) {\n        this.addModelChild(name, value);\n      }\n\n      let po = this.propertyOptions[name];\n\n      let onChange = po.onChange;\n      let doNotNotify = po.doNotNotify;\n      let skipNotify = false;\n\n      if (onChange) {\n        skipNotify = onChange(oldValue, value);\n      }\n\n      if (this.propertyChange) {\n        this.propertyChange(name, oldValue, value);\n      }\n\n      if (!this.deserializing && !skipNotify && !doNotNotify) {\n        this.notify(name, this, value, this.getChangeDescriptor(name, oldValue, value));\n      }\n    };\n\n    Object.defineProperty(this, name, {\n      get: options.get || defaultGet,\n      set: options.set || defaultSet\n    });\n\n    delete options.get;\n    delete options.set;\n\n    this.propertyOptions[name] = options;\n\n    if (this._values && this._values[name] !== undefined) {\n      this[name] = this._values[name];\n    } else {\n      this[name] = defaultValue;\n    }\n\n    this.properties.push(name);\n\n    if (options.index) {\n      this.indexProperties = this.indexProperties || [];\n      this.indexProperties.push(name);\n    }\n\n    return this[name];\n  }\n\n  /**\n   * Adds a child model, setting up the appropriate tree for watch/notify notifications.\n   *\n   * @param propertyName The propertyName that this child belongs to.\n   * @param child The child Model instance.\n   */\n  addModelChild(propertyName, child) {\n    if (this.childIdToRef[child.id]) {\n      this.removeModelChild(child);\n    }\n\n    if (this.propertyOptions[propertyName].setParentModel !== false) {\n      if (child.parentModel && child.parentModel !== this) {\n        throw new Error(`Model::addModelChild(): ${child.name} already has a parentModel!`);\n      }\n\n      child.parentModel = this;\n    }\n\n    if (this.propertyOptions[propertyName].autoWatch !== false) {\n      let watchHandler = (function (propertyName, signal, item, value, descriptor) {\n        this.notify(`${propertyName}.${signal}`, item, value, descriptor);\n      }).bind(this, propertyName);\n\n      child.watch(watchHandler);\n\n      this.childIdToRef[child.id] = {\n        watchHandler,\n        propertyName\n      };\n    }\n  }\n\n  /**\n   * Remove a model child from the Model tree, safely removing the watcher.\n   *\n   * @param child The Model child.\n   */\n  removeModelChild(child) {\n    let ref = this.childIdToRef[child.id];\n\n    if (this.propertyOptions[ref.propertyName].setParentModel !== false) {\n      child.parentModel = undefined;\n    }\n\n    if (this.propertyOptions[ref.propertyName].autoWatch !== false) {\n      child.unwatch(ref.watchHandler);\n\n      delete this.childIdToRef[child.id];\n    }\n  }\n\n  /**\n   * Just like addProperty, except explicitly sets the index option to true.\n   *\n   * @param name The name of the property. By default, a \"private\" property with a prefixed underscore is created to hold the data.\n   * @param defaultValue The default value of the property.\n   * @param options See addProperty for details.\n   */\n  addIndexedProperty(name, defaultValue, options = {}) {\n    options = Object.assign({}, {\n      index: true\n    }, options);\n\n    return this.addProperty(name, defaultValue, options);\n  }\n\n  /**\n   * Recursively performs a deep clone of this object and all items that were added with addProperty().\n   *\n   * @param parentModel Used to set the parentModel property when doing a clone.\n   */\n  clone(options = {cloneId: false}) {\n    let newInstance = new (this.constructor)(this.name, {\n      id: options.cloneId ? this.id : undefined\n    });\n\n    newInstance.propertyOptions = this.propertyOptions;\n\n    let _clone = (propName, obj) => {\n      if (obj === null) {\n        return null;\n      } else if (obj === undefined) {\n        return undefined;\n      }\n      if (obj instanceof Array) {\n        return obj.map(_clone.bind(undefined, propName));\n      } else if (obj instanceof Model) {\n        // Make sure we set the parentModel, which is our newInstance!\n        let childModel = obj.clone(options);\n\n        if (childModel instanceof Model) {\n          newInstance.addModelChild(propName, childModel);\n        }\n\n        return childModel;\n      } else if (typeof obj === 'object' && obj.hasOwnProperty && obj.hasOwnProperty('clone')) {\n        return obj.clone(newInstance);\n      } else if (typeof obj === 'object') {\n        let newObj = {};\n        for (let key in obj) {\n          if (obj.hasOwnProperty(key)) {\n            newObj[key] = _clone(propName, obj[key]);\n          }\n        }\n        return newObj;\n      }\n\n      return obj;\n    };\n\n    this.properties.forEach(propName => {\n      let newObj;\n\n      if (this.propertyOptions[propName].clone) {\n        newObj = this.propertyOptions[propName].clone(this[propName]);\n      } else {\n        newObj = _clone(propName, this[propName]);\n      }\n\n      newInstance[propName] = newObj;\n    });\n\n    return newInstance;\n  }\n\n  /**\n   * Uses a trie-search to (optionally recursively) index every property that has index set to true (or was added with addIndexedProperty)\n   *\n   * Returns the TrieSearch instance.\n   */\n  index(recurse = false, trieSearchOptions = {}, trieSearch = undefined) {\n    trieSearch = trieSearch || new TrieSearch(undefined, Object.assign(trieSearchOptions, {\n        keepAll: true,\n        keepAllKey: 'id'\n      }));\n\n    trieSearch.visitedById = trieSearch.visitedById || {};\n\n    if (trieSearch.visitedById[this.id]) {\n      return;\n    }\n\n    trieSearch.visitedById[this.id] = true;\n\n    let _add = function(model, trieSearch, prop, obj) {\n      if (typeof obj === 'object' && obj !== null && obj.indexValue) {\n        trieSearch.map(obj.indexValue, model);\n      } else if (obj && obj.toString() !== '') {\n        trieSearch.map(obj.toString(), model);\n      }\n    };\n\n    let _recurse = (obj) => {\n      if (obj instanceof Array) {\n        obj.forEach(_recurse);\n      } else if (obj instanceof Model) {\n        obj.index(recurse, trieSearchOptions, trieSearch);\n      }\n    };\n\n    if (this.indexProperties) {\n      this.indexProperties.forEach(prop => _add(this, trieSearch, prop, this[prop]));\n    }\n\n    if (recurse) {\n      this.properties.forEach(prop => _recurse(this[prop]));\n    }\n\n    return trieSearch;\n  }\n\n  /**\n   * Deserializes POJO data directly into this object.\n   */\n  deserialize(pojo, options = {}) {\n    this.constructor.deserialize(pojo, Object.assign(options, {\n      instance: this,\n      ignore$Model: true\n    }));\n  }\n}\n\nModel.version = '0.0.0'; // This can be customized for serialization and deserialization\n\nModel.isDeserializable = function (pojo, options = {}) {\n  options.ignore$Model = options.ignore$Model !== undefined ? options.ignore$Model : true;\n\n  if (!options.ignore$Model) {\n    if (!pojo.$Model && !options.modelMapper) {\n      console.error('Model.isDeserializable: could not deserialize object because it does not contain the $Model property or does not contain options.modelMapper', pojo);\n      return false;\n    } else if (pojo.$Model && !window.$ModelNameToConstructorMap[pojo.$Model]) {\n      console.error(`Model.isDeserializable: could not deserialize object because $Model property of '${pojo.$Model}' did not reference a valid model.`, pojo);\n      return false;\n    }\n  }\n\n  return true;\n};\n\nModel.getModelClassByName = function (name) {\n  return window.$ModelNameToConstructorMap[name];\n};\n\n/**\n * Deserializes this object from a POJO only updating properties added with addProperty.\n *\n * @param values\n */\nModel.deserialize = function(pojo, options = {}) {\n  if (!Model.isDeserializable(pojo, options)) {\n    return undefined;\n  }\n\n  let construct = function(ModelClass) {\n    if (!ModelClass) {\n      console.error('Could not deserialize due to inability to find a matching model: ', pojo, options);\n      return Model;\n    }\n\n    // Is there a custom deserialize method?\n    if (ModelClass.deserialize && ModelClass.deserialize !== Model.deserialize) {\n      return ModelClass.deserialize(pojo, options);\n    }\n\n    if (pojo.id) {\n      return new (ModelClass)({\n        id: pojo.id\n      });\n    }\n\n    return new (ModelClass)();\n  };\n\n  let _deserializePOJOValue = (parent, parentKey, value) => {\n    if (value instanceof Array) {\n      return value.map(_deserializePOJOValue.bind(undefined, parent, parentKey));\n    } else if (typeof value === 'object') {\n      // Three ways to figure out the type of Model:\n      // 1) If the POJO contains a $Model key, which will contain a string of the Ringa classname\n      // 2) If some specified the model in addProperty('blah', {}, {type: SomeModel})\n      // 3) If the options passed into deserialize contain a modelMapper function to inspect the POJO and\n      //    return the model type based on inspection.\n      if (value.hasOwnProperty('$Model') && !options.ignore$Model) {\n        return Model.getModelClassByName(value.$Model).deserialize(value, options);\n      } else if (parent.propertyOptions[parentKey].type) {\n        let type = parent.propertyOptions[parentKey].type;\n        let Clazz;\n\n        if (type.prototype instanceof Model) {\n          Clazz = type;\n        } else {\n          Clazz = type(parent, parentKey, value);\n        }\n\n        return Clazz.deserialize(value, Object.assign(options, {\n          model: Clazz\n        }));\n      } else if (options.modelMapper) {\n        let PossibleModel = options.modelMapper(value, options);\n\n        if (PossibleModel !== value) {\n          if (!PossibleModel || !PossibleModel.deserialize) {\n            console.error(`Model.options.modelMapper: could not deserialize because provided modelMapper returned a model with no deserialize method.`)\n            console.error(`ModelMapper: ${options.modelMapper}`);\n            console.error(`Value to deserialize:`, value);\n            console.error(`PossibleModel:`, PossibleModel);\n          }\n          return PossibleModel.deserialize(value, Object.assign(options, {\n            model: PossibleModel\n          }));\n        }\n\n        return PossibleModel;\n      }\n    }\n\n    return value;\n  };\n\n  let newInstance;\n\n  if (!options.instance) {\n    let ModelClass;\n\n    if (pojo.$Model && !options.ignore$Model) {\n      ModelClass = Model.getModelClassByName(pojo.$Model);\n    } else if (options.model) {\n      ModelClass = options.model;\n\n      // Make sure we don't pollute subsequent calls with the model object! Since options.model is temporary\n      // just for this first deserialize call.\n      delete options.model;\n    } else if (options.modelMapper) {\n      ModelClass = options.modelMapper(pojo);\n\n      if (ModelClass === pojo) {\n        return ModelClass;\n      }\n    }\n\n    newInstance = construct(ModelClass);\n  } else {\n    newInstance = options.instance;\n\n    // Make sure we don't pollute subsequent calls with the instance in our root deserialize call! Since options.instance is temporary\n    // just for this first deserialize call.\n    delete options.instance;\n  }\n\n  newInstance.deserializing = true;\n  newInstance.$version = pojo.$version;\n\n  let properties = newInstance.properties.filter(key => {\n    return !newInstance.propertyOptions[key] || newInstance.propertyOptions[key].serialize !== false;\n  });\n\n  properties.forEach(key => {\n    if (pojo.hasOwnProperty(key)) {\n      let t = typeof pojo[key];\n      let v = pojo[key];\n\n      if (t === 'string' || t === 'number' || v === undefined || v === null) {\n        newInstance[key] = v;\n      } else {\n        newInstance[key] = _deserializePOJOValue(newInstance, key, v);\n      }\n    }\n  });\n\n  newInstance.deserializing = false;\n\n  newInstance.$deserializedObject = pojo;\n\n  if (newInstance.postDeserialize) {\n    newInstance.postDeserialize(pojo, options);\n  }\n\n  return newInstance;\n};\n\nModel.construct = function(className, propertyArray) {\n  //--------------------------------------------------\n  // KEEP THIS CODE\n  //--------------------------------------------------\n  let clazz = class M extends Model {\n    static get name() {\n      return className;\n    }\n\n    constructor(name, values) {\n      super(name, values);\n\n      for (let key in propertyArray) {\n        let v = propertyArray[key];\n\n        if (typeof v === 'string') {\n          this.addProperty(v);\n        } else {\n          let d = v.default;\n\n          if (typeof d === 'function') {\n            d = d();\n          } else if (d instanceof Array) {\n            d = d.concat();\n          } else if (__DEV__ && typeof d === 'object') {\n            console.warn('Model: note that defaults that are Objects when using Model.construct() will be shared across all instances!');\n          }\n\n          this.addProperty(v.name, d, v.options);\n        }\n      }\n    }\n  };\n\n  /**\n   * By using a generic function that is closured for our class, we unfortunately cannot compare classes by string. So in react-ringa our depend\n   * will just use $ringaClassName if it exists.\n   */\n  clazz.$ringaClassName = className;\n\n  return clazz;\n};\n\nexport default Model;\n\n\n// WEBPACK FOOTER //\n// ./src/Model.js","import dateformat from 'dateformat';\nimport {injectionInfo} from './executors';\nimport {ids} from '../RingaObject';\n\nexport function now() {\n  return new Date();\n}\n\nexport function format(date) {\n  if (!date) {\n    return '?';\n  }\n\n  return dateformat(date, 'hh:mm:ss');\n}\n\n/**\n * Generates a state tree of the process tree that this event has invoked at the state of this being called.\n *\n * Type: 1 [Event]\n *       2 [Controller]\n *       3 [Thread]\n *       4 [Executor]\n *       0 [Metadata]\n * @private\n */\nexport function ringaEventToDebugString(ringaEvent) {\n  let thread = ringaEvent.thread;\n  let controller = ringaEvent.controller;\n  let out = '';\n\n  // Unfortunately because the state is not a \"tree\" we cannot generate this using\n  // recursion, which would be much more elegant\n  out += `${ringaEvent.id} ${ringaEvent.dispatched ? 'dispatched' : ''}\\n`;\n\n  if (controller) {\n    out += `  ${controller.id}`;\n\n    if (thread) {\n      out += `    ${thread.id}`;\n\n      thread._list.forEach(command => {\n        out += `      ${command.id} [${format(command.startTime)} - ${format(command.endTime)}]\\n`;\n      });\n    }\n  } else {\n    out += '  not yet caught.\\n';\n  }\n\n  return out;\n}\n\nexport function injectionNames() {\n  return Object.keys(injectionInfo.byName);\n}\n\nexport function constructorNames() {\n  return Object.keys(ids.constructorNames);\n}\n\nexport function uglifyWhitelist() {\n  return JSON.stringify(injectionNames().concat(constructorNames()).sort());\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/debug.js","import ThreadFactory from './ThreadFactory';\nimport RingaObject from './RingaObject';\nimport HashArray from 'hasharray';\nimport RingaEvent from './RingaEvent';\nimport ModelWatcher from './ModelWatcher';\nimport {inspectorDispatch} from './debug/InspectorController';\nimport {ringaGlobalBus} from './Bus';\nimport snakeCase from 'snake-case';\nimport {buildArgumentsFromRingaEvent} from './util/executors';\nimport {getArgNames} from './util/function';\n\n/**\n * Controller is the hub that links event types through a bus (e.g. a DOM node) to an async executor tree.\n */\nclass Controller extends RingaObject {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructs a new controller.\n   *\n   * @param id The id of this controller, primarily used for internal hashes and debugging. Must be unique.\n   * @param bus The native browser DOMNode element (not a React Node) to attach event listeners to OR a custom event bus.\n   * @param options See documentation on Controller options. Defaults are provided, so this is optional.\n   */\n  constructor(name, bus, options) {\n    super(name);\n\n    // We want to error if bus is defined but is not actually a bus.\n    // If Bus is an object, though, and options is undefined, this means\n    // the user is probably doing this:\n    // new Controller('id', {options: true});\n    // And skipping providing a bus, and that is okay.\n    if (bus && !(typeof bus.addEventListener === 'function')) {\n      if (__DEV__ && options) {\n        throw Error('Controller(): invalid bus or DOM node passed into constructor!');\n      }\n\n      options = bus;\n    }\n\n    this.bus = bus;\n    this.modelWatcher = undefined;\n\n    this.options = options || {};\n    this.options.timeout = this.options.hasOwnProperty('timeout') ? this.options.timeout : 10000;\n    this.options.throwKillsThread = this.options.throwKillsThread === undefined ? true : this.options.throwKillsThread;\n    this.options.consoleLogFails = this.options.consoleLogFails === undefined ? true : this.options.consoleLogFails;\n    this.options.injections = this.options.injections || {};\n    this.options.warnOnDetailOverwrite = this.options.warnOnDetailOverwrite === undefined ? false : this.options.warnOnDetailOverwrite;\n    this.options.killOnErrorHandler = this.options.killOnErrorHandler === undefined ? this.killOnErrorHandler : this.options.killOnErrorHandler;\n\n    this.threads = new HashArray('id');\n\n    this.eventTypeToThreadFactory = new Map();\n    this.eventTypeToWatchers = new Map();\n    this.watcherToArgNames = new Map();\n\n    this._eventHandler = this._eventHandler.bind(this);\n  }\n\n  //-----------------------------------\n  // Properties\n  //-----------------------------------\n  get injections() {\n    return this.options.injections;\n  }\n\n  set bus(value) {\n    // If someone tries to reset the same bus, just ignore it because it would be dumb to detach all the listeners\n    // and reattach them.\n    if (this._bus === value) {\n      return;\n    }\n\n    // If we are switching busses, we need to remove the listeners from the old bus\n    if (this._bus) {\n      this.detachAllListeners();\n    }\n\n    this._bus = value;\n\n    // If the developer has called to attach previous listeners we need to make sure all of those\n    // get attached now to our new bus.\n    if (this._bus) {\n      this.attachAllListeners();\n\n      // We want to wait here. The reason is that if someone dispatches an event in the busMounted section\n      // we want to make sure that all other Controllers within the same context in the dom have also\n      // had time to mount before secondary events might be dispatched.\n      setTimeout(() => {\n        this.busMounted(this.bus);\n      }, 0);\n    }\n  }\n\n  get bus() {\n    return this._bus;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  /**\n   * Special method that attaches a model to this Controller through a ModelWatcher.\n   *\n   * At the time this was built, it was only functional to support injection for the react-ringa project and dependency\n   * injection.\n   *\n   * If no internal ModelWatcher exists, the Controller builds one and then adds the model to that watcher.\n   *\n   * This method also adds the model as an injection by the models id to be available to all executors.\n   *\n   * @param model An instance that must be an extension of the Ringa.Model class.\n   * @parma injectionId A custom name to use for the injection id if you don't want to use the default one on the Model.\n   */\n  addModel(model, injectionId = undefined) {\n    if (!this.modelWatcher) {\n      this.modelWatcher = new ModelWatcher(this.id + '_ModelWatcher');\n    }\n\n    this.modelWatcher.addModel(model, injectionId);\n\n    this.injections[injectionId || model.id] = model;\n    this.injections[model.name] = model;\n\n    return model;\n  }\n\n  /**\n   * Remove a model that was previously added.\n   *\n   * @param model The model to be removed.\n   */\n  removeModel(model) {\n    this.modelWatcher.removeModel(model, injectionId);\n\n    delete this.injections[injectionId || model.id];\n  }\n\n  /**\n   * Called when there is safely an event bus to attach events to. This is where you could redispatch certain initialization\n   * events.\n   */\n  busMounted(bus) {\n    // To be overridden\n  }\n\n  /**\n   * Takes in a series of event types and converts them to static properties on the parent class.\n   *\n   * For example:\n   *\n   *   controller = new MyController();\n   *   controller.addEventTypeStatics(['my event', 'otherEvent', 'YAY']);\n   *\n   *   MyController.MY_EVENT === 'my event';\n   *   MyController.OTHER_EVENT = 'otherEvent'\n   *   MyController.YAY = 'YAY;\n   *\n   * @param types An array of event types.\n   */\n  addEventTypeStatics(types) {\n    types.forEach(type => {\n      let TYPE_SNAKE_CASE = snakeCase(type).toUpperCase();\n\n      if (this.constructor[TYPE_SNAKE_CASE]) {\n        return;\n      }\n\n      this.constructor[TYPE_SNAKE_CASE] = this[TYPE_SNAKE_CASE] = type;\n    });\n  }\n\n  /**\n   * Returns the ThreadFactory associated with the provided eventType.\n   *\n   * @param eventType The event type - a String.\n   * @returns {ThreadFactory} The ThreadFactory associated with the eventType.\n   */\n  getThreadFactoryFor(eventType) {\n    return this.eventTypeToThreadFactory[eventType];\n  }\n\n  /**\n   * Listens for the event type on the attached event bus (or DOM node) and runs the provided executor or async tree.\n   *\n   * See online documentation for more details.\n   *\n   * @param eventType The event type, expected to be a String.\n   * @param executor A single executor (function, event type, Promise, Ringa Command) or an array of these.\n   * @param useCapture True if you want to use capture to listen to the event.\n   * @returns {*} The ThreadFactory instance that will be run when the event is received.\n   */\n  addListener(eventType, executor, useCapture) {\n    let threadFactory;\n\n    if (__DEV__ && arguments[2] && typeof arguments[2] !== 'boolean') {\n      throw Error(`Controller::addListener(): you provided a third argument which was not a boolean for useCapture (was ${useCapture}). This does nothing and probably means you forgot to wrap your second executor in an array.`);\n    }\n\n    if (executor && !(executor instanceof ThreadFactory) && !(executor instanceof Array)) {\n      executor = [executor];\n    }\n\n    if (!executor || executor instanceof Array) {\n      threadFactory = new ThreadFactory(this.id + '_' + eventType + '_ThreadFactory', executor);\n    } else if (executor instanceof ThreadFactory) {\n      threadFactory = executor;\n    } else if (__DEV__) {\n      throw Error('Controller::addListener(): the provided executor is not valid! Did you forget to wrap in []?');\n    }\n\n    if (__DEV__ && !threadFactory || !(threadFactory instanceof ThreadFactory)) {\n      throw Error('Controller::addListener(): threadFactory not an instance of ThreadFactory');\n    }\n\n    if (__DEV__ && threadFactory.controller) {\n      throw Error('Controller::addListener(): threadFactory cannot have two parent controllers!');\n    }\n\n    if (__DEV__ && this.eventTypeToThreadFactory[eventType]) {\n      throw Error('Controller.addListener(): the event \\'' + eventType + '\\' has already been added! Use getThreadFactoryFor() to make modifications.');\n    }\n\n    this.addEventTypeStatics([eventType]);\n\n    threadFactory.controller = this;\n\n    this.eventTypeToThreadFactory[eventType] = threadFactory;\n\n    this._attachListenerToBus(eventType, useCapture);\n\n    return threadFactory;\n  }\n\n  _attachListenerToBus(eventType, useCapture) {\n    if (!this.bus) {\n      return; // We will be attached once the bus comes in to the station.\n    }\n\n    if (typeof eventType === 'string') {\n      this.bus.addEventListener(eventType, this._eventHandler, useCapture);\n    } else {\n      let _eventType = undefined;\n\n      if (eventType.hasOwnProperty('toString')) {\n        _eventType = eventType.toString();\n      }\n\n      if (_eventType) {\n        this.bus.addEventListener(_eventType, this._eventHandler.bind(this));\n      } else {\n        throw Error('Controller::addListener(): provided eventType is invalid.', eventType);\n      }\n    }\n  }\n\n  removeAllListeners() {\n    for (let eventType in this.eventTypeToThreadFactory) {\n      this.removeListener(eventType);\n    }\n  }\n\n  detachAllListeners() {\n    if (this.bus) {\n      for (let eventType in this.eventTypeToThreadFactory) {\n        this.bus.removeEventListener(eventType, this._eventHandler);\n      }\n    }\n  }\n\n  attachAllListeners() {\n    for (let eventType in this.eventTypeToThreadFactory) {\n      this._attachListenerToBus(eventType);\n    }\n  }\n\n  /**\n   * Safely removes an event listener for a particular event type.\n   *\n   * @param eventType The event type to remove.\n   * @returns {*} The ThreadFactory that the event type used to trigger.\n   */\n  removeListener(eventType) {\n    let threadFactory = this.eventTypeToThreadFactory[eventType];\n\n    if (threadFactory) {\n      delete this.eventTypeToThreadFactory[eventType];\n\n      this.bus.removeEventListener(eventType, this._eventHandler);\n\n      return threadFactory;\n    }\n\n    if (__DEV__) {\n      throw Error('Controller:removeListener(): could not find a listener for \\'' + eventType + '\\'', this);\n    }\n  }\n\n  /**\n   * Returns true if the event bus (or DOM node) that this controller is attached to has a listener for the provided\n   * event type.\n   *\n   * @param eventType The event type\n   * @returns {boolean} True if the bus says it has a listener for the provided event type.\n   */\n  isListening(eventType) {\n    if (this.bus && this.bus.hasListener) {\n      return this.bus.hasListener(eventType);\n    } else if (this.bus) {\n      // Kinda risky, but there is no built-in way on DOM node to see if an event has been attached\n      // without working some magic by overriding addEventListener or using jQuery, which we shall\n      // not do because we are not barbarians.\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Returns true if addListener has been called for the provided eventType. Note this will return true even if the bus\n   * is not set.\n   *\n   * @param eventType The event type\n   * @returns {boolean} True if addListener has been called with the provided event.\n   */\n  hasListener(eventType) {\n    return this.getThreadFactoryFor(eventType) !== undefined;\n  }\n\n  /**\n   * Attaches a RingaEvent to a ThreadFactory and runs the ThreadFactory.\n   *\n   * @param ringaEvent A RingaEvent instance, properly initialized.\n   * @param threadFactory A ThreadFactory instance, properly initialized.\n   * @returns {*}\n   */\n  invoke(ringaEvent, threadFactory) {\n    let thread = threadFactory.build(ringaEvent);\n\n    this.threads.add(thread);\n\n    ringaEvent._threads.push(thread);\n\n    ringaEvent._dispatchEvent(RingaEvent.PREHOOK);\n\n    if (__DEV__ && !this.__blockRingaEvents) {\n      inspectorDispatch('ringaThreadStart', {\n        thread\n      });\n    }\n\n    // TODO PREHOOK should allow the handler to cancel running of the thread.\n    thread.run(ringaEvent, this.threadDoneHandler.bind(this), this.threadFailHandler.bind(this));\n\n    return thread;\n  }\n\n  //-----------------------------------\n  // Events\n  //-----------------------------------\n  _eventHandler(event) {\n    if (event instanceof RingaEvent) {\n      return this.__eventHandler(event);\n    }\n\n    let ringaEvent;\n\n    // This event might be a something like 'click' which does not have\n    // an attached ringaEvent yet!\n    if (!event.detail.ringaEvent){\n      ringaEvent = new RingaEvent(event.type, typeof event.detail === 'object' ? event.detail : {}, event.bubbles, event.cancellable, event);\n\n      if (typeof event.detail === 'object') {\n        event.detail.ringaEvent = ringaEvent;\n      }\n    } else {\n      ringaEvent = event.detail.ringaEvent;\n    }\n\n    return this.__eventHandler(ringaEvent);\n  }\n\n  __eventHandler(ringaEvent) {\n    let threadFactory = this.eventTypeToThreadFactory[ringaEvent.type];\n\n    ringaEvent._caught(this);\n\n    if (__DEV__ && !threadFactory) {\n      throw Error('Controller::__eventHandler(): caught an event but there is no associated ThreadFactory! Fatal error.');\n    }\n\n    let abort;\n    try {\n      abort = this.preInvokeHandler(ringaEvent);\n    } catch (error) {\n      // At this point we don't have a thread yet, so this is all kinds of whack.\n      if (this.options.consoleLogFails) {\n        console.error(error);\n      }\n\n      ringaEvent._fail(this, error, true);\n      ringaEvent.destroy(true);\n      return;\n    }\n\n    if (abort === true) {\n      return;\n    }\n\n    let thread;\n\n    try {\n      thread = this.invoke(ringaEvent, threadFactory);\n\n      this.postInvokeHandler(ringaEvent, thread);\n    } catch (error) {\n      this.threadFailHandler(thread, error);\n    }\n  }\n\n  preInvokeHandler(ringaEvent) {\n    // Can be extended by a subclass\n    return false;\n  }\n\n  postInvokeHandler(ringaEvent, thread) {\n    // Can be extended by a subclass\n  }\n\n  _threadFinalized(thread) {\n    thread.destroy(true);\n\n    this.threads.remove(thread);\n\n    if (__DEV__ && !this.__blockRingaEvents) {\n      inspectorDispatch('ringaThreadKill', {\n        thread\n      });\n    }\n  }\n\n  threadDoneHandler(thread) {\n    if (__DEV__ && !this.threads.has(thread.id)) {\n      throw Error(`Controller::threadDoneHandler(): could not find thread with id ${thread.id}`);\n    }\n\n    this._threadFinalized(thread);\n\n    this.notify(thread.ringaEvent);\n\n    thread.ringaEvent._done(this)\n    thread.ringaEvent.destroy(true);\n  }\n\n  threadFailHandler(thread, error, kill) {\n    if (error) {\n      if (!this.options || this.options.consoleLogFails) {\n        console.error(error, `In thread ${thread ? thread.toString() : ''}`);\n      }\n    }\n\n    thread.ringaEvent._fail(this, error, kill);\n\n    if (kill) {\n      thread.ringaEvent.destroy();\n\n      if (this.threads.has(thread.id)) {\n        this._threadFinalized(thread);\n      } else if (__DEV__) {\n        throw Error(`Controller:threadFailHandler(): the CommandThread with the id ${thread.id} was not found.`)\n      }\n    }\n\n    if (error) {\n      if (!this.options || this.options.consoleLogFails) {\n        this.dispatch(Controller.THREAD_FAIL_ERROR, {\n          thread,\n          error,\n          kill\n        });\n      }\n    }\n  }\n\n  dispatch(eventType, details, requireCatch = true) {\n    if (!this.bus) {\n      throw new Error(`Controller::dispatch(): bus has not yet been set so you cannot dispatch ('${eventType}')! Wait for Controller::busMounted().`);\n    }\n\n    return new RingaEvent(eventType, details, true, true, undefined, requireCatch).dispatch(this.bus);\n  }\n\n  toString() {\n    return this.id;\n  }\n\n  notify(ringaEvent, eventType) {\n    eventType = eventType || ringaEvent.type;\n\n    let watchers = this.eventTypeToWatchers[eventType];\n    if (watchers && watchers.length) {\n      let executor = {\n        controller: this,\n        toString: () => {\n          return 'Controller::watch() for ' + eventType;\n        }\n      };\n\n      watchers.forEach(watcher => {\n        let argNames = this.watcherToArgNames[watcher];\n        let args = buildArgumentsFromRingaEvent(executor, argNames, ringaEvent);\n\n        watcher.apply(undefined, args);\n      });\n    }\n  }\n\n  watch(eventTypes, injectableCallback) {\n    if (__DEV__ && !(eventTypes instanceof Array)) {\n      throw new Error('Controller::watch(): eventTypes is not an Array!');\n    }\n\n    eventTypes.forEach(eventType => {\n      this.eventTypeToWatchers[eventType] = this.eventTypeToWatchers[eventType] || [];\n      this.eventTypeToWatchers[eventType].push(injectableCallback);\n      this.watcherToArgNames[injectableCallback] = getArgNames(injectableCallback);\n    });\n  }\n\n  unwatch(eventTypes, injectableCallback) {\n    if (__DEV__ && !(eventTypes instanceof Array)) {\n      throw new Error('Controller::watch(): eventTypes is not an Array!');\n    }\n\n    let ix;\n\n    eventTypes.forEach(eventType => {\n      if ((ix = this.eventTypeToWatchers[eventType].indexOf(injectableCallback)) !== -1) {\n        this.eventTypeToWatchers[eventType].splice(ix, 1);\n      }\n    });\n  }\n\n  killOnErrorHandler(ringaEvent, error) {\n    return true;\n  }\n}\n\nController.THREAD_FAIL_ERROR = 'threadFailError';\n\nexport default Controller;\n\n\n// WEBPACK FOOTER //\n// ./src/Controller.js","import RingaObject from './RingaObject';\nimport Model from './Model';\n\n/**\n * Retrieves a property by a dot-delimited path on a provided object.\n *\n * @param obj The object to search.\n * @param path A dot-delimited path like 'prop1.prop2.prop3'\n * @returns {*}\n */\nfunction objPath(obj, path) {\n  if (!path) {\n    return obj;\n  }\n  path = path.split('.');\n  let i = 0;\n  while (obj && i < path.length) {\n    obj = obj[path[i++]];\n  }\n  return obj;\n}\n\n/**\n * For a single dot-delimited path like 'when.harry.met.sally', returns:\n *\n * ['when', 'when.harry', 'when.harry.met', 'when.harry.met.sally']\n *\n * @param propertyPath A full dot-delimited path.\n * @returns {*}\n */\nfunction pathAll(propertyPath) {\n  return propertyPath.split('.').reduce((a, v, i) => {\n    a[i] = i === 0 ? v : a[i-1] + '.' + v;\n    return a;\n  }, []);\n}\n\n/**\n * A collection of watches that will be updated in one shot.\n */\nclass Watchees {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  constructor() {\n    this.watchees = [];\n    this.id = Math.random().toString();\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  add(watchedModel, signalPath, signalModel, signalValue, descriptor, watchee) {\n    let watcheeObj;\n\n    let arg = {\n      watchedModel,\n      watchedPath: watchee.propertyPath,\n      watchedValue: objPath(watchedModel, watchee.propertyPath),\n      signalModel,\n      signalPath,\n      signalValue,\n      descriptor\n    };\n\n    if (watchee.handler.__watchees && (watcheeObj = watchee.handler.__watchees[this.id])) {\n      watcheeObj.arg.push(arg);\n\n      return;\n    }\n\n    watcheeObj = {\n      arg: [arg],\n      handler: watchee.handler\n    };\n\n    this.watchees.push(watcheeObj);\n\n    watcheeObj.handler.__watchees = watcheeObj.handler.__watchees || {};\n    watcheeObj.handler.__watchees[this.id] = watcheeObj;\n  }\n\n  notify() {\n    let w = this.watchees;\n    this.clear();\n\n    w.forEach(watcheeObj => {\n      watcheeObj.handler.call(undefined, watcheeObj.arg);\n      delete watcheeObj.handler.__watchees[this.id];\n    });\n  }\n\n  clear() {\n    globalWatchee = undefined;\n  }\n}\n\nlet globalWatchee;\nlet timeoutToken;\n\n/**\n * This ModelWatcher watches for a model by id, Class/prototype in heirarchy, or name.\n */\nclass ModelWatcher extends RingaObject {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  constructor(name, id) {\n    super(name, id);\n\n    this.idNameToWatchees = {};\n    this.classToWatchees = new Map();\n\n    this.models = [];\n    this.idToModel = new WeakMap();\n    this.nameToModel = new WeakMap();\n    this.classToModel = new WeakMap();\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  /**\n   * A model to be watched.\n   *\n   * @param model Assumed to be an extension of Ringa.Model.\n   * @param id A custom id to assign if you so desire.\n   */\n  addModel(model) {\n    if (!model) {\n      throw new Error(`ModelWatcher::addModel(): the provided model was undefined!`);\n    }\n\n    if (!(model instanceof Model)) {\n      throw new Error(`ModelWatcher::addModel(): the provided model ${model.constructor.name} was not a valid Ringa Model!`);\n    }\n\n    if (this.nameToModel[model.name]) {\n      throw new Error(`ModelWatcher::addModel(): a Model with the name ${model.name} has already been watched!`);\n    }\n\n    this.models.push(model);\n\n    this.idToModel[model.id] = model;\n    this.nameToModel[model.name] = model;\n\n    let p = model.constructor;\n\n    while (p) {\n      /**\n       * This is a workaround for Model.construct. Since Mode.construct has the exact same function for every call, we cannot\n       * compare by Function.toString() value in our weak map.\n       *\n       * @type {string|*}\n       */\n      let className = p.$ringaClassName ? `__${p.$ringaClassName}` : p;\n\n      // First come first serve for looking up by type!\n      if (!this.classToModel[className]) {\n        this.classToModel[className] = model;\n      }\n\n      p = p.__proto__;\n    }\n\n    if (typeof model.addInjector == 'function') {\n      model.addInjector(this);\n    }\n  }\n\n  /**\n   * Remove a model from being watched.\n   *\n   * @param model\n   */\n  removeModel(model) {\n    let ix = this.models.indexOf(model);\n\n    if (ix !== -1) {\n      this.models.splice(ix, 1);\n    }\n\n    delete this.nameToModel[model.name];\n    delete this.idToModel[model.id];\n  }\n\n  /**\n   * See if a Model exists in this ModelWatcher and find a property on it (optional).\n   *\n   * @param classOrIdOrName A Class that extends Ringa.Model or an id or a name to lookup.\n   * @param propertyPath A dot-delimited path deep into a property.\n   * @returns {*} The model (if not propertyPath provided) or the property on the model.\n   */\n  find(classOrIdOrName, propertyPath = undefined) {\n    let model;\n\n    // By ID (e.g. 'myModel' or 'constructor_whatever')\n    if (typeof classOrIdOrName === 'string' && this.idToModel[classOrIdOrName]) {\n      model = this.idToModel[classOrIdOrName];\n    } if (typeof classOrIdOrName === 'string' && this.nameToModel[classOrIdOrName]) {\n      model = this.nameToModel[classOrIdOrName];\n    } else {\n      // By Type (e.g. MyModel, MyModelBase, MyModelAbstract, etc.)\n      let p = classOrIdOrName;\n\n      while (p) {\n        /**\n         * This is a workaround for Model.construct. Since Mode.construct has the exact same function for every call, we cannot\n         * compare by Function.toString() value in our weak map.\n         *\n         * @type {string|*}\n         */\n        let className = p.$ringaClassName ? `__${p.$ringaClassName}` : p;\n\n        if (this.classToModel[className]) {\n          model = this.classToModel[className];\n          break;\n        }\n\n        p = p.prototype;\n      }\n    }\n\n    if (model) {\n      return propertyPath ? objPath(model, propertyPath) : model;\n    }\n\n    return null;\n  }\n\n  /**\n   * Watch a model or specific property on a model for changes.\n   *\n   * @param classOrIdOrName A Ringa.Model extension, id, or name of a model to watch.\n   * @param propertyPath A dot-delimiated path into a property.\n   * @param handler Function to callback when the property changes.\n   */\n  watch(classOrIdOrName, propertyPath, handler = undefined) {\n    // If handler is second property...\n    if (typeof propertyPath === 'function') {\n      handler = propertyPath;\n      propertyPath = undefined;\n    }\n\n    let group;\n    let defaultGroup = {\n      all: [],\n      byPath: {}\n    };\n\n    if (typeof classOrIdOrName === 'function') {\n      group = this.classToWatchees[classOrIdOrName] = this.classToWatchees[classOrIdOrName] || defaultGroup;\n    } else if (typeof classOrIdOrName === 'string') {\n      group = this.idNameToWatchees[classOrIdOrName] = this.idNameToWatchees[classOrIdOrName] || defaultGroup;\n    } else if (__DEV__) {\n      throw new Error(`ModelWatcher::watch(): can only watch by Class or id`);\n    }\n\n    let watchee = {\n      handler,\n      propertyPath\n    };\n\n    if (!propertyPath) {\n      group.all.push(watchee);\n    } else {\n      let paths = pathAll(propertyPath);\n\n      paths.forEach(path => {\n        group.byPath[path] = group.byPath[path] || []\n        group.byPath[path].push(watchee);\n      });\n    }\n  }\n\n  unwatch(classOrIdOrName, propertyPath, handler) {\n    // If handler is second property...\n    if (typeof propertyPath === 'function') {\n      handler = propertyPath;\n      propertyPath = undefined;\n    }\n\n    let group;\n\n    if (typeof classOrIdOrName === 'function') {\n      group = this.classToWatchees[classOrIdOrName];\n    } else if (typeof classOrIdOrName === 'string') {\n      group = this.idNameToWatchees[classOrIdOrName];\n    } else if (__DEV__) {\n      throw new Error(`ModelWatcher::unwatch(): can only unwatch by Class or id`);\n    }\n\n    if (!group) {\n      console.warn(`ModelWatcher::unwatch(): could not unwatch because reference was not found: ${classOrIdOrName}`);\n      return;\n    }\n\n    if (!propertyPath) {\n      for (var i = 0; i < group.all.length; i++) {\n        let watchee = group.all[i];\n\n        if (watchee.handler === handler) {\n          group.all.splice(i, 1);\n          return;\n        }\n      }\n    } else {\n      let paths = pathAll(propertyPath);\n\n      paths.forEach(path => {\n        let groupByPath = group.byPath[path];\n        if (groupByPath) {\n          for (var i = 0; i < groupByPath.length; i++) {\n            let watchee = groupByPath[i];\n\n            if (watchee.handler === handler) {\n              groupByPath.splice(i, 1);\n              return;\n            }\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * The notify method is rather complex. We need to intelligently create a Set of watchees (functions to notify)\n   * about changes on each model based upon what they wanted to be notified about and also ordered by the priority\n   * in which they asked to be notified.\n   *\n   * Another reason this algorithm is complicated is because handlers can request to be notified based on specific\n   * paths, so that the handlers do not get hammered with lots of notifications for every change in the model.\n   *\n   * Path scoping into the model plays a large part in determining which watchers get notified of changes to the model.\n   *\n   * For example:\n   *\n   *    // 1) Notify MyComponent of *any* changes to MyModel\n   *    watcher.watch(MyModel, myHandlerFunction);\n   *    watcher.watch('myModel', myHandlerFunction);\n   *\n   *    // 2) Notify MyComponent only if 'prop' changes or any of its children\n   *    watcher.watch(MyModel, 'prop', myHandlerFunction);\n   *    watcher.watch('myModel', 'prop', myHandlerFunction);\n   *\n   *    // 3) Notify MyComponent only if 'prop.value' changes or any of its children\n   *    watcher.watch(MyModel, 'prop.value', myHandlerFunction);\n   *    watcher.watch('myModel', 'prop.value', myHandlerFunction);\n   *\n   *    // 4) Notify MyComponent only if 'otherProp' changes or any of its children\n   *    watcher.watch(MyModel, 'otherProp', myHandlerFunction);\n   *    watcher.watch('myModel', 'otherProp', myHandlerFunction);\n   *\n   * For `watcher.notify(myModel, 'prop.value')` then (1), (2), and (3) are called.\n   * For `watcher.notify(myModel, 'prop')` then (1), (2), and (3) are called.\n   * For `watcher.notify(myModel)` then all are called.\n   * For `watcher.notify(myModel, 'otherProp')` only (1) and (4) are called.\n   *\n   * To increase the performance of your application, decrease the number of things being watched but be as precise as\n   * possible as to both what you are watching and on what you call notify().\n   *\n   * @param model The model that has changed\n   * @param propertyPath The property path (dot-delimited) into a property on the model that has changed.\n   * @param timeout A timeout to clear the stack frame and unify all the notifications at once. This makes make sure\n   * that if multiple properties get set on a model back to back and notify() is called over and over that the\n   * handlers do not get called over and over for each property. Set to -1 to skip the timeout.\n   */\n  notify(model, propertyPath, item, value, descriptor) {\n    let foundAtLeastOneWatchee = false;\n\n    if (!globalWatchee) {\n      globalWatchee = new Watchees();\n    }\n\n    let n = globalWatchee;\n    let paths, byPathFor = () => {};\n\n    let addWatchee = watchee => {\n      foundAtLeastOneWatchee = true;\n\n      n.add(model, propertyPath, item, value, descriptor, watchee);\n    };\n\n    let watcheeGroup = watchees => {\n      watchees.all.forEach(addWatchee);\n      byPathFor(watchees.byPath);\n    };\n\n    if (propertyPath) {\n      paths = pathAll(propertyPath);\n\n      byPathFor = (watcheesByPath) => {\n        // If an watchee has requested 'when.harry.met.sally' there is no point to call for 'when.harry.met', 'when.harry',\n        // or 'when'. So we go backwards through the array. I would do paths.reverse() but, well, performance and all.\n        // for (let i = paths.length - 1; i >= 0; i--) {\n        //   let path = paths[i];\n        //   if (watcheesByPath[path]) {\n        //     watcheesByPath[path].forEach(addWatchee);\n        //     break;\n        //   }\n        // }\n\n        for (var watchPathKey in watcheesByPath) {\n          // Scenario 1: Let's say we are watching for 'prop.value' (watchPathKey)\n          //             Let's say that 'prop' is our propertyPath, then this should trigger.\n          // Scenario 2: Let's say we are watching for 'prop.value' (watchPathKey)\n          //             Let's say that 'prop.value.key' is our propertyPath, then this should NOT trigger.\n          // Scenario 3: Let's say we are watching for 'prop.value.*' (watchPathkey)\n          //             Let's say that 'prop.value.key' is our propertyPath, then this should trigger.\n\n          paths = pathAll(watchPathKey); // ['prop', 'prop.value']\n\n          if (watchPathKey.endsWith('*')) {\n            let globalPath = watchPathKey.substr(0, watchPathKey.length - 2);\n\n            if (propertyPath.startsWith(globalPath)) {\n              watcheesByPath[watchPathKey].forEach(addWatchee);\n            }\n          } else {\n            if (paths.indexOf(propertyPath) !== -1) {\n              watcheesByPath[propertyPath].forEach(addWatchee);\n            }\n          }\n        }\n      }\n    } else {\n      // Well, its a little insane, but if a propertyPath isn't specified, we just notify everyone.\n      // TODO: This is where we should do some performance metrics so developers don't write code that has massive\n      // performance hits because every handler gets notified at once.\n      byPathFor = (watcheesByPath) => {\n        for (var key in watcheesByPath) {\n          watcheesByPath[key].forEach(addWatchee);\n        }\n      }\n    }\n\n    // By ID (e.g. 'MyModel1' or 'MyController10')\n    if (this.idNameToWatchees[model.id]) {\n      watcheeGroup(this.idNameToWatchees[model.id]);\n    }\n\n    // By ID (e.g. 'MyModel1' or 'MyController10')\n    if (this.idNameToWatchees[model.name]) {\n      watcheeGroup(this.idNameToWatchees[model.name]);\n    }\n\n    // By Type (e.g. MyModel, MyModelBase, MyModelAbstract, etc.)\n    // Note: we have to account for everything the model has extended in the prototype chain because a watcher\n    // may have requested to watch a base class and someone might have extended that... kindof a PITA but gotta\n    // cover all bases (no pun intended).\n    let p = model.constructor;\n\n    while (p) {\n      if (this.classToWatchees[p]) {\n        watcheeGroup(this.classToWatchees[p]);\n      }\n\n      p = p.__proto__;\n    }\n\n    if (timeoutToken || !foundAtLeastOneWatchee) {\n      return;\n    }\n\n    timeoutToken = setTimeout(function() {\n      timeoutToken = undefined;\n      globalWatchee.notify();\n    }, 0);\n  }\n}\n\nexport default ModelWatcher;\n\n\n// WEBPACK FOOTER //\n// ./src/ModelWatcher.js","import RingaEvent from './RingaEvent';\nimport { mergeRingaEventDetails } from './util/ringaEvent';\nimport {getArgNames} from './util/function';\nimport {buildArgumentsFromRingaEvent} from './util/executors';\n\nclass RingaEventFactory {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  constructor(eventType, detail, domNode, requireCatch = false, bubbles = true, cancellable = true, event = undefined) {\n    if (!eventType) {\n      console.error('RingaEventFactory(): eventType is undefined! This normally happens becuase you are referencing the EVENT_TYPE on a controller that has not been created yet. Detail is: ', detail);\n    }\n\n    this.eventType = eventType;\n    this.detailOrig = detail;\n    this.domNode = domNode;\n    this.bubbles = true;\n    this.cancellable = true;\n    this.requireCatch = requireCatch;\n    this.event = event;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  build(executor) {\n    let detail;\n\n    if (typeof this.detailOrig === 'function') {\n      let argNames = getArgNames(this.detailOrig);\n      let args = buildArgumentsFromRingaEvent(executor, argNames, executor.ringaEvent);\n      detail = this.detailOrig.apply(undefined, args);\n    } else {\n      detail = this.detailOrig;\n    }\n\n    let newDetail = mergeRingaEventDetails(executor.ringaEvent, detail, executor.controller.options.warnOnDetailOverwrite, false);\n\n    newDetail._executor = executor;\n\n    return new RingaEvent(this.eventType, newDetail, this.bubbles, this.cancellable, this.event, this.requireCatch);\n  }\n\n  toString() {\n    return 'RingaEventFactory_' + this.eventType;\n  }\n}\n\nexport default RingaEventFactory;\n\n\n// WEBPACK FOOTER //\n// ./src/RingaEventFactory.js","import RingaHashArray from './RingaHashArray';\nimport Thread from './Thread';\nimport ExecutorFactory from './ExecutorFactory';\nimport {wrapIfNotInstance} from './util/type';\n\nclass ThreadFactory extends RingaHashArray {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  constructor(name, executorFactories, options) {\n    super(name || 'commandFactory');\n\n    options = options || {};\n    options.synchronous = options.synchronous === undefined ? false : options.synchronous;\n\n    let addOne = this._hashArray.addOne;\n    this._hashArray.addOne = function(obj) {\n      if (!obj) {\n        console.error(`ThreadFactory():: Attempting to add an empty executee to '${name}'! This probably happened because you attempted to add an event (e.g. SomeController.MY_EVENT) before SomeController::addListener('myEvent') was called. Or the event just does not exist. Or you passed in undefined in a moment of intellectual struggle.`, executorFactories);\n      }\n\n      obj = wrapIfNotInstance(obj, ExecutorFactory);\n\n      addOne.call(this, obj);\n    }\n\n    if (executorFactories) {\n      this.addAll(executorFactories);\n    }\n\n    this.threadId = 0;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  build(ringaEvent) {\n    if (__DEV__ && !this.controller) {\n      throw Error('ThreadFactory::build(): controller was not set before the build method was called.');\n    }\n\n    let commandThread = new Thread(this.id + '_Thread' + this.threadId, this);\n\n    this.threadId++;\n\n    return commandThread;\n  }\n}\n\nexport default ThreadFactory;\n\n\n// WEBPACK FOOTER //\n// ./src/ThreadFactory.js","import Model from '../Model';\nimport {ids} from '../RingaObject';\n\n/**\n * The InspectorModel contains data that can monitor the inner activities of Ringa so you can build custom debugging utilities in your\n * display.\n */\nclass InspectorModel extends Model {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  constructor() {\n    super();\n\n    if (__DEV__) {\n      this.threads = [];\n      this.executors = [];\n\n      this.addProperty('ringaObjects', undefined);\n\n      setTimeout(() => {\n        this.ringaObjects = ids.map;\n        this.notify('threads');\n      }, 750);\n    }\n  }\n\n  //-----------------------------------\n  // Properties\n  //-----------------------------------\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  addThread(thread) {\n    if (__DEV__) {\n      this.threads.push(thread);\n\n      this.notify('threads');\n    }\n  }\n\n  removeThread(thread) {\n    if (__DEV__) {\n      let ix = this.threads.indexOf(thread);\n\n      if (ix !== -1) {\n        this.threads.splice(ix, 1);\n\n        this.notify('threads');\n      }\n    }\n  }\n\n  addExecutor(executor) {\n    if (__DEV__) {\n      this.executors.push(executor);\n\n      this.notify('executors');\n    }\n  }\n\n  removeExecutor(executor) {\n    if (__DEV__) {\n      let ix = this.executors.indexOf(executor);\n\n      if (ix !== -1) {\n        this.executors.splice(ix, 1);\n\n        this.notify('executors');\n      }\n    }\n  }\n}\n\nexport default InspectorModel;\n\n\n// WEBPACK FOOTER //\n// ./src/debug/InspectorModel.js","import ExecutorAbstract from '../ExecutorAbstract';\nimport {sleep} from '../util/function';\n\nclass SleepExecutor extends ExecutorAbstract {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructor for a new SleepExecutor, which will wait `milliseconds` before calling `this.done()`\n   *\n   * @param thread The parent thread that owns this executor.\n   * @param milliseconds The number of milliseconds to sleep\n   */\n  constructor(thread, milliseconds) {\n    super(thread);\n\n    this.milliseconds = milliseconds;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  /**\n   * Internal execution method called by Thread only.\n   *\n   * @param doneHandler The handler to call when done() is called.\n   * @param failHandler The handler to call when fail() is called;\n   * @private\n   */\n  _execute(doneHandler, failHandler) {\n    super._execute(doneHandler, failHandler);\n\n    sleep(this.milliseconds).then(this.done);\n  }\n\n  toString() {\n    return this.id + ': Sleep for ' + this.milliseconds + 'milliseconds';\n  }\n}\n\nexport default SleepExecutor;\n\n\n// WEBPACK FOOTER //\n// ./src/executors/SleepExecutor.js","import HashArray from 'hasharray';\nimport RingaObject from './RingaObject';\n\n/**\n * This is a proxy class for HashArray that extends RingaObject.\n */\nclass RingaHashArray extends RingaObject {\n  constructor(name = '[name]', key = 'id', changeHandler = undefined, options = undefined) {\n    super(name);\n\n    this._hashArray = new HashArray(key, changeHandler, options);\n  }\n\n  get all() {\n    return this._hashArray._list;\n  }\n  add() {\n    return this._hashArray.add(...arguments);\n  }\n  addAll() {\n    return this._hashArray.addAll(...arguments);\n  }\n  addMap(){\n    return this._hashArray.addMap(...arguments);\n  }\n  addOne(){\n    return this._hashArray.addOne(...arguments);\n  }\n  get() {\n    return this._hashArray.get(...arguments);\n  }\n  getAll(){\n    return this._hashArray.getAll(...arguments);\n  }\n  getAsArray(){\n    return this._hashArray.getAsArray(...arguments);\n  }\n  sample(){\n    return this._hashArray.sample(...arguments);\n  }\n  remove(){\n    return this._hashArray.remove(...arguments);\n  }\n  removeByKey(){\n    return this._hashArray.removeByKey(...arguments);\n  }\n  removeAll(){\n    return this._hashArray.removeAll(...arguments);\n  }\n  intersection(){\n    return this._hashArray.intersection(...arguments);\n  }\n  complement(){\n    return this._hashArray.complement(...arguments);\n  }\n  has(){\n    return this._hashArray.has(...arguments);\n  }\n  hasMultiple(){\n    return this._hashArray.hasMultiple(...arguments);\n  }\n  collides(){\n    return this._hashArray.collides(...arguments);\n  }\n  forEach(){\n    return this._hashArray.forEach(...arguments);\n  }\n  forEachDeep(){\n    return this._hashArray.forEachDeep(...arguments);\n  }\n  sum(){\n    return this._hashArray.sum(...arguments);\n  }\n  average(){\n    return this._hashArray.average(...arguments);\n  }\n  filter(){\n    return this._hashArray.filter(...arguments);\n  }\n  objectAt(){\n    return this._hashArray.objectAt(...arguments);\n  }\n  clone(){\n    return this._hashArray.clone(...arguments);\n  }\n}\n\nexport default RingaHashArray;\n\n\n// WEBPACK FOOTER //\n// ./src/RingaHashArray.js","\nexport function mergeRingaEventDetails(ringaEvent, detail, warnOnOverwrite = true, assignToRingEvent = true) {\n  let nextDetail = Object.assign({}, detail); // Make sure we clone!!\n  let prevDetail = ringaEvent.detail || {};\n  \n  for(var key in prevDetail) {\n    if (prevDetail.hasOwnProperty(key)) {\n      if (__DEV__ && nextDetail[key]!==undefined && (warnOnOverwrite || ringaEvent.debug)) {\n        console.warn(`mergeRingaEventDetails(): overwriting property '${key}' on ${ringaEvent}.\\n` +\n                     `Old value: ${prevDetail[key]}\\n` +\n                     `New value: ${nextDetail[key]}\\n`);\n      }\n      if (nextDetail[key]===undefined) {\n        nextDetail[key] = prevDetail[key];\n      }\n    }\n  }\n  if (assignToRingEvent) {\n    ringaEvent.detail = nextDetail;\n  }\n  return nextDetail;\n};\n\n\n// WEBPACK FOOTER //\n// ./src/util/ringaEvent.js","import ExecutorAbstract from '../ExecutorAbstract';\nimport {buildArgumentsFromRingaEvent} from '../util/executors';\nimport {getArgNames} from '../util/function';\n\n/**\n * Command is the base class for all command objects that are run in a Ringa application or module.\n */\nclass Command extends ExecutorAbstract {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructor for a new Command. This *must* be called via super() from a subclass constructor.\n   *\n   * @param thread The parent thread that owns this command.\n   */\n  constructor(thread) {\n    super(thread);\n\n    this.cacheable = true;\n  }\n\n  //-----------------------------------\n  // Properties\n  //-----------------------------------\n  get cache() {\n    return this._cache || getArgNames(this.execute);\n  }\n\n  set cache(value) {\n    this._cache = value;\n    this.argNames = value;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n\n  /**\n   * Internal execution method called by CommandThread only.\n   *\n   * @param doneHandler The handler to call when done() is called.\n   * @param failHandler The handler to call when fail() is called;\n   * @private\n   */\n  _execute(doneHandler, failHandler) {\n    let promise;\n\n    super._execute(doneHandler, failHandler);\n\n    let args = buildArgumentsFromRingaEvent(this, this.argNames, this.thread.ringaEvent);\n\n    const donePassedAsArg = this.argNames.indexOf('done') !== -1;\n\n    promise = this.execute.apply(this, args);\n\n    if (this.error) {\n      return undefined;\n    }\n\n    // If the function returns true, we continue on the next immediate cycle assuming it didn't return a promise.\n    // If, however the function requested that 'done' be passed, we assume it is an asynchronous\n    // function and let the function determine when it will call done.\n    if (!promise && !donePassedAsArg) {\n      this.done();\n    }\n\n    if (promise) {\n      this.waitForPromise(promise);\n    }\n\n    return promise;\n  }\n\n  /**\n   * Override this method to provide functionality to the command.\n   *\n   * @returns {boolean}\n   */\n  execute() {\n    // To be overridden by subclass\n    return false;\n  }\n\n  /**\n   * Call this method if an error occurred during the processing of a command.\n   *\n   * @param error The error that has occurred.\n   * @param kill True if you want the thread to die immediately.\n   */\n  fail(error, kill = false) {\n    super.fail(error, kill);\n  }\n\n  /**\n   * By default is this executors id.\n   *\n   * @returns {string|*}\n   */\n  toString() {\n    return this.id;\n  }\n}\n\nexport default Command;\n\n\n// WEBPACK FOOTER //\n// ./src/executors/Command.js","import ExecutorAbstract from '../ExecutorAbstract';\nimport ExecutorFactory from '../ExecutorFactory';\nimport {wrapIfNotInstance} from '../util/type';\nimport {getInjections} from '../util/executors';\n\n/**\n * Iterates over an Array found by name via standard injection scope.\n */\nclass ForEachExecutor extends ExecutorAbstract {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructor for a new ForEachExecutor.\n   *\n   * @param {Thread} thread The parent thread that owns this executor.\n   * @param {Array} arrayProperty The property (found via the available injections) to do a forEach on.\n   * @param {string} property The name property for each element in the loop to add to the event detail for the executor.\n   * @param {*} executor  The Ringa executor to run for each item.\n   * @param {bool} [sequential = true] True if we should wait for each previous executor to run before running the next.\n   */\n  constructor(thread, { arrayProperty, property, executor, sequential = true }) {\n    super(thread);\n\n    this.arrayProperty = arrayProperty;\n    this.property = property;\n    this.executor = executor;\n    this.sequential = sequential;\n  }\n\n  //-----------------------------------\n  // Properties\n  //-----------------------------------\n  /**\n   * No timeout for forEach since we have no idea how long our children are going to take.\n   *\n   * @returns {number}\n   */\n  get timeout() {\n    return -1;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  /**\n   * Internal execution method called by Thread only.\n   *\n   * @param {function} doneHandler The handler to call when done() is called.\n   * @param {function} failHandler The handler to call when fail() is called;\n   * @private\n   */\n  _execute(doneHandler, failHandler) {\n    super._execute(doneHandler, failHandler);\n\n    let executorFactory = wrapIfNotInstance(this.executor, ExecutorFactory);\n    let injections = getInjections(this.ringaEvent, this);\n    let array = injections[this.arrayProperty];\n\n    if (!array) {\n      throw new Error(`ForEachExecutor::_execute(): Could not find an array with the name ${this.arrayProperty}`);\n    }\n\n    if (array.length === 0) {\n      this.done();\n    }\n\n    this.executors = array.map((item, ix) => {\n      let executor = executorFactory.build(this.thread);\n\n      executor._customInjections = executor._customInjections || {};\n      executor._customInjections[this.property] = item;\n\n      return executor;\n    });\n\n    if (this.sequential) {\n      let ix = 0;\n\n      let _next = () => {\n        if (ix === this.executors.length) {\n          return this.done();\n        }\n\n        let executor = this.executors[ix];\n        executor._execute(() => {\n          this.killChildExecutor(executor);\n          setTimeout(_next, 0);\n        }, (error, kill = false) => {\n          this.killChildExecutor(executor);\n          this.fail(error, kill);\n\n          if (!kill) {\n            _next();\n          }\n        });\n\n        ix++;\n      };\n\n      _next();\n    } else {\n      let count = this.executors.length;\n\n      let _fin = () => {\n        count--;\n        if (count === 0) {\n          this.done();\n        }\n      };\n\n      let _fail = (error, kill = false) => {\n        this.fail(error, kill);\n\n        _fin();\n      };\n\n      this.executors.forEach(executor => {\n        executor._execute(_fin, _fail);\n      });\n    }\n  }\n}\n\nexport default ForEachExecutor;\n\n\n// WEBPACK FOOTER //\n// ./src/executors/ForEachExecutor.js","import ExecutorAbstract from '../ExecutorAbstract';\nimport ExecutorFactory from '../ExecutorFactory';\nimport {getArgNames} from '../util/function';\nimport {buildArgumentsFromRingaEvent} from '../util/executors';\nimport {wrapIfNotInstance} from '../util/type';\n\nclass IifExecutor extends ExecutorAbstract {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructor for a new IifExecutor.\n   *\n   * @param thread The parent thread that owns this executor.\n   * @param condition A callback function whose return value can be truthy or falsey, determining whether to run the trueExecutor or the falseExecutor.\n   * @param trueExecutor  The executor run if condition returns a truthy value\n   * @param falseExecutor The executor run if condition returns a falsey value\n   */\n  constructor(thread, { condition, trueExecutor, falseExecutor }) {\n    super(thread);\n\n    this.condition = condition;\n    this.trueExecutor = trueExecutor;\n    this.falseExecutor = falseExecutor;\n  }\n\n  //-----------------------------------\n  // Properties\n  //-----------------------------------\n  get timeout() {\n    return -1;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  /**\n   * Internal execution method called by Thread only.\n   *\n   * @param doneHandler The handler to call when done() is called.\n   * @param failHandler The handler to call when fail() is called;\n   * @private\n   */\n  _execute(doneHandler, failHandler) {\n    super._execute(doneHandler, failHandler);\n    \n    let argNames = getArgNames(this.condition);\n    let args = buildArgumentsFromRingaEvent(this, argNames, this.ringaEvent);\n    let conditionResult = this.condition.apply(this, args);\n    let executor = !!conditionResult ? this.trueExecutor : this.falseExecutor;\n\n    if (executor) {\n      let executorFactory = wrapIfNotInstance(executor, ExecutorFactory);\n      let executorInst = executorFactory.build(this.thread);\n\n      executorInst._execute(() => {\n        this.killChildExecutor(executorInst);\n        this.done();\n      }, (event, kill) => {\n        this.killChildExecutor(executorInst);\n        this.fail(event, kill);\n      });\n    } else {\n      this.done();\n    }\n  }\n\n  toString() {\n    return this.id + ': ' + this.condition.toString().substring(0,64);\n  }\n}\n\nexport default IifExecutor;\n\n\n// WEBPACK FOOTER //\n// ./src/executors/IifExecutor.js","import ExecutorAbstract from '../ExecutorAbstract';\nimport ExecutorFactory from '../ExecutorFactory';\nimport {getArgNames} from '../util/function';\nimport {buildArgumentsFromRingaEvent} from '../util/executors';\nimport {wrapIfNotInstance} from '../util/type';\n\nclass IntervalExecutor extends ExecutorAbstract {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructor for a new IntervalExecutor, which recursively uses the setTimeout function to run an executor repeatedly.\n   *\n   * @param thread The parent thread that owns this executor.\n   * @param condition Interval is halted when this callback returns falsey.\n   * @param executor  The executor that runs on every interval\n   * @param milliseconds The time between each interval\n   * @param options Defaults are provided, so this is optional.\n   * @param [options.maxLoops=-1] When maximum loops is exceeded, done() is called on the executor. -1 for no maximum.\n   */\n  constructor(thread, { condition, executor, milliseconds, options = {} }) {\n    super(thread);\n\n    this.condition = condition;\n    this.executor = executor;\n    this.executorFactory = wrapIfNotInstance(executor, ExecutorFactory);\n    this.milliseconds = milliseconds;\n    this.maxLoops = options.maxLoops || -1;\n    this.loops = 0;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n\n  /**\n   * Internal execution method called by Thread only.\n   *\n   * @param doneHandler The handler to call when done() is called.\n   * @param failHandler The handler to call when fail() is called;\n   * @private\n   */\n  _execute(doneHandler, failHandler) {\n    super._execute(doneHandler, failHandler);\n\n    let argNames = getArgNames(this.condition);\n    this.args = buildArgumentsFromRingaEvent(this, argNames, this.ringaEvent);\n\n    this._interval();\n  }\n\n  /**\n   * Internal recursive loop method.  Runs executor every `milliseconds` provided\n   * that the condition callback still evaluates truthy and `maxLoops` is not exceeded\n   *\n   * @private\n   */\n  _interval() {\n    this.loops += 1;\n    if (!this.condition.apply(this, this.args) || this._hasExceededMaxLoops()) {\n      this.done();\n    } else {\n      this.resetTimeout();\n      this.childExecutor = this.executorFactory.build(this.thread);\n      this.childExecutor._execute(this._intervalDone.bind(this), this._intervalFail.bind(this))\n      setTimeout(this._interval.bind(this), this.milliseconds);\n    }\n  }\n\n  _hasExceededMaxLoops() {\n    return (this.maxLoops > -1) && (this.loops > this.maxLoops);\n  }\n\n  resetTimeout() {\n    // TODO: add more intelligent timeout management\n    this.endTimeoutCheck();\n    this.startTimeoutCheck();\n  }\n\n  _intervalDone() {\n    this.killChildExecutor(this.childExecutor);\n  }\n\n  _intervalFail(error, kill) {\n    this.killChildExecutor(this.childExecutor);\n    this.fail(error, kill);\n  }\n\n  toString() {\n    return this.id + ': ' + this.condition.toString().substring(0,64);\n  }\n}\n\nexport default IntervalExecutor;\n\n\n// WEBPACK FOOTER //\n// ./src/executors/IntervalExecutor.js","import ExecutorAbstract from '../ExecutorAbstract';\nimport ExecutorFactory from '../ExecutorFactory';\nimport {wrapIfNotInstance} from '../util/type';\n\nclass SpawnExecutor extends ExecutorAbstract {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructor for a new SpawnExecutor, which will fire off the executor and call `this.done()` immediately\n   *\n   * @param thread The parent thread that owns this executor.\n   * @param executor The executor to spawn\n   */\n  constructor(thread, executor) {\n    super(thread);\n\n    this.executor = executor;\n    this.executorFactory = wrapIfNotInstance(executor, ExecutorFactory);\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  /**\n   * Internal execution method called by Thread only.\n   *\n   * @param doneHandler The handler to call when done() is called.\n   * @param failHandler The handler to call when fail() is called;\n   * @private\n   */\n  _execute(doneHandler, failHandler) {\n    super._execute(doneHandler, failHandler);\n\n    this.executorFactory.build(this.thread)._execute(this._dummyDone, this._dummyFail);\n\n    this.done();\n  }\n\n  _dummyDone() {\n    \n  }\n\n  _dummyFail(error) {\n    throw new Error('SpawnExecutor::_dummyFail(): Error caught from spawned executor', error);\n  }\n}\n\nexport default SpawnExecutor;\n\n\n// WEBPACK FOOTER //\n// ./src/executors/SpawnExecutor.js","import ExecutorFactory from '../ExecutorFactory';\nimport { mergeRingaEventDetails } from '../util/ringaEvent';\n\nexport default class AssignFactory extends ExecutorFactory {\n  constructor(executee, detail) {\n    super(executee);\n    this.detail = detail;\n  }\n\n  build(thread) {\n    mergeRingaEventDetails(thread.ringaEvent, this.detail, thread.controller.options.warnOnDetailOverwrite);\n    \n    return super.build(thread);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/factories/AssignFactory.js","'use strict';\n\nfunction preserveCamelCase(str) {\n\tlet isLastCharLower = false;\n\tlet isLastCharUpper = false;\n\tlet isLastLastCharUpper = false;\n\n\tfor (let i = 0; i < str.length; i++) {\n\t\tconst c = str[i];\n\n\t\tif (isLastCharLower && /[a-zA-Z]/.test(c) && c.toUpperCase() === c) {\n\t\t\tstr = str.substr(0, i) + '-' + str.substr(i);\n\t\t\tisLastCharLower = false;\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = true;\n\t\t\ti++;\n\t\t} else if (isLastCharUpper && isLastLastCharUpper && /[a-zA-Z]/.test(c) && c.toLowerCase() === c) {\n\t\t\tstr = str.substr(0, i - 1) + '-' + str.substr(i - 1);\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = false;\n\t\t\tisLastCharLower = true;\n\t\t} else {\n\t\t\tisLastCharLower = c.toLowerCase() === c;\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = c.toUpperCase() === c;\n\t\t}\n\t}\n\n\treturn str;\n}\n\nmodule.exports = function (str) {\n\tif (arguments.length > 1) {\n\t\tstr = Array.from(arguments)\n\t\t\t.map(x => x.trim())\n\t\t\t.filter(x => x.length)\n\t\t\t.join('-');\n\t} else {\n\t\tstr = str.trim();\n\t}\n\n\tif (str.length === 0) {\n\t\treturn '';\n\t}\n\n\tif (str.length === 1) {\n\t\treturn str.toLowerCase();\n\t}\n\n\tif (/^[a-z0-9]+$/.test(str)) {\n\t\treturn str;\n\t}\n\n\tconst hasUpperCase = str !== str.toLowerCase();\n\n\tif (hasUpperCase) {\n\t\tstr = preserveCamelCase(str);\n\t}\n\n\treturn str\n\t\t.replace(/^[_.\\- ]+/, '')\n\t\t.toLowerCase()\n\t\t.replace(/[_.\\- ]+(\\w|$)/g, (m, p1) => p1.toUpperCase());\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/camelcase/index.js","/*\r\n * Date Format 1.2.3\r\n * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\r\n * MIT license\r\n *\r\n * Includes enhancements by Scott Trenda <scott.trenda.net>\r\n * and Kris Kowal <cixar.com/~kris.kowal/>\r\n *\r\n * Accepts a date, a mask, or a date and a mask.\r\n * Returns a formatted version of the given date.\r\n * The date defaults to the current date/time.\r\n * The mask defaults to dateFormat.masks.default.\r\n */\r\n\r\n(function(global) {\r\n  'use strict';\r\n\r\n  var dateFormat = (function() {\r\n      var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZWN]|'[^']*'|'[^']*'/g;\r\n      var timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g;\r\n      var timezoneClip = /[^-+\\dA-Z]/g;\r\n  \r\n      // Regexes and supporting functions are cached through closure\r\n      return function (date, mask, utc, gmt) {\r\n  \r\n        // You can't provide utc if you skip other args (use the 'UTC:' mask prefix)\r\n        if (arguments.length === 1 && kindOf(date) === 'string' && !/\\d/.test(date)) {\r\n          mask = date;\r\n          date = undefined;\r\n        }\r\n  \r\n        date = date || new Date;\r\n  \r\n        if(!(date instanceof Date)) {\r\n          date = new Date(date);\r\n        }\r\n  \r\n        if (isNaN(date)) {\r\n          throw TypeError('Invalid date');\r\n        }\r\n  \r\n        mask = String(dateFormat.masks[mask] || mask || dateFormat.masks['default']);\r\n  \r\n        // Allow setting the utc/gmt argument via the mask\r\n        var maskSlice = mask.slice(0, 4);\r\n        if (maskSlice === 'UTC:' || maskSlice === 'GMT:') {\r\n          mask = mask.slice(4);\r\n          utc = true;\r\n          if (maskSlice === 'GMT:') {\r\n            gmt = true;\r\n          }\r\n        }\r\n  \r\n        var _ = utc ? 'getUTC' : 'get';\r\n        var d = date[_ + 'Date']();\r\n        var D = date[_ + 'Day']();\r\n        var m = date[_ + 'Month']();\r\n        var y = date[_ + 'FullYear']();\r\n        var H = date[_ + 'Hours']();\r\n        var M = date[_ + 'Minutes']();\r\n        var s = date[_ + 'Seconds']();\r\n        var L = date[_ + 'Milliseconds']();\r\n        var o = utc ? 0 : date.getTimezoneOffset();\r\n        var W = getWeek(date);\r\n        var N = getDayOfWeek(date);\r\n        var flags = {\r\n          d:    d,\r\n          dd:   pad(d),\r\n          ddd:  dateFormat.i18n.dayNames[D],\r\n          dddd: dateFormat.i18n.dayNames[D + 7],\r\n          m:    m + 1,\r\n          mm:   pad(m + 1),\r\n          mmm:  dateFormat.i18n.monthNames[m],\r\n          mmmm: dateFormat.i18n.monthNames[m + 12],\r\n          yy:   String(y).slice(2),\r\n          yyyy: y,\r\n          h:    H % 12 || 12,\r\n          hh:   pad(H % 12 || 12),\r\n          H:    H,\r\n          HH:   pad(H),\r\n          M:    M,\r\n          MM:   pad(M),\r\n          s:    s,\r\n          ss:   pad(s),\r\n          l:    pad(L, 3),\r\n          L:    pad(Math.round(L / 10)),\r\n          t:    H < 12 ? 'a'  : 'p',\r\n          tt:   H < 12 ? 'am' : 'pm',\r\n          T:    H < 12 ? 'A'  : 'P',\r\n          TT:   H < 12 ? 'AM' : 'PM',\r\n          Z:    gmt ? 'GMT' : utc ? 'UTC' : (String(date).match(timezone) || ['']).pop().replace(timezoneClip, ''),\r\n          o:    (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\r\n          S:    ['th', 'st', 'nd', 'rd'][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10],\r\n          W:    W,\r\n          N:    N\r\n        };\r\n  \r\n        return mask.replace(token, function (match) {\r\n          if (match in flags) {\r\n            return flags[match];\r\n          }\r\n          return match.slice(1, match.length - 1);\r\n        });\r\n      };\r\n    })();\r\n\r\n  dateFormat.masks = {\r\n    'default':               'ddd mmm dd yyyy HH:MM:ss',\r\n    'shortDate':             'm/d/yy',\r\n    'mediumDate':            'mmm d, yyyy',\r\n    'longDate':              'mmmm d, yyyy',\r\n    'fullDate':              'dddd, mmmm d, yyyy',\r\n    'shortTime':             'h:MM TT',\r\n    'mediumTime':            'h:MM:ss TT',\r\n    'longTime':              'h:MM:ss TT Z',\r\n    'isoDate':               'yyyy-mm-dd',\r\n    'isoTime':               'HH:MM:ss',\r\n    'isoDateTime':           'yyyy-mm-dd\\'T\\'HH:MM:sso',\r\n    'isoUtcDateTime':        'UTC:yyyy-mm-dd\\'T\\'HH:MM:ss\\'Z\\'',\r\n    'expiresHeaderFormat':   'ddd, dd mmm yyyy HH:MM:ss Z'\r\n  };\r\n\r\n  // Internationalization strings\r\n  dateFormat.i18n = {\r\n    dayNames: [\r\n      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat',\r\n      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\r\n    ],\r\n    monthNames: [\r\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec',\r\n      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\r\n    ]\r\n  };\r\n\r\nfunction pad(val, len) {\r\n  val = String(val);\r\n  len = len || 2;\r\n  while (val.length < len) {\r\n    val = '0' + val;\r\n  }\r\n  return val;\r\n}\r\n\r\n/**\r\n * Get the ISO 8601 week number\r\n * Based on comments from\r\n * http://techblog.procurios.nl/k/n618/news/view/33796/14863/Calculate-ISO-8601-week-and-year-in-javascript.html\r\n *\r\n * @param  {Object} `date`\r\n * @return {Number}\r\n */\r\nfunction getWeek(date) {\r\n  // Remove time components of date\r\n  var targetThursday = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n\r\n  // Change date to Thursday same week\r\n  targetThursday.setDate(targetThursday.getDate() - ((targetThursday.getDay() + 6) % 7) + 3);\r\n\r\n  // Take January 4th as it is always in week 1 (see ISO 8601)\r\n  var firstThursday = new Date(targetThursday.getFullYear(), 0, 4);\r\n\r\n  // Change date to Thursday same week\r\n  firstThursday.setDate(firstThursday.getDate() - ((firstThursday.getDay() + 6) % 7) + 3);\r\n\r\n  // Check if daylight-saving-time-switch occurred and correct for it\r\n  var ds = targetThursday.getTimezoneOffset() - firstThursday.getTimezoneOffset();\r\n  targetThursday.setHours(targetThursday.getHours() - ds);\r\n\r\n  // Number of weeks between target Thursday and first Thursday\r\n  var weekDiff = (targetThursday - firstThursday) / (86400000*7);\r\n  return 1 + Math.floor(weekDiff);\r\n}\r\n\r\n/**\r\n * Get ISO-8601 numeric representation of the day of the week\r\n * 1 (for Monday) through 7 (for Sunday)\r\n * \r\n * @param  {Object} `date`\r\n * @return {Number}\r\n */\r\nfunction getDayOfWeek(date) {\r\n  var dow = date.getDay();\r\n  if(dow === 0) {\r\n    dow = 7;\r\n  }\r\n  return dow;\r\n}\r\n\r\n/**\r\n * kind-of shortcut\r\n * @param  {*} val\r\n * @return {String}\r\n */\r\nfunction kindOf(val) {\r\n  if (val === null) {\r\n    return 'null';\r\n  }\r\n\r\n  if (val === undefined) {\r\n    return 'undefined';\r\n  }\r\n\r\n  if (typeof val !== 'object') {\r\n    return typeof val;\r\n  }\r\n\r\n  if (Array.isArray(val)) {\r\n    return 'array';\r\n  }\r\n\r\n  return {}.toString.call(val)\r\n    .slice(8, -1).toLowerCase();\r\n};\r\n\r\n\r\n\r\n  if (typeof define === 'function' && define.amd) {\r\n    define(function () {\r\n      return dateFormat;\r\n    });\r\n  } else if (typeof exports === 'object') {\r\n    module.exports = dateFormat;\r\n  } else {\r\n    global.dateFormat = dateFormat;\r\n  }\r\n})(this);\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/dateformat/lib/dateformat.js","(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('error-stack-parser', ['stackframe'], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('stackframe'));\n    } else {\n        root.ErrorStackParser = factory(root.StackFrame);\n    }\n}(this, function ErrorStackParser(StackFrame) {\n    'use strict';\n\n    var FIREFOX_SAFARI_STACK_REGEXP = /(^|@)\\S+\\:\\d+/;\n    var CHROME_IE_STACK_REGEXP = /^\\s*at .*(\\S+\\:\\d+|\\(native\\))/m;\n    var SAFARI_NATIVE_CODE_REGEXP = /^(eval@)?(\\[native code\\])?$/;\n\n    return {\n        /**\n         * Given an Error object, extract the most information from it.\n         *\n         * @param {Error} error object\n         * @return {Array} of StackFrames\n         */\n        parse: function ErrorStackParser$$parse(error) {\n            if (typeof error.stacktrace !== 'undefined' || typeof error['opera#sourceloc'] !== 'undefined') {\n                return this.parseOpera(error);\n            } else if (error.stack && error.stack.match(CHROME_IE_STACK_REGEXP)) {\n                return this.parseV8OrIE(error);\n            } else if (error.stack) {\n                return this.parseFFOrSafari(error);\n            } else {\n                throw new Error('Cannot parse given Error object');\n            }\n        },\n\n        // Separate line and column numbers from a string of the form: (URI:Line:Column)\n        extractLocation: function ErrorStackParser$$extractLocation(urlLike) {\n            // Fail-fast but return locations like \"(native)\"\n            if (urlLike.indexOf(':') === -1) {\n                return [urlLike];\n            }\n\n            var regExp = /(.+?)(?:\\:(\\d+))?(?:\\:(\\d+))?$/;\n            var parts = regExp.exec(urlLike.replace(/[\\(\\)]/g, ''));\n            return [parts[1], parts[2] || undefined, parts[3] || undefined];\n        },\n\n        parseV8OrIE: function ErrorStackParser$$parseV8OrIE(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !!line.match(CHROME_IE_STACK_REGEXP);\n            }, this);\n\n            return filtered.map(function(line) {\n                if (line.indexOf('(eval ') > -1) {\n                    // Throw away eval information until we implement stacktrace.js/stackframe#8\n                    line = line.replace(/eval code/g, 'eval').replace(/(\\(eval at [^\\()]*)|(\\)\\,.*$)/g, '');\n                }\n                var tokens = line.replace(/^\\s+/, '').replace(/\\(eval code/g, '(').split(/\\s+/).slice(1);\n                var locationParts = this.extractLocation(tokens.pop());\n                var functionName = tokens.join(' ') || undefined;\n                var fileName = ['eval', '<anonymous>'].indexOf(locationParts[0]) > -1 ? undefined : locationParts[0];\n\n                return new StackFrame({\n                    functionName: functionName,\n                    fileName: fileName,\n                    lineNumber: locationParts[1],\n                    columnNumber: locationParts[2],\n                    source: line\n                });\n            }, this);\n        },\n\n        parseFFOrSafari: function ErrorStackParser$$parseFFOrSafari(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !line.match(SAFARI_NATIVE_CODE_REGEXP);\n            }, this);\n\n            return filtered.map(function(line) {\n                // Throw away eval information until we implement stacktrace.js/stackframe#8\n                if (line.indexOf(' > eval') > -1) {\n                    line = line.replace(/ line (\\d+)(?: > eval line \\d+)* > eval\\:\\d+\\:\\d+/g, ':$1');\n                }\n\n                if (line.indexOf('@') === -1 && line.indexOf(':') === -1) {\n                    // Safari eval frames only have function names and nothing else\n                    return new StackFrame({\n                        functionName: line\n                    });\n                } else {\n                    var tokens = line.split('@');\n                    var locationParts = this.extractLocation(tokens.pop());\n                    var functionName = tokens.join('@') || undefined;\n\n                    return new StackFrame({\n                        functionName: functionName,\n                        fileName: locationParts[0],\n                        lineNumber: locationParts[1],\n                        columnNumber: locationParts[2],\n                        source: line\n                    });\n                }\n            }, this);\n        },\n\n        parseOpera: function ErrorStackParser$$parseOpera(e) {\n            if (!e.stacktrace || (e.message.indexOf('\\n') > -1 &&\n                e.message.split('\\n').length > e.stacktrace.split('\\n').length)) {\n                return this.parseOpera9(e);\n            } else if (!e.stack) {\n                return this.parseOpera10(e);\n            } else {\n                return this.parseOpera11(e);\n            }\n        },\n\n        parseOpera9: function ErrorStackParser$$parseOpera9(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)/i;\n            var lines = e.message.split('\\n');\n            var result = [];\n\n            for (var i = 2, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(new StackFrame({\n                        fileName: match[2],\n                        lineNumber: match[1],\n                        source: lines[i]\n                    }));\n                }\n            }\n\n            return result;\n        },\n\n        parseOpera10: function ErrorStackParser$$parseOpera10(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;\n            var lines = e.stacktrace.split('\\n');\n            var result = [];\n\n            for (var i = 0, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(\n                        new StackFrame({\n                            functionName: match[3] || undefined,\n                            fileName: match[2],\n                            lineNumber: match[1],\n                            source: lines[i]\n                        })\n                    );\n                }\n            }\n\n            return result;\n        },\n\n        // Opera 10.65+ Error.stack very similar to FF/Safari\n        parseOpera11: function ErrorStackParser$$parseOpera11(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !!line.match(FIREFOX_SAFARI_STACK_REGEXP) && !line.match(/^Error created at/);\n            }, this);\n\n            return filtered.map(function(line) {\n                var tokens = line.split('@');\n                var locationParts = this.extractLocation(tokens.pop());\n                var functionCall = (tokens.shift() || '');\n                var functionName = functionCall\n                        .replace(/<anonymous function(: (\\w+))?>/, '$2')\n                        .replace(/\\([^\\)]*\\)/g, '') || undefined;\n                var argsRaw;\n                if (functionCall.match(/\\(([^\\)]*)\\)/)) {\n                    argsRaw = functionCall.replace(/^[^\\(]+\\(([^\\)]*)\\)$/, '$1');\n                }\n                var args = (argsRaw === undefined || argsRaw === '[arguments not available]') ?\n                    undefined : argsRaw.split(',');\n\n                return new StackFrame({\n                    functionName: functionName,\n                    args: args,\n                    fileName: locationParts[0],\n                    lineNumber: locationParts[1],\n                    columnNumber: locationParts[2],\n                    source: line\n                });\n            }, this);\n        }\n    };\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./~/error-stack-parser/error-stack-parser.js","(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('stackframe', [], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        root.StackFrame = factory();\n    }\n}(this, function() {\n    'use strict';\n    function _isNumber(n) {\n        return !isNaN(parseFloat(n)) && isFinite(n);\n    }\n\n    function _capitalize(str) {\n        return str.charAt(0).toUpperCase() + str.substring(1);\n    }\n\n    function _getter(p) {\n        return function() {\n            return this[p];\n        };\n    }\n\n    var booleanProps = ['isConstructor', 'isEval', 'isNative', 'isToplevel'];\n    var numericProps = ['columnNumber', 'lineNumber'];\n    var stringProps = ['fileName', 'functionName', 'source'];\n    var arrayProps = ['args'];\n\n    var props = booleanProps.concat(numericProps, stringProps, arrayProps);\n\n    function StackFrame(obj) {\n        if (obj instanceof Object) {\n            for (var i = 0; i < props.length; i++) {\n                if (obj.hasOwnProperty(props[i]) && obj[props[i]] !== undefined) {\n                    this['set' + _capitalize(props[i])](obj[props[i]]);\n                }\n            }\n        }\n    }\n\n    StackFrame.prototype = {\n        getArgs: function() {\n            return this.args;\n        },\n        setArgs: function(v) {\n            if (Object.prototype.toString.call(v) !== '[object Array]') {\n                throw new TypeError('Args must be an Array');\n            }\n            this.args = v;\n        },\n\n        getEvalOrigin: function() {\n            return this.evalOrigin;\n        },\n        setEvalOrigin: function(v) {\n            if (v instanceof StackFrame) {\n                this.evalOrigin = v;\n            } else if (v instanceof Object) {\n                this.evalOrigin = new StackFrame(v);\n            } else {\n                throw new TypeError('Eval Origin must be an Object or StackFrame');\n            }\n        },\n\n        toString: function() {\n            var functionName = this.getFunctionName() || '{anonymous}';\n            var args = '(' + (this.getArgs() || []).join(',') + ')';\n            var fileName = this.getFileName() ? ('@' + this.getFileName()) : '';\n            var lineNumber = _isNumber(this.getLineNumber()) ? (':' + this.getLineNumber()) : '';\n            var columnNumber = _isNumber(this.getColumnNumber()) ? (':' + this.getColumnNumber()) : '';\n            return functionName + args + fileName + lineNumber + columnNumber;\n        }\n    };\n\n    for (var i = 0; i < booleanProps.length; i++) {\n        StackFrame.prototype['get' + _capitalize(booleanProps[i])] = _getter(booleanProps[i]);\n        StackFrame.prototype['set' + _capitalize(booleanProps[i])] = (function(p) {\n            return function(v) {\n                this[p] = Boolean(v);\n            };\n        })(booleanProps[i]);\n    }\n\n    for (var j = 0; j < numericProps.length; j++) {\n        StackFrame.prototype['get' + _capitalize(numericProps[j])] = _getter(numericProps[j]);\n        StackFrame.prototype['set' + _capitalize(numericProps[j])] = (function(p) {\n            return function(v) {\n                if (!_isNumber(v)) {\n                    throw new TypeError(p + ' must be a Number');\n                }\n                this[p] = Number(v);\n            };\n        })(numericProps[j]);\n    }\n\n    for (var k = 0; k < stringProps.length; k++) {\n        StackFrame.prototype['get' + _capitalize(stringProps[k])] = _getter(stringProps[k]);\n        StackFrame.prototype['set' + _capitalize(stringProps[k])] = (function(p) {\n            return function(v) {\n                this[p] = String(v);\n            };\n        })(stringProps[k]);\n    }\n\n    return StackFrame;\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./~/error-stack-parser/~/stackframe/stackframe.js","/**\n * jclass v1.1.9\n * https://github.com/riga/jclass\n *\n * Marcel Rieger, 2015\n * MIT licensed, http://www.opensource.org/licenses/mit-license\n */\n\n(function(factory) {\n\n  /**\n   * Make jclass available in any context.\n   */\n\n  if (typeof(define) == \"function\" && define.amd) {\n    // AMD\n    define([], factory);\n\n  } else if (typeof(exports) == \"object\") {\n    // CommonJS\n    exports = factory();\n\n    if (typeof(module) == \"object\") {\n      // NodeJS\n      module.exports = exports;\n    }\n\n  } else if (window) {\n    // Browser\n    window.JClass = factory();\n\n  } else if (typeof(console) == \"object\" && console.error instanceof Function) {\n    // error case\n    console.error(\"cannot determine environment\");\n  }\n\n})(function() {\n\n  /**\n   * Helper functions.\n   */\n\n  /**\n   * Checks whether a passed object is a function.\n   *\n   * @param obj - The object to check.\n   * @returns {boolean}\n   */\n  var isFn = function(obj) {\n    return obj instanceof Function;\n  };\n\n  /**\n   * Extends a target object by one or more source objects with shallow key comparisons. Note that\n   * the extension is done in-place.\n   *\n   * @param {object} target - The target object to extend.\n   * @param {...object} source - Source objects.\n   * @returns {object} The extended object.\n   */\n  var extend = function(target) {\n    var sources = Array.prototype.slice.call(arguments, 1);\n\n    // loop through all sources\n    for (var i in sources) {\n      var source = sources[i];\n\n      // object check\n      if (typeof(source) != \"object\") {\n        continue;\n      }\n\n      // loop through all source attributes\n      for (var key in source) {\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  };\n\n\n  /**\n   * Default options.\n   */\n\n  var defaultOptions = {\n    // internal object for indicating that class objects don't have a class object themselves,\n    // may not be used by users\n    _isClassObject: false\n  };\n\n\n  /**\n   * Flags.\n   */\n\n  // flag to distinguish between prototype and class instantiation \n  var initializing = false;\n\n\n  /**\n   * Base class definition.\n   */\n\n  // empty BaseClass implementation\n  var BaseClass = function(){};\n\n  // add the _subClasses entry\n  BaseClass._subClasses = [];\n\n  // empty init method\n  BaseClass.prototype.init = function(){};\n\n\n  /**\n   * Extend mechanism. Returns a derived class.\n   *\n   * @param {object} instanceMembers - Members that will be owned by instances.\n   * @param {object} classMembers - Members that will be owned by the class itself.\n   * @returns {JClass}\n   */\n  BaseClass._extend = function(instanceMembers, classMembers, options) {\n\n    // default arguments\n    if (instanceMembers === undefined) {\n      instanceMembers = {};\n    }\n    if (classMembers === undefined) {\n      classMembers = {};\n    }\n    if (options === undefined) {\n      options = {};\n    }\n\n    // mixin default options\n    options = extend({}, defaultOptions, options);\n\n\n    // sub class dummy constructor\n    var JClass = function() {\n      // nothing happens here when we are initializing\n      if (initializing) {\n        return;\n      }\n\n      // store a reference to the class itself\n      this._class = JClass;\n\n      // all construction is actually done in the init method\n      if (this.init instanceof Function) {\n        this.init.apply(this, arguments);\n      }\n    };\n\n\n    // alias for readability\n    var SuperClass = this;\n\n    // create an instance of the super class via new\n    // the flag sandwich prevents a call to the init method\n    initializing = true;\n    var prototype = new SuperClass();\n    initializing = false;\n\n    // get the prototype of the super class\n    var superPrototype = SuperClass.prototype;\n\n    // the instance of the super class is our new prototype\n    JClass.prototype = prototype;\n\n    // enforce the constructor to be what we expect\n    // calls to the constructor will invoke the init method (see above)\n    JClass.prototype.constructor = JClass;\n\n    // store a reference to the super class\n    JClass._superClass = SuperClass;\n\n    // store references to all extending classes\n    JClass._subClasses = [];\n    SuperClass._subClasses.push(JClass);\n\n    // make this class extendable as well\n    JClass._extend = SuperClass._extend;\n\n\n    // _extends returns true if the class itself extended \"target\"\n    // in any hierarchy, e.g. every class extends \"JClass\" itself\n    JClass._extends = function(target) {\n      // this function operates recursive, so stop when the super class is our BaseClass\n      if (this._superClass == BaseClass) {\n        return false;\n      }\n\n      // success case\n      if (target == this._superClass || target == BaseClass) {\n        return true;\n      }\n\n      // continue with the next super class\n      return this._superClass._extends(target);\n    };\n\n\n    // propagate instance members directly to the created protoype,\n    // the member is either a normal member or a descriptor\n    for (var key in instanceMembers) {\n      var property = Object.getOwnPropertyDescriptor(instanceMembers, key);\n      var member   = property.value;\n\n      // descriptor flag set?\n      if (member !== null && typeof(member) == \"object\" && member.descriptor) {\n        Object.defineProperty(prototype, key, member);\n\n      // getter/setter syntax\n      } else if (!(\"value\" in property) && (\"set\" in property || \"get\" in property)) {\n        Object.defineProperty(prototype, key, property);\n\n      // normal member, simple assignment\n      } else {\n        prototype[key] = member;\n\n        // if both member and the super member are distinct functions\n        // add the super member to the member as \"_super\"\n        var superMember = superPrototype[key];\n        if (isFn(member) && isFn(superMember) && member !== superMember) {\n          member._super = superMember;\n        }\n      }\n    }\n\n\n    // propagate class members to the _members object\n    if (!options._isClassObject) {\n      // try to find the super class of the _members object \n      var ClassMembersSuperClass = SuperClass._members === undefined ?\n        BaseClass : SuperClass._members._class;\n\n      // create the actual class of the _members instance\n      // with an updated version of our options\n      var opts = extend({}, options, { _isClassObject: true });\n      var ClassMembersClass = ClassMembersSuperClass._extend(classMembers, {}, opts);\n\n      // store the actual JClass in ClassMembersClass\n      ClassMembersClass._instanceClass = JClass;\n\n      // create the _members instance\n      JClass._members = new ClassMembersClass();\n    }\n\n\n    // return the new class\n    return JClass;\n  };\n\n\n  /**\n   * Converts arbitrary protoype-style classes to our JClass definition.\n   *\n   * @param {function} cls - The class to convert.\n   * @returns {JClass}\n   */\n  BaseClass._convert = function(cls, options) {\n    // the properties consist of the class' prototype\n    var instanceMembers = cls.prototype;\n\n    // add the constructor function\n    instanceMembers.init = function() {\n      // simply create an instance of our target class\n      var origin = this._origin = BaseClass._construct(cls, arguments);\n\n      // add properties for each own property in _origin\n      Object.keys(origin).forEach(function(key) {\n        if (!origin.hasOwnProperty(key)) {\n          return;\n        }\n\n        Object.defineProperty(this, key, {\n          get: function() {\n            return origin[key];\n          }\n        });\n      }, this);\n    };\n\n    // finally, create and return our new class\n    return BaseClass._extend(instanceMembers, {}, options);\n  };\n\n\n  /**\n   * Returns an instance of a class with a list of arguments. This provides an apply-like\n   * constructor usage. Note that this approach does not work with native constructors (e.g. String\n   * or Boolean).\n   *\n   * @param {Class|JClass} cls - The class to instantiate. This may be a JClass or a prototype-based\n   *   class.\n   * @param {array} [args=[]] - Arguments to pass to the constructor.\n   * @returns {instance}\n   */\n  BaseClass._construct = function(cls, args) {\n    // empty default args\n    if (args === undefined) {\n      args = [];\n    }\n\n    // create a class wrapper that calls cls like a function\n    var Class = function() {\n      return cls.apply(this, args);\n    };\n\n    // copy the prototype\n    Class.prototype = cls.prototype;\n\n    // return a new instance\n    return new Class();\n  };\n\n\n  /**\n   * Returns a property descriptor of the super class.\n   *\n   * @param {JClass|instance} cls - A JClass or an instance of a JClass to retrieve the property\n   *   descriptor from.\n   * @param {string} prop - The name of the property descriptor to get.\n   * @returns {object}\n   */\n  BaseClass._superDescriptor = function(cls, prop) {\n    // if cls is an instance, use its class\n    if (\"_class\" in cls && cls instanceof cls._class) {\n      cls = cls._class;\n    }\n\n    // a JClass?\n    if (\"_extends\" in cls && cls._extends instanceof Function && cls._extends(this)) {\n      return Object.getOwnPropertyDescriptor(cls._superClass.prototype, prop);\n    } else {\n      return undefined;\n    }\n  };\n\n\n  /**\n   * Return the BaseClass.\n   */\n\n  return BaseClass;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./~/hasharray/~/jclass/index.js","/*===========================================================================*\\\n * Requires\n\\*===========================================================================*/\nvar JClass = require('jclass');\n\n/*===========================================================================*\\\n * HashArray\n\\*===========================================================================*/\nvar HashArray = JClass._extend({\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  init: function(keyFields, callback, options) {\n    keyFields = keyFields instanceof Array ? keyFields : [keyFields];\n\n    this._map = {};\n    this._list = [];\n    this.callback = callback;\n\n    this.keyFields = keyFields;\n\n    this.isHashArray = true;\n    \n    this.options = options || {\n      ignoreDuplicates: false\n    };\n\n    if (callback) {\n      callback('construct');\n    }\n  },\n  //-----------------------------------\n  // add()\n  //-----------------------------------\n  addOne: function (obj) {\n    var needsDupCheck = false;\n    for (var key in this.keyFields) {\n      key = this.keyFields[key];\n      var inst = this.objectAt(obj, key);\n      if (inst) {\n        if (this._map[inst]) {\n          if (this.options.ignoreDuplicates)\n            return;\n          if (this._map[inst].indexOf(obj) != -1) {\n            // Cannot add the same item twice\n            needsDupCheck = true;\n            continue;\n          }\n          this._map[inst].push(obj);\n        }\n        else this._map[inst] = [obj];\n      }\n    }\n\n    if (!needsDupCheck || this._list.indexOf(obj) == -1)\n      this._list.push(obj);\n  },\n  add: function() {\n    for (var i = 0; i < arguments.length; i++) {\n      this.addOne(arguments[i]);\n    }\n\n    if (this.callback) {\n      this.callback('add', Array.prototype.slice.call(arguments, 0));\n    }\n    \n    return this;\n  },\n  addAll: function (arr) {\n    if (arr.length < 100)\n      this.add.apply(this, arr);\n    else {\n      for (var i = 0; i < arr.length; i++)\n        this.add(arr[i]);\n    }\n    \n    return this;\n  },\n  addMap: function(key, obj) {\n    this._map[key] = obj;\n    if (this.callback) {\n      this.callback('addMap', {\n        key: key,\n        obj: obj\n      });\n    }\n    \n    return this;\n  },\n  //-----------------------------------\n  // Intersection, union, etc.\n  //-----------------------------------\n  /**\n   * Returns a new HashArray that contains the intersection between this (A) and the hasharray passed in (B). Returns A ^ B.\n   */\n  intersection: function (other) {\n    var self = this;\n\n    if (!other || !other.isHashArray)\n      throw Error('Cannot HashArray.intersection() on a non-hasharray object. You passed in: ', other);\n\n    var ret = this.clone(null, true),\n      allItems = this.clone(null, true).addAll(this.all.concat(other.all));\n\n    allItems.all.forEach(function (item) {\n      if (self.collides(item) && other.collides(item))\n        ret.add(item);\n    });\n\n    return ret;\n  },\n  /**\n   * Returns a new HashArray that contains the complement (difference) between this hash array (A) and the hasharray passed in (B). Returns A - B.\n   */\n  complement: function (other) {\n    var self = this;\n\n    if (!other || !other.isHashArray)\n      throw Error('Cannot HashArray.complement() on a non-hasharray object. You passed in: ', other);\n\n    var ret = this.clone(null, true);\n\n    this.all.forEach(function (item) {\n      if (!other.collides(item))\n        ret.add(item);\n    });\n\n    return ret;\n  },\n  //-----------------------------------\n  // Retrieval\n  //-----------------------------------\n  get: function(key) {\n    return (!(this._map[key] instanceof Array) || this._map[key].length != 1) ? this._map[key] : this._map[key][0];\n  },\n  getAll: function(keys) {\n    keys = keys instanceof Array ? keys : [keys];\n\n    if (keys[0] == '*')\n      return this.all;\n\n    var res = new HashArray(this.keyFields);\n    for (var key in keys)\n      res.add.apply(res, this.getAsArray(keys[key]));\n\n    return res.all;\n  },\n  getAsArray: function(key) {\n    return this._map[key] || [];\n  },\n  getUniqueRandomIntegers: function (count, min, max) {\n    var res = [], map = {};\n\n    count = Math.min(Math.max(max - min, 1), count);\n    \n    while (res.length < count)\n    {\n      var r = Math.floor(min + (Math.random() * (max + 1)));\n      if (map[r]) continue;\n      map[r] = true;\n      res.push(r);\n    }\n\n    return res;\n  },\n  sample: function (count, keys) {\n    // http://en.wikipedia.org/wiki/Image_(mathematics)\n    var image = this.all,\n      ixs = {},\n      res = [];\n\n    if (keys)\n      image = this.getAll(keys);\n\n    var rand = this.getUniqueRandomIntegers(count, 0, image.length - 1);\n\n    for (var i = 0; i < rand.length; i++)\n      res.push(image[rand[i]]);\n\n    return res;\n  },\n  //-----------------------------------\n  // Peeking\n  //-----------------------------------\n  has: function(key) {\n    return this._map.hasOwnProperty(key);\n  },\n  collides: function (item) {\n    for (var k in this.keyFields)\n      if (this.has(this.objectAt(item, this.keyFields[k])))\n        return true;\n    \n    return false;\n  },\n  hasMultiple: function(key) {\n    return this._map[key] instanceof Array;\n  },\n  //-----------------------------------\n  // Removal\n  //-----------------------------------\n  removeByKey: function() {\n    var removed = [];\n    for (var i = 0; i < arguments.length; i++) {\n      var key = arguments[i];\n      var items = this._map[key].concat();\n      if (items) {\n        removed = removed.concat(items);\n        for (var j in items) {\n          var item = items[j];\n          for (var ix in this.keyFields) {\n            var key2 = this.objectAt(item, this.keyFields[ix]);\n            if (key2 && this._map[key2]) {\n              var ix = this._map[key2].indexOf(item);\n              if (ix != -1) {\n                this._map[key2].splice(ix, 1);\n              }\n\n              if (this._map[key2].length == 0)\n                delete this._map[key2];\n            }\n          }\n\n          this._list.splice(this._list.indexOf(item), 1);\n        }\n      }\n      delete this._map[key];\n    }\n\n    if (this.callback) {\n      this.callback('removeByKey', removed);\n    }\n    \n    return this;\n  },\n  remove: function() {\n    for (var i = 0; i < arguments.length; i++) {\n      var item = arguments[i];\n      for (var ix in this.keyFields) {\n        var key = this.objectAt(item, this.keyFields[ix]);\n        if (key) {\n          var ix = this._map[key].indexOf(item);\n          if (ix != -1)\n            this._map[key].splice(ix, 1);\n          else\n            throw new Error('HashArray: attempting to remove an object that was never added!' + key);\n\n          if (this._map[key].length == 0)\n            delete this._map[key];\n        }\n      }\n\n      var ix = this._list.indexOf(item);\n\n      if (ix != -1)\n        this._list.splice(ix, 1);\n      else\n        throw new Error('HashArray: attempting to remove an object that was never added!' + key);\n    }\n\n    if (this.callback) {\n      this.callback('remove', arguments);\n    }\n    \n    return this;\n  },\n  removeAll: function() {\n    var old = this._list.concat();\n    this._map = {};\n    this._list = [];\n\n    if (this.callback) {\n      this.callback('remove', old);\n    }\n    \n    return this;\n  },\n  //-----------------------------------\n  // Utility\n  //-----------------------------------\n  objectAt: function(obj, path) {\n    if (typeof path === 'string') {\n      return obj[path];\n    }\n\n    var dup = path.concat();\n    // else assume array.\n    while (dup.length && obj) {\n      obj = obj[dup.shift()];\n    }\n\n    return obj;\n  },\n  //-----------------------------------\n  // Iteration\n  //-----------------------------------\n  forEach: function(keys, callback) {\n    keys = keys instanceof Array ? keys : [keys];\n\n    var objs = this.getAll(keys);\n\n    objs.forEach(callback);\n    \n    return this;\n  },\n  forEachDeep: function(keys, key, callback) {\n    keys = keys instanceof Array ? keys : [keys];\n\n    var self = this,\n      objs = this.getAll(keys);\n\n    objs.forEach(function (item) {\n      callback(self.objectAt(item, key), item);\n    });\n    \n    return this;\n  },\n  //-----------------------------------\n  // Cloning\n  //-----------------------------------\n  clone: function(callback, ignoreItems) {\n    var n = new HashArray(this.keyFields.concat(), callback ? callback : this.callback);\n    if (!ignoreItems)\n      n.add.apply(n, this.all.concat());\n    return n;\n  },\n  //-----------------------------------\n  // Mathematical\n  //-----------------------------------\n  sum: function(keys, key, weightKey) {\n    var self = this,\n      ret = 0;\n    this.forEachDeep(keys, key, function (value, item) {\n      if (weightKey !== undefined)\n        value *= self.objectAt(item, weightKey);\n\n      ret += value;\n    });\n    return ret;\n  },\n  average: function(keys, key, weightKey) {\n    var ret = 0,\n      tot = 0,\n      weightsTotal = 0,\n      self = this;\n\n    if (weightKey !== undefined)\n      this.forEachDeep(keys, weightKey, function (value) {\n        weightsTotal += value;\n      })\n\n    this.forEachDeep(keys, key, function (value, item) {\n      if (weightKey !== undefined)\n        value *= (self.objectAt(item, weightKey) / weightsTotal);\n\n      ret += value;\n      tot++;\n    });\n\n    return weightKey !== undefined ? ret : ret / tot;\n  },\n  //-----------------------------------\n  // Filtering\n  //-----------------------------------\n  filter: function (keys, callbackOrKey) {\n    var self = this;\n    \n    var callback = (typeof(callbackOrKey) == 'function') ? callbackOrKey : defaultCallback;\n\n    var ha = new HashArray(this.keyFields);\n    ha.addAll(this.getAll(keys).filter(callback));\n    return ha;\n    \n    function defaultCallback(item) {\n      var val = self.objectAt(item, callbackOrKey);\n      return val !== undefined && val !== false;\n    }\n  }\n});\n\n//-----------------------------------\n// Operators\n//-----------------------------------\nObject.defineProperty(HashArray.prototype, 'all', {\n  get: function () {\n    return this._list;\n  }\n});\n\nObject.defineProperty(HashArray.prototype, 'map', {\n  get: function () {\n    return this._map;\n  }\n});\n\nmodule.exports = HashArray;\n\n//-----------------------------------\n// Browser\n//-----------------------------------\nif (typeof window !== 'undefined')\n  window.HashArray = HashArray;\n\n\n// WEBPACK FOOTER //\n// ./~/hasharray/src/HashArray.js","/**\n * Special language-specific overrides.\n *\n * Source: ftp://ftp.unicode.org/Public/UCD/latest/ucd/SpecialCasing.txt\n *\n * @type {Object}\n */\nvar LANGUAGES = {\n  tr: {\n    regexp: /\\u0130|\\u0049|\\u0049\\u0307/g,\n    map: {\n      '\\u0130': '\\u0069',\n      '\\u0049': '\\u0131',\n      '\\u0049\\u0307': '\\u0069'\n    }\n  },\n  az: {\n    regexp: /[\\u0130]/g,\n    map: {\n      '\\u0130': '\\u0069',\n      '\\u0049': '\\u0131',\n      '\\u0049\\u0307': '\\u0069'\n    }\n  },\n  lt: {\n    regexp: /[\\u0049\\u004A\\u012E\\u00CC\\u00CD\\u0128]/g,\n    map: {\n      '\\u0049': '\\u0069\\u0307',\n      '\\u004A': '\\u006A\\u0307',\n      '\\u012E': '\\u012F\\u0307',\n      '\\u00CC': '\\u0069\\u0307\\u0300',\n      '\\u00CD': '\\u0069\\u0307\\u0301',\n      '\\u0128': '\\u0069\\u0307\\u0303'\n    }\n  }\n}\n\n/**\n * Lowercase a string.\n *\n * @param  {String} str\n * @return {String}\n */\nmodule.exports = function (str, locale) {\n  var lang = LANGUAGES[locale]\n\n  str = str == null ? '' : String(str)\n\n  if (lang) {\n    str = str.replace(lang.regexp, function (m) { return lang.map[m] })\n  }\n\n  return str.toLowerCase()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/snake-case/~/lower-case/lower-case.js","var lowerCase = require('lower-case')\n\nvar NON_WORD_REGEXP = require('./vendor/non-word-regexp')\nvar CAMEL_CASE_REGEXP = require('./vendor/camel-case-regexp')\nvar CAMEL_CASE_UPPER_REGEXP = require('./vendor/camel-case-upper-regexp')\n\n/**\n * Sentence case a string.\n *\n * @param  {string} str\n * @param  {string} locale\n * @param  {string} replacement\n * @return {string}\n */\nmodule.exports = function (str, locale, replacement) {\n  if (str == null) {\n    return ''\n  }\n\n  replacement = typeof replacement !== 'string' ? ' ' : replacement\n\n  function replace (match, index, value) {\n    if (index === 0 || index === (value.length - match.length)) {\n      return ''\n    }\n\n    return replacement\n  }\n\n  str = String(str)\n    // Support camel case (\"camelCase\" -> \"camel Case\").\n    .replace(CAMEL_CASE_REGEXP, '$1 $2')\n    // Support odd camel case (\"CAMELCase\" -> \"CAMEL Case\").\n    .replace(CAMEL_CASE_UPPER_REGEXP, '$1 $2')\n    // Remove all non-word characters and replace with a single space.\n    .replace(NON_WORD_REGEXP, replace)\n\n  // Lower case the entire string.\n  return lowerCase(str, locale)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/snake-case/~/no-case/no-case.js","module.exports = /([a-z\\xB5\\xDF-\\xF6\\xF8-\\xFF\\u0101\\u0103\\u0105\\u0107\\u0109\\u010B\\u010D\\u010F\\u0111\\u0113\\u0115\\u0117\\u0119\\u011B\\u011D\\u011F\\u0121\\u0123\\u0125\\u0127\\u0129\\u012B\\u012D\\u012F\\u0131\\u0133\\u0135\\u0137\\u0138\\u013A\\u013C\\u013E\\u0140\\u0142\\u0144\\u0146\\u0148\\u0149\\u014B\\u014D\\u014F\\u0151\\u0153\\u0155\\u0157\\u0159\\u015B\\u015D\\u015F\\u0161\\u0163\\u0165\\u0167\\u0169\\u016B\\u016D\\u016F\\u0171\\u0173\\u0175\\u0177\\u017A\\u017C\\u017E-\\u0180\\u0183\\u0185\\u0188\\u018C\\u018D\\u0192\\u0195\\u0199-\\u019B\\u019E\\u01A1\\u01A3\\u01A5\\u01A8\\u01AA\\u01AB\\u01AD\\u01B0\\u01B4\\u01B6\\u01B9\\u01BA\\u01BD-\\u01BF\\u01C6\\u01C9\\u01CC\\u01CE\\u01D0\\u01D2\\u01D4\\u01D6\\u01D8\\u01DA\\u01DC\\u01DD\\u01DF\\u01E1\\u01E3\\u01E5\\u01E7\\u01E9\\u01EB\\u01ED\\u01EF\\u01F0\\u01F3\\u01F5\\u01F9\\u01FB\\u01FD\\u01FF\\u0201\\u0203\\u0205\\u0207\\u0209\\u020B\\u020D\\u020F\\u0211\\u0213\\u0215\\u0217\\u0219\\u021B\\u021D\\u021F\\u0221\\u0223\\u0225\\u0227\\u0229\\u022B\\u022D\\u022F\\u0231\\u0233-\\u0239\\u023C\\u023F\\u0240\\u0242\\u0247\\u0249\\u024B\\u024D\\u024F-\\u0293\\u0295-\\u02AF\\u0371\\u0373\\u0377\\u037B-\\u037D\\u0390\\u03AC-\\u03CE\\u03D0\\u03D1\\u03D5-\\u03D7\\u03D9\\u03DB\\u03DD\\u03DF\\u03E1\\u03E3\\u03E5\\u03E7\\u03E9\\u03EB\\u03ED\\u03EF-\\u03F3\\u03F5\\u03F8\\u03FB\\u03FC\\u0430-\\u045F\\u0461\\u0463\\u0465\\u0467\\u0469\\u046B\\u046D\\u046F\\u0471\\u0473\\u0475\\u0477\\u0479\\u047B\\u047D\\u047F\\u0481\\u048B\\u048D\\u048F\\u0491\\u0493\\u0495\\u0497\\u0499\\u049B\\u049D\\u049F\\u04A1\\u04A3\\u04A5\\u04A7\\u04A9\\u04AB\\u04AD\\u04AF\\u04B1\\u04B3\\u04B5\\u04B7\\u04B9\\u04BB\\u04BD\\u04BF\\u04C2\\u04C4\\u04C6\\u04C8\\u04CA\\u04CC\\u04CE\\u04CF\\u04D1\\u04D3\\u04D5\\u04D7\\u04D9\\u04DB\\u04DD\\u04DF\\u04E1\\u04E3\\u04E5\\u04E7\\u04E9\\u04EB\\u04ED\\u04EF\\u04F1\\u04F3\\u04F5\\u04F7\\u04F9\\u04FB\\u04FD\\u04FF\\u0501\\u0503\\u0505\\u0507\\u0509\\u050B\\u050D\\u050F\\u0511\\u0513\\u0515\\u0517\\u0519\\u051B\\u051D\\u051F\\u0521\\u0523\\u0525\\u0527\\u0529\\u052B\\u052D\\u052F\\u0561-\\u0587\\u13F8-\\u13FD\\u1D00-\\u1D2B\\u1D6B-\\u1D77\\u1D79-\\u1D9A\\u1E01\\u1E03\\u1E05\\u1E07\\u1E09\\u1E0B\\u1E0D\\u1E0F\\u1E11\\u1E13\\u1E15\\u1E17\\u1E19\\u1E1B\\u1E1D\\u1E1F\\u1E21\\u1E23\\u1E25\\u1E27\\u1E29\\u1E2B\\u1E2D\\u1E2F\\u1E31\\u1E33\\u1E35\\u1E37\\u1E39\\u1E3B\\u1E3D\\u1E3F\\u1E41\\u1E43\\u1E45\\u1E47\\u1E49\\u1E4B\\u1E4D\\u1E4F\\u1E51\\u1E53\\u1E55\\u1E57\\u1E59\\u1E5B\\u1E5D\\u1E5F\\u1E61\\u1E63\\u1E65\\u1E67\\u1E69\\u1E6B\\u1E6D\\u1E6F\\u1E71\\u1E73\\u1E75\\u1E77\\u1E79\\u1E7B\\u1E7D\\u1E7F\\u1E81\\u1E83\\u1E85\\u1E87\\u1E89\\u1E8B\\u1E8D\\u1E8F\\u1E91\\u1E93\\u1E95-\\u1E9D\\u1E9F\\u1EA1\\u1EA3\\u1EA5\\u1EA7\\u1EA9\\u1EAB\\u1EAD\\u1EAF\\u1EB1\\u1EB3\\u1EB5\\u1EB7\\u1EB9\\u1EBB\\u1EBD\\u1EBF\\u1EC1\\u1EC3\\u1EC5\\u1EC7\\u1EC9\\u1ECB\\u1ECD\\u1ECF\\u1ED1\\u1ED3\\u1ED5\\u1ED7\\u1ED9\\u1EDB\\u1EDD\\u1EDF\\u1EE1\\u1EE3\\u1EE5\\u1EE7\\u1EE9\\u1EEB\\u1EED\\u1EEF\\u1EF1\\u1EF3\\u1EF5\\u1EF7\\u1EF9\\u1EFB\\u1EFD\\u1EFF-\\u1F07\\u1F10-\\u1F15\\u1F20-\\u1F27\\u1F30-\\u1F37\\u1F40-\\u1F45\\u1F50-\\u1F57\\u1F60-\\u1F67\\u1F70-\\u1F7D\\u1F80-\\u1F87\\u1F90-\\u1F97\\u1FA0-\\u1FA7\\u1FB0-\\u1FB4\\u1FB6\\u1FB7\\u1FBE\\u1FC2-\\u1FC4\\u1FC6\\u1FC7\\u1FD0-\\u1FD3\\u1FD6\\u1FD7\\u1FE0-\\u1FE7\\u1FF2-\\u1FF4\\u1FF6\\u1FF7\\u210A\\u210E\\u210F\\u2113\\u212F\\u2134\\u2139\\u213C\\u213D\\u2146-\\u2149\\u214E\\u2184\\u2C30-\\u2C5E\\u2C61\\u2C65\\u2C66\\u2C68\\u2C6A\\u2C6C\\u2C71\\u2C73\\u2C74\\u2C76-\\u2C7B\\u2C81\\u2C83\\u2C85\\u2C87\\u2C89\\u2C8B\\u2C8D\\u2C8F\\u2C91\\u2C93\\u2C95\\u2C97\\u2C99\\u2C9B\\u2C9D\\u2C9F\\u2CA1\\u2CA3\\u2CA5\\u2CA7\\u2CA9\\u2CAB\\u2CAD\\u2CAF\\u2CB1\\u2CB3\\u2CB5\\u2CB7\\u2CB9\\u2CBB\\u2CBD\\u2CBF\\u2CC1\\u2CC3\\u2CC5\\u2CC7\\u2CC9\\u2CCB\\u2CCD\\u2CCF\\u2CD1\\u2CD3\\u2CD5\\u2CD7\\u2CD9\\u2CDB\\u2CDD\\u2CDF\\u2CE1\\u2CE3\\u2CE4\\u2CEC\\u2CEE\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\uA641\\uA643\\uA645\\uA647\\uA649\\uA64B\\uA64D\\uA64F\\uA651\\uA653\\uA655\\uA657\\uA659\\uA65B\\uA65D\\uA65F\\uA661\\uA663\\uA665\\uA667\\uA669\\uA66B\\uA66D\\uA681\\uA683\\uA685\\uA687\\uA689\\uA68B\\uA68D\\uA68F\\uA691\\uA693\\uA695\\uA697\\uA699\\uA69B\\uA723\\uA725\\uA727\\uA729\\uA72B\\uA72D\\uA72F-\\uA731\\uA733\\uA735\\uA737\\uA739\\uA73B\\uA73D\\uA73F\\uA741\\uA743\\uA745\\uA747\\uA749\\uA74B\\uA74D\\uA74F\\uA751\\uA753\\uA755\\uA757\\uA759\\uA75B\\uA75D\\uA75F\\uA761\\uA763\\uA765\\uA767\\uA769\\uA76B\\uA76D\\uA76F\\uA771-\\uA778\\uA77A\\uA77C\\uA77F\\uA781\\uA783\\uA785\\uA787\\uA78C\\uA78E\\uA791\\uA793-\\uA795\\uA797\\uA799\\uA79B\\uA79D\\uA79F\\uA7A1\\uA7A3\\uA7A5\\uA7A7\\uA7A9\\uA7B5\\uA7B7\\uA7FA\\uAB30-\\uAB5A\\uAB60-\\uAB65\\uAB70-\\uABBF\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFF41-\\uFF5A0-9\\xB2\\xB3\\xB9\\xBC-\\xBE\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u09F4-\\u09F9\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0B72-\\u0B77\\u0BE6-\\u0BF2\\u0C66-\\u0C6F\\u0C78-\\u0C7E\\u0CE6-\\u0CEF\\u0D66-\\u0D75\\u0DE6-\\u0DEF\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F33\\u1040-\\u1049\\u1090-\\u1099\\u1369-\\u137C\\u16EE-\\u16F0\\u17E0-\\u17E9\\u17F0-\\u17F9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19DA\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\u2070\\u2074-\\u2079\\u2080-\\u2089\\u2150-\\u2182\\u2185-\\u2189\\u2460-\\u249B\\u24EA-\\u24FF\\u2776-\\u2793\\u2CFD\\u3007\\u3021-\\u3029\\u3038-\\u303A\\u3192-\\u3195\\u3220-\\u3229\\u3248-\\u324F\\u3251-\\u325F\\u3280-\\u3289\\u32B1-\\u32BF\\uA620-\\uA629\\uA6E6-\\uA6EF\\uA830-\\uA835\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uA9F0-\\uA9F9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19])([A-Z\\xC0-\\xD6\\xD8-\\xDE\\u0100\\u0102\\u0104\\u0106\\u0108\\u010A\\u010C\\u010E\\u0110\\u0112\\u0114\\u0116\\u0118\\u011A\\u011C\\u011E\\u0120\\u0122\\u0124\\u0126\\u0128\\u012A\\u012C\\u012E\\u0130\\u0132\\u0134\\u0136\\u0139\\u013B\\u013D\\u013F\\u0141\\u0143\\u0145\\u0147\\u014A\\u014C\\u014E\\u0150\\u0152\\u0154\\u0156\\u0158\\u015A\\u015C\\u015E\\u0160\\u0162\\u0164\\u0166\\u0168\\u016A\\u016C\\u016E\\u0170\\u0172\\u0174\\u0176\\u0178\\u0179\\u017B\\u017D\\u0181\\u0182\\u0184\\u0186\\u0187\\u0189-\\u018B\\u018E-\\u0191\\u0193\\u0194\\u0196-\\u0198\\u019C\\u019D\\u019F\\u01A0\\u01A2\\u01A4\\u01A6\\u01A7\\u01A9\\u01AC\\u01AE\\u01AF\\u01B1-\\u01B3\\u01B5\\u01B7\\u01B8\\u01BC\\u01C4\\u01C7\\u01CA\\u01CD\\u01CF\\u01D1\\u01D3\\u01D5\\u01D7\\u01D9\\u01DB\\u01DE\\u01E0\\u01E2\\u01E4\\u01E6\\u01E8\\u01EA\\u01EC\\u01EE\\u01F1\\u01F4\\u01F6-\\u01F8\\u01FA\\u01FC\\u01FE\\u0200\\u0202\\u0204\\u0206\\u0208\\u020A\\u020C\\u020E\\u0210\\u0212\\u0214\\u0216\\u0218\\u021A\\u021C\\u021E\\u0220\\u0222\\u0224\\u0226\\u0228\\u022A\\u022C\\u022E\\u0230\\u0232\\u023A\\u023B\\u023D\\u023E\\u0241\\u0243-\\u0246\\u0248\\u024A\\u024C\\u024E\\u0370\\u0372\\u0376\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E\\u038F\\u0391-\\u03A1\\u03A3-\\u03AB\\u03CF\\u03D2-\\u03D4\\u03D8\\u03DA\\u03DC\\u03DE\\u03E0\\u03E2\\u03E4\\u03E6\\u03E8\\u03EA\\u03EC\\u03EE\\u03F4\\u03F7\\u03F9\\u03FA\\u03FD-\\u042F\\u0460\\u0462\\u0464\\u0466\\u0468\\u046A\\u046C\\u046E\\u0470\\u0472\\u0474\\u0476\\u0478\\u047A\\u047C\\u047E\\u0480\\u048A\\u048C\\u048E\\u0490\\u0492\\u0494\\u0496\\u0498\\u049A\\u049C\\u049E\\u04A0\\u04A2\\u04A4\\u04A6\\u04A8\\u04AA\\u04AC\\u04AE\\u04B0\\u04B2\\u04B4\\u04B6\\u04B8\\u04BA\\u04BC\\u04BE\\u04C0\\u04C1\\u04C3\\u04C5\\u04C7\\u04C9\\u04CB\\u04CD\\u04D0\\u04D2\\u04D4\\u04D6\\u04D8\\u04DA\\u04DC\\u04DE\\u04E0\\u04E2\\u04E4\\u04E6\\u04E8\\u04EA\\u04EC\\u04EE\\u04F0\\u04F2\\u04F4\\u04F6\\u04F8\\u04FA\\u04FC\\u04FE\\u0500\\u0502\\u0504\\u0506\\u0508\\u050A\\u050C\\u050E\\u0510\\u0512\\u0514\\u0516\\u0518\\u051A\\u051C\\u051E\\u0520\\u0522\\u0524\\u0526\\u0528\\u052A\\u052C\\u052E\\u0531-\\u0556\\u10A0-\\u10C5\\u10C7\\u10CD\\u13A0-\\u13F5\\u1E00\\u1E02\\u1E04\\u1E06\\u1E08\\u1E0A\\u1E0C\\u1E0E\\u1E10\\u1E12\\u1E14\\u1E16\\u1E18\\u1E1A\\u1E1C\\u1E1E\\u1E20\\u1E22\\u1E24\\u1E26\\u1E28\\u1E2A\\u1E2C\\u1E2E\\u1E30\\u1E32\\u1E34\\u1E36\\u1E38\\u1E3A\\u1E3C\\u1E3E\\u1E40\\u1E42\\u1E44\\u1E46\\u1E48\\u1E4A\\u1E4C\\u1E4E\\u1E50\\u1E52\\u1E54\\u1E56\\u1E58\\u1E5A\\u1E5C\\u1E5E\\u1E60\\u1E62\\u1E64\\u1E66\\u1E68\\u1E6A\\u1E6C\\u1E6E\\u1E70\\u1E72\\u1E74\\u1E76\\u1E78\\u1E7A\\u1E7C\\u1E7E\\u1E80\\u1E82\\u1E84\\u1E86\\u1E88\\u1E8A\\u1E8C\\u1E8E\\u1E90\\u1E92\\u1E94\\u1E9E\\u1EA0\\u1EA2\\u1EA4\\u1EA6\\u1EA8\\u1EAA\\u1EAC\\u1EAE\\u1EB0\\u1EB2\\u1EB4\\u1EB6\\u1EB8\\u1EBA\\u1EBC\\u1EBE\\u1EC0\\u1EC2\\u1EC4\\u1EC6\\u1EC8\\u1ECA\\u1ECC\\u1ECE\\u1ED0\\u1ED2\\u1ED4\\u1ED6\\u1ED8\\u1EDA\\u1EDC\\u1EDE\\u1EE0\\u1EE2\\u1EE4\\u1EE6\\u1EE8\\u1EEA\\u1EEC\\u1EEE\\u1EF0\\u1EF2\\u1EF4\\u1EF6\\u1EF8\\u1EFA\\u1EFC\\u1EFE\\u1F08-\\u1F0F\\u1F18-\\u1F1D\\u1F28-\\u1F2F\\u1F38-\\u1F3F\\u1F48-\\u1F4D\\u1F59\\u1F5B\\u1F5D\\u1F5F\\u1F68-\\u1F6F\\u1FB8-\\u1FBB\\u1FC8-\\u1FCB\\u1FD8-\\u1FDB\\u1FE8-\\u1FEC\\u1FF8-\\u1FFB\\u2102\\u2107\\u210B-\\u210D\\u2110-\\u2112\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u2130-\\u2133\\u213E\\u213F\\u2145\\u2183\\u2C00-\\u2C2E\\u2C60\\u2C62-\\u2C64\\u2C67\\u2C69\\u2C6B\\u2C6D-\\u2C70\\u2C72\\u2C75\\u2C7E-\\u2C80\\u2C82\\u2C84\\u2C86\\u2C88\\u2C8A\\u2C8C\\u2C8E\\u2C90\\u2C92\\u2C94\\u2C96\\u2C98\\u2C9A\\u2C9C\\u2C9E\\u2CA0\\u2CA2\\u2CA4\\u2CA6\\u2CA8\\u2CAA\\u2CAC\\u2CAE\\u2CB0\\u2CB2\\u2CB4\\u2CB6\\u2CB8\\u2CBA\\u2CBC\\u2CBE\\u2CC0\\u2CC2\\u2CC4\\u2CC6\\u2CC8\\u2CCA\\u2CCC\\u2CCE\\u2CD0\\u2CD2\\u2CD4\\u2CD6\\u2CD8\\u2CDA\\u2CDC\\u2CDE\\u2CE0\\u2CE2\\u2CEB\\u2CED\\u2CF2\\uA640\\uA642\\uA644\\uA646\\uA648\\uA64A\\uA64C\\uA64E\\uA650\\uA652\\uA654\\uA656\\uA658\\uA65A\\uA65C\\uA65E\\uA660\\uA662\\uA664\\uA666\\uA668\\uA66A\\uA66C\\uA680\\uA682\\uA684\\uA686\\uA688\\uA68A\\uA68C\\uA68E\\uA690\\uA692\\uA694\\uA696\\uA698\\uA69A\\uA722\\uA724\\uA726\\uA728\\uA72A\\uA72C\\uA72E\\uA732\\uA734\\uA736\\uA738\\uA73A\\uA73C\\uA73E\\uA740\\uA742\\uA744\\uA746\\uA748\\uA74A\\uA74C\\uA74E\\uA750\\uA752\\uA754\\uA756\\uA758\\uA75A\\uA75C\\uA75E\\uA760\\uA762\\uA764\\uA766\\uA768\\uA76A\\uA76C\\uA76E\\uA779\\uA77B\\uA77D\\uA77E\\uA780\\uA782\\uA784\\uA786\\uA78B\\uA78D\\uA790\\uA792\\uA796\\uA798\\uA79A\\uA79C\\uA79E\\uA7A0\\uA7A2\\uA7A4\\uA7A6\\uA7A8\\uA7AA-\\uA7AD\\uA7B0-\\uA7B4\\uA7B6\\uFF21-\\uFF3A])/g\n\n\n\n// WEBPACK FOOTER //\n// ./~/snake-case/~/no-case/vendor/camel-case-regexp.js","module.exports = /([A-Z\\xC0-\\xD6\\xD8-\\xDE\\u0100\\u0102\\u0104\\u0106\\u0108\\u010A\\u010C\\u010E\\u0110\\u0112\\u0114\\u0116\\u0118\\u011A\\u011C\\u011E\\u0120\\u0122\\u0124\\u0126\\u0128\\u012A\\u012C\\u012E\\u0130\\u0132\\u0134\\u0136\\u0139\\u013B\\u013D\\u013F\\u0141\\u0143\\u0145\\u0147\\u014A\\u014C\\u014E\\u0150\\u0152\\u0154\\u0156\\u0158\\u015A\\u015C\\u015E\\u0160\\u0162\\u0164\\u0166\\u0168\\u016A\\u016C\\u016E\\u0170\\u0172\\u0174\\u0176\\u0178\\u0179\\u017B\\u017D\\u0181\\u0182\\u0184\\u0186\\u0187\\u0189-\\u018B\\u018E-\\u0191\\u0193\\u0194\\u0196-\\u0198\\u019C\\u019D\\u019F\\u01A0\\u01A2\\u01A4\\u01A6\\u01A7\\u01A9\\u01AC\\u01AE\\u01AF\\u01B1-\\u01B3\\u01B5\\u01B7\\u01B8\\u01BC\\u01C4\\u01C7\\u01CA\\u01CD\\u01CF\\u01D1\\u01D3\\u01D5\\u01D7\\u01D9\\u01DB\\u01DE\\u01E0\\u01E2\\u01E4\\u01E6\\u01E8\\u01EA\\u01EC\\u01EE\\u01F1\\u01F4\\u01F6-\\u01F8\\u01FA\\u01FC\\u01FE\\u0200\\u0202\\u0204\\u0206\\u0208\\u020A\\u020C\\u020E\\u0210\\u0212\\u0214\\u0216\\u0218\\u021A\\u021C\\u021E\\u0220\\u0222\\u0224\\u0226\\u0228\\u022A\\u022C\\u022E\\u0230\\u0232\\u023A\\u023B\\u023D\\u023E\\u0241\\u0243-\\u0246\\u0248\\u024A\\u024C\\u024E\\u0370\\u0372\\u0376\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E\\u038F\\u0391-\\u03A1\\u03A3-\\u03AB\\u03CF\\u03D2-\\u03D4\\u03D8\\u03DA\\u03DC\\u03DE\\u03E0\\u03E2\\u03E4\\u03E6\\u03E8\\u03EA\\u03EC\\u03EE\\u03F4\\u03F7\\u03F9\\u03FA\\u03FD-\\u042F\\u0460\\u0462\\u0464\\u0466\\u0468\\u046A\\u046C\\u046E\\u0470\\u0472\\u0474\\u0476\\u0478\\u047A\\u047C\\u047E\\u0480\\u048A\\u048C\\u048E\\u0490\\u0492\\u0494\\u0496\\u0498\\u049A\\u049C\\u049E\\u04A0\\u04A2\\u04A4\\u04A6\\u04A8\\u04AA\\u04AC\\u04AE\\u04B0\\u04B2\\u04B4\\u04B6\\u04B8\\u04BA\\u04BC\\u04BE\\u04C0\\u04C1\\u04C3\\u04C5\\u04C7\\u04C9\\u04CB\\u04CD\\u04D0\\u04D2\\u04D4\\u04D6\\u04D8\\u04DA\\u04DC\\u04DE\\u04E0\\u04E2\\u04E4\\u04E6\\u04E8\\u04EA\\u04EC\\u04EE\\u04F0\\u04F2\\u04F4\\u04F6\\u04F8\\u04FA\\u04FC\\u04FE\\u0500\\u0502\\u0504\\u0506\\u0508\\u050A\\u050C\\u050E\\u0510\\u0512\\u0514\\u0516\\u0518\\u051A\\u051C\\u051E\\u0520\\u0522\\u0524\\u0526\\u0528\\u052A\\u052C\\u052E\\u0531-\\u0556\\u10A0-\\u10C5\\u10C7\\u10CD\\u13A0-\\u13F5\\u1E00\\u1E02\\u1E04\\u1E06\\u1E08\\u1E0A\\u1E0C\\u1E0E\\u1E10\\u1E12\\u1E14\\u1E16\\u1E18\\u1E1A\\u1E1C\\u1E1E\\u1E20\\u1E22\\u1E24\\u1E26\\u1E28\\u1E2A\\u1E2C\\u1E2E\\u1E30\\u1E32\\u1E34\\u1E36\\u1E38\\u1E3A\\u1E3C\\u1E3E\\u1E40\\u1E42\\u1E44\\u1E46\\u1E48\\u1E4A\\u1E4C\\u1E4E\\u1E50\\u1E52\\u1E54\\u1E56\\u1E58\\u1E5A\\u1E5C\\u1E5E\\u1E60\\u1E62\\u1E64\\u1E66\\u1E68\\u1E6A\\u1E6C\\u1E6E\\u1E70\\u1E72\\u1E74\\u1E76\\u1E78\\u1E7A\\u1E7C\\u1E7E\\u1E80\\u1E82\\u1E84\\u1E86\\u1E88\\u1E8A\\u1E8C\\u1E8E\\u1E90\\u1E92\\u1E94\\u1E9E\\u1EA0\\u1EA2\\u1EA4\\u1EA6\\u1EA8\\u1EAA\\u1EAC\\u1EAE\\u1EB0\\u1EB2\\u1EB4\\u1EB6\\u1EB8\\u1EBA\\u1EBC\\u1EBE\\u1EC0\\u1EC2\\u1EC4\\u1EC6\\u1EC8\\u1ECA\\u1ECC\\u1ECE\\u1ED0\\u1ED2\\u1ED4\\u1ED6\\u1ED8\\u1EDA\\u1EDC\\u1EDE\\u1EE0\\u1EE2\\u1EE4\\u1EE6\\u1EE8\\u1EEA\\u1EEC\\u1EEE\\u1EF0\\u1EF2\\u1EF4\\u1EF6\\u1EF8\\u1EFA\\u1EFC\\u1EFE\\u1F08-\\u1F0F\\u1F18-\\u1F1D\\u1F28-\\u1F2F\\u1F38-\\u1F3F\\u1F48-\\u1F4D\\u1F59\\u1F5B\\u1F5D\\u1F5F\\u1F68-\\u1F6F\\u1FB8-\\u1FBB\\u1FC8-\\u1FCB\\u1FD8-\\u1FDB\\u1FE8-\\u1FEC\\u1FF8-\\u1FFB\\u2102\\u2107\\u210B-\\u210D\\u2110-\\u2112\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u2130-\\u2133\\u213E\\u213F\\u2145\\u2183\\u2C00-\\u2C2E\\u2C60\\u2C62-\\u2C64\\u2C67\\u2C69\\u2C6B\\u2C6D-\\u2C70\\u2C72\\u2C75\\u2C7E-\\u2C80\\u2C82\\u2C84\\u2C86\\u2C88\\u2C8A\\u2C8C\\u2C8E\\u2C90\\u2C92\\u2C94\\u2C96\\u2C98\\u2C9A\\u2C9C\\u2C9E\\u2CA0\\u2CA2\\u2CA4\\u2CA6\\u2CA8\\u2CAA\\u2CAC\\u2CAE\\u2CB0\\u2CB2\\u2CB4\\u2CB6\\u2CB8\\u2CBA\\u2CBC\\u2CBE\\u2CC0\\u2CC2\\u2CC4\\u2CC6\\u2CC8\\u2CCA\\u2CCC\\u2CCE\\u2CD0\\u2CD2\\u2CD4\\u2CD6\\u2CD8\\u2CDA\\u2CDC\\u2CDE\\u2CE0\\u2CE2\\u2CEB\\u2CED\\u2CF2\\uA640\\uA642\\uA644\\uA646\\uA648\\uA64A\\uA64C\\uA64E\\uA650\\uA652\\uA654\\uA656\\uA658\\uA65A\\uA65C\\uA65E\\uA660\\uA662\\uA664\\uA666\\uA668\\uA66A\\uA66C\\uA680\\uA682\\uA684\\uA686\\uA688\\uA68A\\uA68C\\uA68E\\uA690\\uA692\\uA694\\uA696\\uA698\\uA69A\\uA722\\uA724\\uA726\\uA728\\uA72A\\uA72C\\uA72E\\uA732\\uA734\\uA736\\uA738\\uA73A\\uA73C\\uA73E\\uA740\\uA742\\uA744\\uA746\\uA748\\uA74A\\uA74C\\uA74E\\uA750\\uA752\\uA754\\uA756\\uA758\\uA75A\\uA75C\\uA75E\\uA760\\uA762\\uA764\\uA766\\uA768\\uA76A\\uA76C\\uA76E\\uA779\\uA77B\\uA77D\\uA77E\\uA780\\uA782\\uA784\\uA786\\uA78B\\uA78D\\uA790\\uA792\\uA796\\uA798\\uA79A\\uA79C\\uA79E\\uA7A0\\uA7A2\\uA7A4\\uA7A6\\uA7A8\\uA7AA-\\uA7AD\\uA7B0-\\uA7B4\\uA7B6\\uFF21-\\uFF3A])([A-Z\\xC0-\\xD6\\xD8-\\xDE\\u0100\\u0102\\u0104\\u0106\\u0108\\u010A\\u010C\\u010E\\u0110\\u0112\\u0114\\u0116\\u0118\\u011A\\u011C\\u011E\\u0120\\u0122\\u0124\\u0126\\u0128\\u012A\\u012C\\u012E\\u0130\\u0132\\u0134\\u0136\\u0139\\u013B\\u013D\\u013F\\u0141\\u0143\\u0145\\u0147\\u014A\\u014C\\u014E\\u0150\\u0152\\u0154\\u0156\\u0158\\u015A\\u015C\\u015E\\u0160\\u0162\\u0164\\u0166\\u0168\\u016A\\u016C\\u016E\\u0170\\u0172\\u0174\\u0176\\u0178\\u0179\\u017B\\u017D\\u0181\\u0182\\u0184\\u0186\\u0187\\u0189-\\u018B\\u018E-\\u0191\\u0193\\u0194\\u0196-\\u0198\\u019C\\u019D\\u019F\\u01A0\\u01A2\\u01A4\\u01A6\\u01A7\\u01A9\\u01AC\\u01AE\\u01AF\\u01B1-\\u01B3\\u01B5\\u01B7\\u01B8\\u01BC\\u01C4\\u01C7\\u01CA\\u01CD\\u01CF\\u01D1\\u01D3\\u01D5\\u01D7\\u01D9\\u01DB\\u01DE\\u01E0\\u01E2\\u01E4\\u01E6\\u01E8\\u01EA\\u01EC\\u01EE\\u01F1\\u01F4\\u01F6-\\u01F8\\u01FA\\u01FC\\u01FE\\u0200\\u0202\\u0204\\u0206\\u0208\\u020A\\u020C\\u020E\\u0210\\u0212\\u0214\\u0216\\u0218\\u021A\\u021C\\u021E\\u0220\\u0222\\u0224\\u0226\\u0228\\u022A\\u022C\\u022E\\u0230\\u0232\\u023A\\u023B\\u023D\\u023E\\u0241\\u0243-\\u0246\\u0248\\u024A\\u024C\\u024E\\u0370\\u0372\\u0376\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E\\u038F\\u0391-\\u03A1\\u03A3-\\u03AB\\u03CF\\u03D2-\\u03D4\\u03D8\\u03DA\\u03DC\\u03DE\\u03E0\\u03E2\\u03E4\\u03E6\\u03E8\\u03EA\\u03EC\\u03EE\\u03F4\\u03F7\\u03F9\\u03FA\\u03FD-\\u042F\\u0460\\u0462\\u0464\\u0466\\u0468\\u046A\\u046C\\u046E\\u0470\\u0472\\u0474\\u0476\\u0478\\u047A\\u047C\\u047E\\u0480\\u048A\\u048C\\u048E\\u0490\\u0492\\u0494\\u0496\\u0498\\u049A\\u049C\\u049E\\u04A0\\u04A2\\u04A4\\u04A6\\u04A8\\u04AA\\u04AC\\u04AE\\u04B0\\u04B2\\u04B4\\u04B6\\u04B8\\u04BA\\u04BC\\u04BE\\u04C0\\u04C1\\u04C3\\u04C5\\u04C7\\u04C9\\u04CB\\u04CD\\u04D0\\u04D2\\u04D4\\u04D6\\u04D8\\u04DA\\u04DC\\u04DE\\u04E0\\u04E2\\u04E4\\u04E6\\u04E8\\u04EA\\u04EC\\u04EE\\u04F0\\u04F2\\u04F4\\u04F6\\u04F8\\u04FA\\u04FC\\u04FE\\u0500\\u0502\\u0504\\u0506\\u0508\\u050A\\u050C\\u050E\\u0510\\u0512\\u0514\\u0516\\u0518\\u051A\\u051C\\u051E\\u0520\\u0522\\u0524\\u0526\\u0528\\u052A\\u052C\\u052E\\u0531-\\u0556\\u10A0-\\u10C5\\u10C7\\u10CD\\u13A0-\\u13F5\\u1E00\\u1E02\\u1E04\\u1E06\\u1E08\\u1E0A\\u1E0C\\u1E0E\\u1E10\\u1E12\\u1E14\\u1E16\\u1E18\\u1E1A\\u1E1C\\u1E1E\\u1E20\\u1E22\\u1E24\\u1E26\\u1E28\\u1E2A\\u1E2C\\u1E2E\\u1E30\\u1E32\\u1E34\\u1E36\\u1E38\\u1E3A\\u1E3C\\u1E3E\\u1E40\\u1E42\\u1E44\\u1E46\\u1E48\\u1E4A\\u1E4C\\u1E4E\\u1E50\\u1E52\\u1E54\\u1E56\\u1E58\\u1E5A\\u1E5C\\u1E5E\\u1E60\\u1E62\\u1E64\\u1E66\\u1E68\\u1E6A\\u1E6C\\u1E6E\\u1E70\\u1E72\\u1E74\\u1E76\\u1E78\\u1E7A\\u1E7C\\u1E7E\\u1E80\\u1E82\\u1E84\\u1E86\\u1E88\\u1E8A\\u1E8C\\u1E8E\\u1E90\\u1E92\\u1E94\\u1E9E\\u1EA0\\u1EA2\\u1EA4\\u1EA6\\u1EA8\\u1EAA\\u1EAC\\u1EAE\\u1EB0\\u1EB2\\u1EB4\\u1EB6\\u1EB8\\u1EBA\\u1EBC\\u1EBE\\u1EC0\\u1EC2\\u1EC4\\u1EC6\\u1EC8\\u1ECA\\u1ECC\\u1ECE\\u1ED0\\u1ED2\\u1ED4\\u1ED6\\u1ED8\\u1EDA\\u1EDC\\u1EDE\\u1EE0\\u1EE2\\u1EE4\\u1EE6\\u1EE8\\u1EEA\\u1EEC\\u1EEE\\u1EF0\\u1EF2\\u1EF4\\u1EF6\\u1EF8\\u1EFA\\u1EFC\\u1EFE\\u1F08-\\u1F0F\\u1F18-\\u1F1D\\u1F28-\\u1F2F\\u1F38-\\u1F3F\\u1F48-\\u1F4D\\u1F59\\u1F5B\\u1F5D\\u1F5F\\u1F68-\\u1F6F\\u1FB8-\\u1FBB\\u1FC8-\\u1FCB\\u1FD8-\\u1FDB\\u1FE8-\\u1FEC\\u1FF8-\\u1FFB\\u2102\\u2107\\u210B-\\u210D\\u2110-\\u2112\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u2130-\\u2133\\u213E\\u213F\\u2145\\u2183\\u2C00-\\u2C2E\\u2C60\\u2C62-\\u2C64\\u2C67\\u2C69\\u2C6B\\u2C6D-\\u2C70\\u2C72\\u2C75\\u2C7E-\\u2C80\\u2C82\\u2C84\\u2C86\\u2C88\\u2C8A\\u2C8C\\u2C8E\\u2C90\\u2C92\\u2C94\\u2C96\\u2C98\\u2C9A\\u2C9C\\u2C9E\\u2CA0\\u2CA2\\u2CA4\\u2CA6\\u2CA8\\u2CAA\\u2CAC\\u2CAE\\u2CB0\\u2CB2\\u2CB4\\u2CB6\\u2CB8\\u2CBA\\u2CBC\\u2CBE\\u2CC0\\u2CC2\\u2CC4\\u2CC6\\u2CC8\\u2CCA\\u2CCC\\u2CCE\\u2CD0\\u2CD2\\u2CD4\\u2CD6\\u2CD8\\u2CDA\\u2CDC\\u2CDE\\u2CE0\\u2CE2\\u2CEB\\u2CED\\u2CF2\\uA640\\uA642\\uA644\\uA646\\uA648\\uA64A\\uA64C\\uA64E\\uA650\\uA652\\uA654\\uA656\\uA658\\uA65A\\uA65C\\uA65E\\uA660\\uA662\\uA664\\uA666\\uA668\\uA66A\\uA66C\\uA680\\uA682\\uA684\\uA686\\uA688\\uA68A\\uA68C\\uA68E\\uA690\\uA692\\uA694\\uA696\\uA698\\uA69A\\uA722\\uA724\\uA726\\uA728\\uA72A\\uA72C\\uA72E\\uA732\\uA734\\uA736\\uA738\\uA73A\\uA73C\\uA73E\\uA740\\uA742\\uA744\\uA746\\uA748\\uA74A\\uA74C\\uA74E\\uA750\\uA752\\uA754\\uA756\\uA758\\uA75A\\uA75C\\uA75E\\uA760\\uA762\\uA764\\uA766\\uA768\\uA76A\\uA76C\\uA76E\\uA779\\uA77B\\uA77D\\uA77E\\uA780\\uA782\\uA784\\uA786\\uA78B\\uA78D\\uA790\\uA792\\uA796\\uA798\\uA79A\\uA79C\\uA79E\\uA7A0\\uA7A2\\uA7A4\\uA7A6\\uA7A8\\uA7AA-\\uA7AD\\uA7B0-\\uA7B4\\uA7B6\\uFF21-\\uFF3A][a-z\\xB5\\xDF-\\xF6\\xF8-\\xFF\\u0101\\u0103\\u0105\\u0107\\u0109\\u010B\\u010D\\u010F\\u0111\\u0113\\u0115\\u0117\\u0119\\u011B\\u011D\\u011F\\u0121\\u0123\\u0125\\u0127\\u0129\\u012B\\u012D\\u012F\\u0131\\u0133\\u0135\\u0137\\u0138\\u013A\\u013C\\u013E\\u0140\\u0142\\u0144\\u0146\\u0148\\u0149\\u014B\\u014D\\u014F\\u0151\\u0153\\u0155\\u0157\\u0159\\u015B\\u015D\\u015F\\u0161\\u0163\\u0165\\u0167\\u0169\\u016B\\u016D\\u016F\\u0171\\u0173\\u0175\\u0177\\u017A\\u017C\\u017E-\\u0180\\u0183\\u0185\\u0188\\u018C\\u018D\\u0192\\u0195\\u0199-\\u019B\\u019E\\u01A1\\u01A3\\u01A5\\u01A8\\u01AA\\u01AB\\u01AD\\u01B0\\u01B4\\u01B6\\u01B9\\u01BA\\u01BD-\\u01BF\\u01C6\\u01C9\\u01CC\\u01CE\\u01D0\\u01D2\\u01D4\\u01D6\\u01D8\\u01DA\\u01DC\\u01DD\\u01DF\\u01E1\\u01E3\\u01E5\\u01E7\\u01E9\\u01EB\\u01ED\\u01EF\\u01F0\\u01F3\\u01F5\\u01F9\\u01FB\\u01FD\\u01FF\\u0201\\u0203\\u0205\\u0207\\u0209\\u020B\\u020D\\u020F\\u0211\\u0213\\u0215\\u0217\\u0219\\u021B\\u021D\\u021F\\u0221\\u0223\\u0225\\u0227\\u0229\\u022B\\u022D\\u022F\\u0231\\u0233-\\u0239\\u023C\\u023F\\u0240\\u0242\\u0247\\u0249\\u024B\\u024D\\u024F-\\u0293\\u0295-\\u02AF\\u0371\\u0373\\u0377\\u037B-\\u037D\\u0390\\u03AC-\\u03CE\\u03D0\\u03D1\\u03D5-\\u03D7\\u03D9\\u03DB\\u03DD\\u03DF\\u03E1\\u03E3\\u03E5\\u03E7\\u03E9\\u03EB\\u03ED\\u03EF-\\u03F3\\u03F5\\u03F8\\u03FB\\u03FC\\u0430-\\u045F\\u0461\\u0463\\u0465\\u0467\\u0469\\u046B\\u046D\\u046F\\u0471\\u0473\\u0475\\u0477\\u0479\\u047B\\u047D\\u047F\\u0481\\u048B\\u048D\\u048F\\u0491\\u0493\\u0495\\u0497\\u0499\\u049B\\u049D\\u049F\\u04A1\\u04A3\\u04A5\\u04A7\\u04A9\\u04AB\\u04AD\\u04AF\\u04B1\\u04B3\\u04B5\\u04B7\\u04B9\\u04BB\\u04BD\\u04BF\\u04C2\\u04C4\\u04C6\\u04C8\\u04CA\\u04CC\\u04CE\\u04CF\\u04D1\\u04D3\\u04D5\\u04D7\\u04D9\\u04DB\\u04DD\\u04DF\\u04E1\\u04E3\\u04E5\\u04E7\\u04E9\\u04EB\\u04ED\\u04EF\\u04F1\\u04F3\\u04F5\\u04F7\\u04F9\\u04FB\\u04FD\\u04FF\\u0501\\u0503\\u0505\\u0507\\u0509\\u050B\\u050D\\u050F\\u0511\\u0513\\u0515\\u0517\\u0519\\u051B\\u051D\\u051F\\u0521\\u0523\\u0525\\u0527\\u0529\\u052B\\u052D\\u052F\\u0561-\\u0587\\u13F8-\\u13FD\\u1D00-\\u1D2B\\u1D6B-\\u1D77\\u1D79-\\u1D9A\\u1E01\\u1E03\\u1E05\\u1E07\\u1E09\\u1E0B\\u1E0D\\u1E0F\\u1E11\\u1E13\\u1E15\\u1E17\\u1E19\\u1E1B\\u1E1D\\u1E1F\\u1E21\\u1E23\\u1E25\\u1E27\\u1E29\\u1E2B\\u1E2D\\u1E2F\\u1E31\\u1E33\\u1E35\\u1E37\\u1E39\\u1E3B\\u1E3D\\u1E3F\\u1E41\\u1E43\\u1E45\\u1E47\\u1E49\\u1E4B\\u1E4D\\u1E4F\\u1E51\\u1E53\\u1E55\\u1E57\\u1E59\\u1E5B\\u1E5D\\u1E5F\\u1E61\\u1E63\\u1E65\\u1E67\\u1E69\\u1E6B\\u1E6D\\u1E6F\\u1E71\\u1E73\\u1E75\\u1E77\\u1E79\\u1E7B\\u1E7D\\u1E7F\\u1E81\\u1E83\\u1E85\\u1E87\\u1E89\\u1E8B\\u1E8D\\u1E8F\\u1E91\\u1E93\\u1E95-\\u1E9D\\u1E9F\\u1EA1\\u1EA3\\u1EA5\\u1EA7\\u1EA9\\u1EAB\\u1EAD\\u1EAF\\u1EB1\\u1EB3\\u1EB5\\u1EB7\\u1EB9\\u1EBB\\u1EBD\\u1EBF\\u1EC1\\u1EC3\\u1EC5\\u1EC7\\u1EC9\\u1ECB\\u1ECD\\u1ECF\\u1ED1\\u1ED3\\u1ED5\\u1ED7\\u1ED9\\u1EDB\\u1EDD\\u1EDF\\u1EE1\\u1EE3\\u1EE5\\u1EE7\\u1EE9\\u1EEB\\u1EED\\u1EEF\\u1EF1\\u1EF3\\u1EF5\\u1EF7\\u1EF9\\u1EFB\\u1EFD\\u1EFF-\\u1F07\\u1F10-\\u1F15\\u1F20-\\u1F27\\u1F30-\\u1F37\\u1F40-\\u1F45\\u1F50-\\u1F57\\u1F60-\\u1F67\\u1F70-\\u1F7D\\u1F80-\\u1F87\\u1F90-\\u1F97\\u1FA0-\\u1FA7\\u1FB0-\\u1FB4\\u1FB6\\u1FB7\\u1FBE\\u1FC2-\\u1FC4\\u1FC6\\u1FC7\\u1FD0-\\u1FD3\\u1FD6\\u1FD7\\u1FE0-\\u1FE7\\u1FF2-\\u1FF4\\u1FF6\\u1FF7\\u210A\\u210E\\u210F\\u2113\\u212F\\u2134\\u2139\\u213C\\u213D\\u2146-\\u2149\\u214E\\u2184\\u2C30-\\u2C5E\\u2C61\\u2C65\\u2C66\\u2C68\\u2C6A\\u2C6C\\u2C71\\u2C73\\u2C74\\u2C76-\\u2C7B\\u2C81\\u2C83\\u2C85\\u2C87\\u2C89\\u2C8B\\u2C8D\\u2C8F\\u2C91\\u2C93\\u2C95\\u2C97\\u2C99\\u2C9B\\u2C9D\\u2C9F\\u2CA1\\u2CA3\\u2CA5\\u2CA7\\u2CA9\\u2CAB\\u2CAD\\u2CAF\\u2CB1\\u2CB3\\u2CB5\\u2CB7\\u2CB9\\u2CBB\\u2CBD\\u2CBF\\u2CC1\\u2CC3\\u2CC5\\u2CC7\\u2CC9\\u2CCB\\u2CCD\\u2CCF\\u2CD1\\u2CD3\\u2CD5\\u2CD7\\u2CD9\\u2CDB\\u2CDD\\u2CDF\\u2CE1\\u2CE3\\u2CE4\\u2CEC\\u2CEE\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\uA641\\uA643\\uA645\\uA647\\uA649\\uA64B\\uA64D\\uA64F\\uA651\\uA653\\uA655\\uA657\\uA659\\uA65B\\uA65D\\uA65F\\uA661\\uA663\\uA665\\uA667\\uA669\\uA66B\\uA66D\\uA681\\uA683\\uA685\\uA687\\uA689\\uA68B\\uA68D\\uA68F\\uA691\\uA693\\uA695\\uA697\\uA699\\uA69B\\uA723\\uA725\\uA727\\uA729\\uA72B\\uA72D\\uA72F-\\uA731\\uA733\\uA735\\uA737\\uA739\\uA73B\\uA73D\\uA73F\\uA741\\uA743\\uA745\\uA747\\uA749\\uA74B\\uA74D\\uA74F\\uA751\\uA753\\uA755\\uA757\\uA759\\uA75B\\uA75D\\uA75F\\uA761\\uA763\\uA765\\uA767\\uA769\\uA76B\\uA76D\\uA76F\\uA771-\\uA778\\uA77A\\uA77C\\uA77F\\uA781\\uA783\\uA785\\uA787\\uA78C\\uA78E\\uA791\\uA793-\\uA795\\uA797\\uA799\\uA79B\\uA79D\\uA79F\\uA7A1\\uA7A3\\uA7A5\\uA7A7\\uA7A9\\uA7B5\\uA7B7\\uA7FA\\uAB30-\\uAB5A\\uAB60-\\uAB65\\uAB70-\\uABBF\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFF41-\\uFF5A])/g\n\n\n\n// WEBPACK FOOTER //\n// ./~/snake-case/~/no-case/vendor/camel-case-upper-regexp.js","module.exports = /[^A-Za-z\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B4\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D5F-\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16F1-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7AD\\uA7B0-\\uA7B7\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC0-9\\xB2\\xB3\\xB9\\xBC-\\xBE\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u09F4-\\u09F9\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0B72-\\u0B77\\u0BE6-\\u0BF2\\u0C66-\\u0C6F\\u0C78-\\u0C7E\\u0CE6-\\u0CEF\\u0D66-\\u0D75\\u0DE6-\\u0DEF\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F33\\u1040-\\u1049\\u1090-\\u1099\\u1369-\\u137C\\u16EE-\\u16F0\\u17E0-\\u17E9\\u17F0-\\u17F9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19DA\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\u2070\\u2074-\\u2079\\u2080-\\u2089\\u2150-\\u2182\\u2185-\\u2189\\u2460-\\u249B\\u24EA-\\u24FF\\u2776-\\u2793\\u2CFD\\u3007\\u3021-\\u3029\\u3038-\\u303A\\u3192-\\u3195\\u3220-\\u3229\\u3248-\\u324F\\u3251-\\u325F\\u3280-\\u3289\\u32B1-\\u32BF\\uA620-\\uA629\\uA6E6-\\uA6EF\\uA830-\\uA835\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uA9F0-\\uA9F9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19]+/g\n\n\n\n// WEBPACK FOOTER //\n// ./~/snake-case/~/no-case/vendor/non-word-regexp.js","var noCase = require('no-case')\n\n/**\n * Snake case a string.\n *\n * @param  {string} value\n * @param  {string} [locale]\n * @return {string}\n */\nmodule.exports = function (value, locale) {\n  return noCase(value, locale, '_')\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/snake-case/snake-case.js","module.exports = require('./src/TrieSearch');\n\n\n// WEBPACK FOOTER //\n// ./~/trie-search/index.js","var HashArray = require('hasharray');\n\nvar MAX_CACHE_SIZE = 64;\n\nvar TrieSearch = function (keyFields, options) {\n  this.options = options || {};\n\n  // Default ignoreCase to true\n  this.options.ignoreCase = (this.options.ignoreCase === undefined) ? true : this.options.ignoreCase;\n  this.options.maxCacheSize = this.options.maxCacheSize || MAX_CACHE_SIZE;\n  this.options.cache = this.options.hasOwnProperty('cache') ? this.options.cache : true;\n  this.options.splitOnRegEx = this.options.hasOwnProperty('splitOnRegEx') ? this.options.splitOnRegEx : /\\s/g;\n  this.options.min = this.options.min || 1;\n  this.options.keepAll = this.options.hasOwnProperty('keepAll') ? this.options.keepAll : false;\n  this.options.keepAllKey = this.options.hasOwnProperty('keepAllKey') ? this.options.keepAllKey : 'id';\n\n  this.keyFields = keyFields ? (keyFields instanceof Array ? keyFields : [keyFields]) : [];\n  this.root = {};\n  this.size = 0;\n\n  if (this.options.cache) {\n    this.getCache = new HashArray('key');\n  }\n};\n\nfunction deepLookup(obj, keys) {\n  return keys.length === 1 ? obj[keys[0]] : deepLookup(obj[keys[0]], keys.slice(1, keys.length));\n}\n\nTrieSearch.prototype = {\n  add: function (obj, customKeys) {\n    if (this.options.cache)\n      this.clearCache();\n\n    // Someone might have called add via an array forEach where the second param is a number\n    if (typeof customKeys === 'number') {\n      customKeys = undefined;\n    }\n\n    var keyFields = customKeys || this.keyFields;\n\n    for (var k in keyFields)\n    {\n      var key = keyFields[k],\n        isKeyArr = key instanceof Array,\n        val = isKeyArr ? deepLookup(obj, key) : obj[key];\n\n      if (!val) continue;\n      \n      val = val.toString();\n\n      val = this.options.ignoreCase ? val.toLowerCase() : val;\n\n      this.map(val, obj);\n    }\n  },\n  addAll: function (arr, customKeys) {\n    for (var i = 0; i < arr.length; i++)\n      this.add(arr[i], customKeys);\n  },\n  reset: function () {\n    this.root = {};\n    this.size = 0;\n  },\n  clearCache: function () {\n    // if (this.getCache && !this.getCache._list.length) {\n    //   return;\n    // }\n    this.getCache = new HashArray('key');\n  },\n  cleanCache: function () {\n    while (this.getCache.all.length > this.options.maxCacheSize)\n      this.getCache.remove(this.getCache.all[0]);\n  },\n  addFromObject: function (obj, valueField) {\n    if (this.options.cache)\n      this.clearCache();\n\n    valueField = valueField || 'value';\n\n    if (this.keyFields.indexOf('_key_') == -1)\n      this.keyFields.push('_key_');\n\n    for (var key in obj)\n    {\n      var o = {_key_: key};\n      o[valueField] = obj[key];\n      this.add(o);\n    }\n  },\n  map: function (key, value) {\n    if (this.options.splitOnRegEx && this.options.splitOnRegEx.test(key))\n    {\n      var phrases = key.split(this.options.splitOnRegEx);\n\n      for (var i = 0, l = phrases.length; i < l; i++)\n        this.map(phrases[i], value);\n\n      return;\n    }\n\n    if (this.options.cache)\n      this.clearCache();\n\n    if (this.options.keepAll) {\n      this.indexed = this.indexed || new HashArray([this.options.keepAllKey]);\n      this.indexed.add(value);\n    }\n\n    if (this.options.ignoreCase) {\n      key = key.toLowerCase();\n    }\n\n    var keyArr = this.keyToArr(key),\n      self = this;\n\n    insert(keyArr, value, this.root);\n\n    function insert(keyArr, value, node) {\n      if (keyArr.length == 0)\n      {\n        node['value'] = node['value'] || [];\n        node['value'].push(value);\n        return; \n      }\n\n      var k = keyArr.shift();\n\n      if (!node[k])\n        self.size++;\n\n      node[k] = node[k] || {};\n\n      insert(keyArr, value, node[k])\n    }\n  },\n  keyToArr: function (key) {\n    var keyArr;\n      \n    if (this.options.min && this.options.min > 1)\n    {\n      if (key.length < this.options.min)\n        return [];\n\n      keyArr = [key.substr(0, this.options.min)];\n      keyArr = keyArr.concat(key.substr(this.options.min).split(''));\n    }\n    else keyArr = key.split('');\n\n    return keyArr;\n  },\n  findNode: function (key) {\n    if (this.options.min > 0 && key.length < this.options.min)\n      return [];\n\n    return f(this.keyToArr(key), this.root);\n\n    function f(keyArr, node) {\n      if (!node) return undefined;\n      if (keyArr.length == 0) return node;\n\n      var k = keyArr.shift();\n      return f(keyArr, node[k]);\n    }\n  },\n  _get: function (phrase) {\n    phrase = this.options.ignoreCase ? phrase.toLowerCase() : phrase;\n    \n    var c, node;\n    if (this.options.cache && (c = this.getCache.get(phrase)))\n      return c.value;\n\n    var ret = undefined,\n      haKeyFields = this.options.indexField ? [this.options.indexField] : this.keyFields,\n      words = this.options.splitOnRegEx ? phrase.split(this.options.splitOnRegEx) : [phrase];\n\n    for (var w = 0, l = words.length; w < l; w++)\n    {\n      if (this.options.min && words[w].length < this.options.min)\n        continue;\n\n      var temp = new HashArray(haKeyFields);\n\n      if (node = this.findNode(words[w]))\n        aggregate(node, temp);\n\n      ret = ret ? ret.intersection(temp) : temp;\n    }\n    \n    var v = ret ? ret.all : [];\n\n    if (this.options.cache)\n    {\n      this.getCache.add({key: phrase, value: v});\n      this.cleanCache();\n    }\n\n    return v;\n    \n    function aggregate(node, ha) {\n      if (node.value && node.value.length)\n        ha.addAll(node.value);\n\n      for (var k in node)\n        if (k != 'value')\n          aggregate(node[k], ha);\n    }\n  },\n  get: function (phrases) {\n    var self = this,\n      haKeyFields = this.options.indexField ? [this.options.indexField] : this.keyFields,\n      ret = undefined;\n\n    phrases = (phrases instanceof Array) ? phrases : [phrases];\n\n    for (var i = 0, l = phrases.length; i < l; i++)\n    {\n      var temp = this._get(phrases[i]);\n      ret = ret ? ret.addAll(temp) : new HashArray(haKeyFields).addAll(temp);\n    }\n    \n    return ret.all;\n  }\n};\n\nmodule.exports = TrieSearch;\n\n\n\n// WEBPACK FOOTER //\n// ./~/trie-search/src/TrieSearch.js","import RingaHashArray from './RingaHashArray';\nimport {inspectorDispatch} from './debug/InspectorController';\n\nclass Thread extends RingaHashArray {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  constructor(name, threadFactory, options) {\n    super(name);\n\n    this.options = options;\n    this.threadFactory = threadFactory;\n\n    this.running = false;\n\n    // TODO: a executor thread can potentially spawn child executor threads\n    this.children = [];\n  }\n\n  get controller() {\n    return this.threadFactory.controller;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  buildExecutors() {\n    this.threadFactory.all.forEach((executorFactory) => {\n      let executor = executorFactory.build(this);\n\n      this.add(executor);\n    });\n  }\n\n  run(ringaEvent, doneHandler, failHandler) {\n    if (__DEV__ && this.running) {\n      throw Error('Thread::run(): you cannot start a thread while it is already running!');\n    }\n\n    if (__DEV__ && this.threadFactory.all.length === 0) {\n      throw Error('Thread::run(): attempting to run a thread with no executors!');\n    }\n\n    if (__DEV__ && !ringaEvent) {\n      throw Error('Thread::run(): cannot run a thread without a RingaEvent!');\n    }\n\n    this.ringaEvent = ringaEvent;\n    this.doneHandler = doneHandler;\n    this.failHandler = failHandler;\n\n    this.buildExecutors();\n\n    // The current executor we are running\n    this.index = 0;\n\n    this.executeNext();\n  }\n\n  executeNext() {\n    let executor = this.all[this.index];\n\n    if (this.index > 0) {\n      let previousExecutor = this.all[this.index-1];\n      this.removeExecutor(previousExecutor);\n    }\n    try {\n      this.ringaEvent.addDebug(`Executing: ${executor}`);\n\n      executor._execute(this._executorDoneHandler.bind(this), this._executorFailHandler.bind(this));\n    } catch (error) {\n      this._executorFailHandler(error);\n    }\n  }\n\n  kill() {\n    this.running = false;\n  }\n\n  removeExecutor(executor) {\n    if (__DEV__ && !this.controller.__blockRingaEvents) {\n      inspectorDispatch('ringaExecutorEnd', {\n        executor\n      });\n    }\n\n    if (this.has(executor)) {\n      this.remove(executor);\n    }\n  }\n\n  //-----------------------------------\n  // Events\n  //-----------------------------------\n  _executorDoneHandler() {\n    let executor;\n\n    if (!this.all[this.index]) {\n      this._finCouldNotFindError();\n    } else {\n      executor = this.all[this.index].destroy(true);\n    }\n\n    this.ringaEvent.addDebug(`Done: ${executor}`);\n\n    this.index++;\n\n    if (this.ringaEvent.detail._promise) {\n      delete this.ringaEvent.detail._promise;\n    }\n\n    if (this.index < this.all.length) {\n      setTimeout(this.executeNext.bind(this), 0);\n    } else {\n      this.doneHandler(this);\n      this.removeExecutor(executor);\n    }\n  }\n\n  _executorFailHandler(error, kill) {\n    let executor;\n\n    if (!this.all[this.index]) {\n      this._finCouldNotFindError(error);\n    } else {\n      executor = this.all[this.index].destroy(true);\n    }\n\n    this.ringaEvent.addDebug(`Fail: ${executor}`);\n\n    this.error = error;\n\n    this.failHandler(this, error, kill);\n\n    if (this.ringaEvent.detail._promise) {\n      delete this.ringaEvent.detail._promise;\n    }\n\n    if (!kill) {\n      this._executorDoneHandler();\n    } else {\n      this.removeExecutor(executor);\n    }\n  }\n\n  _finCouldNotFindError(error) {\n    /**\n     * During unit tests, __hardReset() is called at the end of the test. After that point, its possible\n     * for some of the executors to finish up and then because all the threads have been destroyed this\n     * object is going to try to kill the executor that Ringa already cleaned up during a __hardReset. Since\n     * we are moving onto the next unit test, we can just ignore that issue.\n     */\n    if (this.destroyed) {\n      return;\n    }\n\n    let e = (this.all && this.all.length) ? this.all.map(e => {\n        return e.toString();\n      }).join(', ') : `No executors found on thread ${this.toString()}`;\n\n    console.error(`Thread: could not find executor to destroy it! This could be caused by an internal Ringa error or an error in an executor. All information below:\\n` +\n      `\\t- Executor Index: ${this.index}\\n` +\n      `\\t- All Executors: ${e}\\n` +\n      (error ? `\\t- Executor Failure that triggered this was:\\n` +\n      (error.stack ? `\\t${error.stack}\\n` : `${error}`) : '') +\n      `\\t- Failure Dispatch Stack Trace:\\n` +\n      `\\t${new Error().stack}`);\n  }\n}\n\nexport default Thread;\n\n\n// WEBPACK FOOTER //\n// ./src/Thread.js","import ExecutorAbstract from '../ExecutorAbstract';\n\n/**\n * EventExecutor dispatches an event. There are two primary ways to do this in a executor tree:\n *\n *   controller.addListener('event', ['someEvent']); // 'someEvent' will be dispatched on the bus of controller without details\n *   controller.addListener('event', [event('someEvent', {prop: 'details'}, someOtherBus)]); // With details and a custom bus.\n */\nclass EventExecutor extends ExecutorAbstract {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructor for a new EventExecutor\n   *\n   * @param thread The parent thread that owns this command.\n   * @param ringaEventFactory The event to dispatch and watch!\n   */\n  constructor(thread, ringaEventFactory) {\n    super(thread);\n\n    this.ringaEventFactory = ringaEventFactory;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  /**\n   * Internal execution method called by CommandThread only.\n   *\n   * @param doneHandler The handler to call when done() is called.\n   * @param failHandler The handler to call when fail() is called;\n   * @private\n   */\n  _execute(doneHandler, failHandler) {\n    super._execute(doneHandler, failHandler);\n\n    this.dispatchedRingaEvent = this.ringaEventFactory.build(this);\n\n    this.dispatchedRingaEvent.then(this.dispatchedRingaEventDoneHandler.bind(this));\n    this.dispatchedRingaEvent.catch(this.dispatchedRingaEventFailHandler.bind(this));\n\n    // If this executor has custom injections, we need to pass those to the event.\n    if (this._customInjections) {\n      for (let key in this._customInjections) {\n        this.dispatchedRingaEvent.detail[key] = this._customInjections[key];\n      }\n    }\n\n    let bus = this.dispatchedRingaEvent.bus || this.controller.bus;\n\n    this.ringaEvent.lastEvent = this.dispatchedRingaEvent;\n\n    setTimeout(() => {\n      this.dispatchedRingaEvent.dispatch(bus);\n\n      if (this.dispatchedRingaEvent.requireCatch === undefined || this.dispatchedRingaEvent.requireCatch) {\n        if (!this.dispatchedRingaEvent.caught) {\n          this.fail(Error('EventExecutor::_execute(): event ' + this.dispatchedRingaEvent.type + ' was expected to be caught and it was not.'))\n        }\n      }\n    }, 0);\n  }\n\n  toString() {\n    return `${this.id}[dispatching '${this.ringaEventFactory.eventType}']`;\n  }\n\n  _timeoutHandler() {\n    // Noop, we never timeout an EventExecutor because we leave that up to the controller that handles the next event.\n  }\n\n  //-----------------------------------\n  // Events\n  //-----------------------------------\n  dispatchedRingaEventDoneHandler() {\n    // TODO write unit tests for this\n    if (this.dispatchedRingaEvent.detail) {\n      for (let key in this.dispatchedRingaEvent.detail) {\n        if (this.ringaEvent.detail[key] === undefined) {\n          this.ringaEvent.detail[key] = this.dispatchedRingaEvent.detail[key];\n        }\n      }\n    }\n\n    this.done();\n  }\n\n  dispatchedRingaEventFailHandler(error) {\n    if (error.kill) {\n      // Alright, this failure is a timeout on our dispatched event, so the other handling thread will have already dealt with it. Don't display\n      // the error again.\n      if (this.dispatchedRingaEvent._threadTimedOut) {\n        // Lets clear our own timeout and just neither be done nor fail.\n        return;\n      }\n\n      this.fail(error, this.controller.options.killOnErrorHandler(this.ringaEvent, error));\n    }\n  }\n}\n\nexport default EventExecutor;\n\n\n// WEBPACK FOOTER //\n// ./src/executors/EventExecutor.js","import ExecutorAbstract from '../ExecutorAbstract';\nimport {buildArgumentsFromRingaEvent} from '../util/executors';\nimport {getArgNames} from '../util/function';\n\n/**\n * FunctionExecutor is a wrapper for a single function. As a general rule you will not use this directly.\n */\nclass FunctionExecutor extends ExecutorAbstract {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructor for a new Command. This *must* be called via super() from a subclass constructor.\n   *\n   * @param thread The parent thread that owns this command.\n   * @param func The function that is run when the CommandThread calls _execute().\n   */\n  constructor(thread, func) {\n    super(thread);\n\n    this.func = func;\n    this.expectedArguments = getArgNames(func);\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  /**\n   * Internal execution method called by CommandThread only.\n   *\n   * @param doneHandler The handler to call when done() is called.\n   * @param failHandler The handler to call when fail() is called;\n   * @private\n   */\n  _execute(doneHandler, failHandler) {\n    let promise;\n\n    super._execute(doneHandler, failHandler);\n\n    let args;\n\n    try {\n      args = buildArgumentsFromRingaEvent(this, this.expectedArguments, this.ringaEvent);\n    } catch (error) {\n      console.error('FunctionExecutor::_execute: could not build arguments for ', this.func);\n\n      throw error;\n    }\n\n    // If the function requested that 'done' be passed, we assume it is an asynchronous\n    // function and let the function determine when it will call done.\n    const donePassedAsArg = this.expectedArguments.indexOf('done') !== -1;\n\n    try {\n      // Functions can return a promise and if they do, our Thread will wait for the promise to finish.\n      promise = this.func.apply(undefined, args);\n    } catch (error) {\n      console.error(`Error in ${this.controller.name} for event '${this.ringaEvent.type}' in FunctionExecutor ${this.func.toString().substr(0, 512)}.\\nError Below:`);\n      this.fail(error, true);\n      return;\n    }\n\n    // We call done if:\n    // 1) A promise is not returned AND\n    // 2) 'done' was not passed as an argument\n    if (!promise && !donePassedAsArg) {\n      this.done();\n    }\n\n    if (promise) {\n      this.waitForPromise(promise);\n    }\n\n    return promise;\n  }\n\n  toString() {\n    return this.id + ': ' + this.func.toString().substr(0, 128);\n  }\n}\n\nexport default FunctionExecutor;\n\n\n// WEBPACK FOOTER //\n// ./src/executors/FunctionExecutor.js","import ExecutorAbstract from '../ExecutorAbstract';\nimport ExecutorFactory from '../ExecutorFactory';\nimport {wrapIfNotInstance} from '../util/type';\n\nclass ParallelExecutor extends ExecutorAbstract {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructor for a new ParallelExecutor\n   *\n   * @param thread The parent thread that owns this executor.\n   * @param executorArray The executors to run in parallel\n   */\n  constructor(thread, executorArray) {\n    super(thread);\n\n    this.executorArray = executorArray;\n    this.executorFactoryArray = executorArray.map((e) => wrapIfNotInstance(e, ExecutorFactory));\n    this.awaitingExecutors = executorArray.length;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  /**\n   * Internal execution method called by Thread only.\n   *\n   * @param doneHandler The handler to call when done() is called.\n   * @param failHandler The handler to call when fail() is called;\n   * @private\n   */\n  _execute(doneHandler, failHandler) {\n    super._execute(doneHandler, failHandler);\n    this.executorFactoryArray.forEach((executorFactory) => {\n      executorFactory.build(this.thread)._execute(this._parallelDone.bind(this), this._parallelFail.bind(this));\n    });\n  }\n\n  _parallelDone() {\n    this.awaitingExecutors -= 1;\n\n    if (this.awaitingExecutors === 0) {\n      this.done();\n    }\n  }\n\n  _parallelFail(error) {\n    this.fail(error);\n  }\n}\n\nexport default ParallelExecutor;\n\n\n// WEBPACK FOOTER //\n// ./src/executors/ParallelExecutor.js","import ExecutorAbstract from '../ExecutorAbstract';\n\nclass PromiseExecutor extends ExecutorAbstract {\n  //-----------------------------------\n  // Constructor\n  //-----------------------------------\n  /**\n   * Constructor for a new PromiseExecutor\n   *\n   * @param thread The parent thread that owns this executor.\n   * @param promise The promise to execute\n   */\n  constructor(thread, promise) {\n    super(thread);\n\n    this.promise = promise;\n  }\n\n  //-----------------------------------\n  // Methods\n  //-----------------------------------\n  /**\n   * Internal execution method called by Thread only.\n   *\n   * @param doneHandler The handler to call when done() is called.\n   * @param failHandler The handler to call when fail() is called;\n   * @private\n   */\n  _execute(doneHandler, failHandler) {\n    super._execute(doneHandler, failHandler);\n\n    this.waitForPromise(this.promise);\n  }\n}\n\nexport default PromiseExecutor;\n\n\n// WEBPACK FOOTER //\n// ./src/executors/PromiseExecutor.js","import InspectorController from './debug/InspectorController';\nimport InspectorModel from './debug/InspectorModel';\nimport Command from './executors/Command';\nimport ExecutorFactory from './ExecutorFactory';\nimport ThreadFactory from './ThreadFactory';\nimport Controller from './Controller';\nimport RingaEvent, {eventIx} from './RingaEvent';\nimport RingaObject from './RingaObject';\nimport RingaEventFactory from './RingaEventFactory';\nimport AssignFactory from './factories/AssignFactory';\nimport Model from './Model';\nimport ModelWatcher from './ModelWatcher';\nimport Bus, {busses} from './Bus';\nimport IifExecutor from './executors/IifExecutor';\nimport ForEachExecutor from './executors/ForEachExecutor';\nimport IntervalExecutor from './executors/IntervalExecutor';\nimport SpawnExecutor from './executors/SpawnExecutor';\nimport SleepExecutor from './executors/SleepExecutor';\nimport {isDOMNode} from './util/type';\nimport {injectionNames, constructorNames, uglifyWhitelist} from './util/debug';\nimport {injectionInfo} from './util/executors';\n\nimport {ids} from './RingaObject';\nimport {executorCounts} from './ExecutorAbstract';\n\nexport function dispatch (eventType, detail, bus = document, bubbles = true, cancellable = true, requireCatch = true) {\n  if (isDOMNode(detail)) {\n    bus = detail;\n    detail = undefined;\n  }\n  return new RingaEvent(eventType, detail, bubbles, cancellable, undefined, requireCatch).dispatch(bus);\n}\n\nexport function forEach(arrayProperty, property, executor) {\n  return new ExecutorFactory(ForEachExecutor, { arrayProperty, property, executor });\n}\n\nexport function forEachParallel(arrayProperty, property, executor) {\n  return new ExecutorFactory(ForEachExecutor, { arrayProperty, property, executor, sequential: false });\n}\n\nexport function iif (condition, trueExecutor, falseExecutor) {\n  return new ExecutorFactory(IifExecutor, { condition, trueExecutor, falseExecutor });\n}\n\nexport function interval (condition, executor, milliseconds, options) {\n  return new ExecutorFactory(IntervalExecutor, { condition, executor, milliseconds, options });\n}\n\nexport function loop (condition, executor, options) {\n  return new ExecutorFactory(IntervalExecutor, { condition, executor, milliseconds:0, options });\n}\n\nexport function spawn (executor) {\n  return new ExecutorFactory(SpawnExecutor, executor);\n}\n\nexport function sleep (milliseconds) {\n  return new ExecutorFactory(SleepExecutor, milliseconds);\n}\n\nconst debugStyle = 'background: #660000; color: white; font-weight: bold;';\nexport function stop ($ringaEvent, stop, done) {\n  stop();\n\n  let funcName = `go${$ringaEvent.id}`;\n\n  console.log(`%cRinga STOP! RingaEvent:`, debugStyle);\n  console.log($ringaEvent.debugDisplay());\n  console.log(`%cDispatched From:`, debugStyle);\n  console.log(`%c${$ringaEvent.dispatchStack.join('\\n').toString().replace(/@/g, '\\t')}`, debugStyle);\n  console.log(`%c'window.ringaEvent' has been set and is ready for editing.`, debugStyle);\n  console.log(`%cTo resume this stopped event thread, run '${funcName}()' in the console.`, debugStyle);\n\n  if (typeof window !== 'undefined') {\n\n    window.ringaEvent = $ringaEvent;\n    window[funcName] = () => {\n      window.ringaEvent = undefined;\n      window[funcName] = undefined;\n      console.log(`%cResuming Ringa Thread...`, debugStyle);\n      done();\n    };\n  }\n}\n\nexport function assign (executor, detail) {\n  return new AssignFactory(executor, detail);\n}\n\nexport function event (eventType, detail, bus, requireCatch = false, bubbles = true, cancellable = true, event = undefined) {\n  if (__DEV__ && !eventType) {\n    throw new Error('event(): the eventType that was passed in was undefined. This normally means you used a Controller static property before the Controller has been instantiated.');\n  }\n\n  return new RingaEventFactory(eventType, detail, bus, requireCatch, bubbles, cancellable, event);\n}\n\nexport function notify(eventType) {\n  return ($controller, $ringaEvent) => {\n    $controller.notify($ringaEvent, eventType);\n  };\n}\n\nexport function debug() {\n  return {\n    injectionNames: injectionNames(),\n    constructorNames: constructorNames(),\n    uglifyWhitelist: uglifyWhitelist()\n  };\n}\n\nif (typeof window !== 'undefined') {\n  window.ringaDebug = debug;\n}\n\nexport function __hardReset(debug) {\n  ids.__hardReset(debug);\n  executorCounts.map = new Map();\n  busses.count = 0;\n  injectionInfo.byName = {};\n  eventIx.count = 0;\n}\n\nexport { Command, ExecutorFactory, ThreadFactory, Controller, RingaEvent, RingaObject, Bus, Model, ModelWatcher, InspectorController, InspectorModel };\n\nexport default {\n  InspectorController,\n  InspectorModel,\n  Controller,\n  Command,\n  ExecutorFactory,\n  ThreadFactory,\n  Event: RingaEvent,\n  RingaEvent,\n  Model,\n  ModelWatcher,\n  Bus,\n  RingaObject,\n  dispatch,\n  iif,\n  forEach,\n  forEachParallel,\n  interval,\n  loop,\n  spawn,\n  event,\n  assign,\n  notify,\n  stop,\n  sleep,\n};\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}